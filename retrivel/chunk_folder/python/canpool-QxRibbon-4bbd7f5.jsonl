{"filename": "pyqt/test/test_RibbonGallery.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtGui import QIcon\n\tfrom PyQt5.QtWidgets import QApplication, QWidget, QAction\n\tfrom PyRibbon.QxRibbonGallery import RibbonGallery, RibbonGalleryGroup\n\tif __name__ == '__main__':\n\t    app = QApplication([])\n\t    mainWindow = QWidget()\n\t    gallery = RibbonGallery(mainWindow)\n", "    # gallery.resize(mainWindow.width(), gallery.size().height())\n\t    group = gallery.addGalleryGroup()\n\t    group.addActionItem(QAction(QIcon('res/logo.png'), 'test'))\n\t    for i in range(10):\n\t        group.addItem('test '+str(i), QIcon('res/logo.png'))\n\t    group = RibbonGalleryGroup(mainWindow)\n\t    group.setGroupTitle(\"title\")\n\t    group.addActionItem(QAction(QIcon('res/logo.png'), 'test'))\n\t    gallery.addGalleryGroup(group)\n\t    group.setGroupTitle(\"title changeed\")\n", "    mainWindow.setMinimumWidth(500)\n\t    mainWindow.resize(500, 300)\n\t    mainWindow.show()\n\t    app.exec()\n"]}
{"filename": "pyqt/test/test_RibbonBar.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtWidgets import QApplication, QMainWindow\n\tfrom PyRibbon.QxRibbonBar import RibbonBar\n\tif __name__ == '__main__':\n\t    app = QApplication([])\n\t    mainWindow = QMainWindow()\n\t    ribbonBar = RibbonBar(mainWindow)\n\t    ribbonBar.setRibbonStyle(RibbonBar.WpsLiteStyle)\n", "    mainWindow.setMenuWidget(ribbonBar)\n\t    ribbonBar.setContentsMargins(0, 0, 0, 0)\n\t    ribbonBar.applicationButton().setText(\"File\")\n\t    page = ribbonBar.addPage('Page1')\n\t    page = ribbonBar.addPage('Page2')\n\t    mainWindow.setMinimumWidth(500)\n\t    mainWindow.show()\n\t    app.exec()\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonBar.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import List, Union\n\tfrom PyQt5.QtCore import Qt, QSize, pyqtSignal, QEvent, QObject, QVariant, QRect, \\\n\t    QPoint, QMargins\n\tfrom PyQt5.QtGui import QColor, QPaintEvent, QResizeEvent, QMoveEvent, QIcon, QPainter, \\\n\t    QMouseEvent, QHoverEvent, QCursor, QPen\n\tfrom PyQt5.QtWidgets import QMenuBar, QAbstractButton, QFrame, QAction, \\\n\t    QStackedWidget, QApplication, QStyle\n", "from .QxRibbonTabBar import RibbonTabBar\n\tfrom .QxRibbonPage import RibbonPage, RibbonPageContext\n\tfrom .QxRibbonGroup import RibbonGroup, RibbonGroupLayout\n\tfrom .QxRibbonButtonGroup import RibbonButtonGroup\n\tfrom .QxRibbonQuickAccessBar import RibbonQuickAccessBar\n\tfrom .QxRibbonApplicationButton import RibbonApplicationButton\n\tfrom .QxRibbonControls import RibbonControlButton\n\tclass RibbonStackedWidget(QStackedWidget):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n", "        self.m_isPopup = False\n\t    def isPopup(self) -> bool:\n\t        return self.m_isPopup\n\t    def setPopup(self, popup: bool):\n\t        if self.m_isPopup == popup:\n\t            return\n\t        self.m_isPopup = popup\n\t        if popup:\n\t            self.setWindowFlags(Qt.Popup)\n\t        else:\n", "            self.setWindowFlags(Qt.Widget)\n\t    def moveWidget(self, fr: int, to: int):\n\t        w = self.widget(fr)\n\t        self.removeWidget(w)\n\t        self.insertWidget(to, w)\n\t    def event(self, event: QEvent) -> bool:\n\t        if self.m_isPopup:\n\t            if event.type() == QEvent.Show:\n\t                self.aboutToShow.emit()\n\t            elif event.type() == QEvent.Hide:\n", "                self.aboutToHide.emit()\n\t        return super().event(event)\n\t    aboutToShow = pyqtSignal()\n\t    aboutToHide = pyqtSignal()\n\tclass _PageContextManagerData:\n\t    def __init__(self):\n\t        self.pageContext: RibbonPageContext = None\n\t        self.tabPageIndex: List[int] = list()\n\t    def compare(self, context: RibbonPageContext):\n\t        return self.pageContext == context\n", "class _RibbonTabData:\n\t    def __init__(self):\n\t        self.page: RibbonPage = None\n\t        self.index: int = -1\n\tclass RibbonBar(QMenuBar):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_iconRightBorderPosition: int = 1\n\t        self.m_minimumPageButton: RibbonControlButton = None\n\t        self.m_rightButtonGroup: RibbonButtonGroup = None\n", "        self.m_ribbonStyle = RibbonBar.OfficeStyle\n\t        self.m_lastShowStyle = RibbonBar.OfficeStyle\n\t        self.m_titleTextColor: QColor = QColor(Qt.black)\n\t        self.m_tabBarBaseLineColor: QColor = QColor(186, 201, 219)\n\t        self.m_titleAlignment = Qt.AlignCenter\n\t        self.m_minimized = True\n\t        self.m_pageContextColorListIndex = -1\n\t        self.m_pageContextColorList: List[QColor] = [\n\t            QColor(201, 89, 156),  # 玫红\n\t            QColor(242, 203, 29),  # 黄\n", "            QColor(255, 157, 0),  # 橙\n\t            QColor(14, 81, 167),  # 蓝\n\t            QColor(228, 0, 69),  # 红\n\t            QColor(67, 148, 0),  # 绿\n\t        ]\n\t        self.m_currentShowingPageContextList: List[_PageContextManagerData] = list()\n\t        self.m_pageContextList: List[RibbonPageContext] = list()\n\t        self.m_hidePages: List[_RibbonTabData] = list()\n\t        self.m_applicationButton = RibbonApplicationButton(self)\n\t        self.m_applicationButton.clicked.connect(self.applicationButtonClicked)\n", "        self.m_tabBar = RibbonTabBar(self)\n\t        self.m_tabBar.setObjectName(\"qx_RibbonTabBar\")\n\t        self.m_tabBar.setDrawBase(False)\n\t        self.m_tabBar.currentChanged.connect(self.onCurrentRibbonTabChanged)\n\t        self.m_tabBar.tabBarClicked.connect(self.onCurrentRibbonTabClicked)\n\t        self.m_tabBar.tabBarDoubleClicked.connect(self.onCurrentRibbonTabDoubleClicked)\n\t        self.m_tabBar.tabMoved.connect(self.onTabMoved)\n\t        self.m_stack = RibbonStackedWidget(self)\n\t        self.m_stack.setObjectName(\"qx_RibbonStackedWidget\")\n\t        self.m_stack.aboutToHide.connect(self.onStackWidgetHided)\n", "        self.m_stack.installEventFilter(self)\n\t        self._setMinimizedFlag(False)\n\t        self.m_quickAccessBar = RibbonQuickAccessBar(self)\n\t        self.m_quickAccessBar.setObjectName(\"qx_RibbonQuickAccessBar\")\n\t        self.m_quickAccessBar.setIcon(self.windowIcon())\n\t        lineSpacing = QApplication.fontMetrics().lineSpacing()\n\t        self.m_titleBarHeight = lineSpacing * 1.8\n\t        self.m_tabBarHeight = lineSpacing * 1.5\n\t        self.m_windowButtonsSize = QSize(int(self.m_titleBarHeight * 4), int(self.m_titleBarHeight))\n\t        self.m_ribbonBarHeightOfficeStyleThreeRow = 0\n", "        self.m_ribbonBarHeightWpsLiteStyleThreeRow = 0\n\t        self.m_ribbonBarHeightOfficeStyleTwoRow = 0\n\t        self.m_ribbonBarHeightWpsLiteStyleTwoRow = 0\n\t        self.recalc()\n\t        if parent:\n\t            parent.windowTitleChanged.connect(self.onWindowTitleChanged)\n\t            parent.windowIconChanged.connect(self.onWindowIconChanged)\n\t        self.setRibbonStyle(RibbonBar.OfficeStyle)\n\t    def applicationButton(self) -> QAbstractButton:\n\t        return self.m_applicationButton\n", "    def setApplicationButton(self, btn: QAbstractButton):\n\t        if self.m_applicationButton:\n\t            self.m_applicationButton.deleteLater()\n\t            self.m_applicationButton = None\n\t        if btn:\n\t            if btn.parent() != self:\n\t                btn.setParent(self)\n\t            btn.move(0, self.titleBarHeight())\n\t            self.m_applicationButton = btn\n\t            self.m_applicationButton.clicked.connect(self.applicationButtonClicked)\n", "            if not btn.objectName():\n\t                btn.setObjectName('RibbonApplicationButton')\n\t            btn.setVisible(True)\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def ribbonTabBar(self) -> RibbonTabBar:\n\t        return self.m_tabBar\n\t    def addPage(self, *args) -> Union[None, RibbonPage]:\n\t        \"\"\"\n\t        addPage(title: str) -> RibbonPage\n\t        addPage(page: RibbonPage) -> None\n", "        \"\"\"\n\t        if len(args) == 1:\n\t            if isinstance(args[0], str):\n\t                return self.insertPage(-1, args[0])\n\t            else:\n\t                self.insertPage(-1, args[0])\n\t    def _insertPage(self, index: int, page: RibbonPage):\n\t        page.setGroupLayoutMode(RibbonGroup.TwoRowMode if self.isTwoRowStyle() else\n\t                                RibbonGroup.ThreeRowMode)\n\t        i = self.m_tabBar.insertTab(index, page.windowTitle())\n", "        tabData = _RibbonTabData()\n\t        tabData.page = page\n\t        tabData.index = i\n\t        self.m_tabBar.setTabData(i, tabData)\n\t        if index != -1:\n\t            self._updateTabData()\n\t        self.m_stack.insertWidget(i, page)\n\t        page.windowTitleChanged.connect(self.onPageWindowTitleChanged)\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def insertPage(self, *args) -> Union[None, RibbonPage]:\n", "        \"\"\"\n\t        insertPage(index: int, title: str) -> RibbonPage\n\t        insertPage(index: int, page: RibbonPage) -> None\n\t        \"\"\"\n\t        if len(args) == 2:\n\t            if isinstance(args[1], str):\n\t                title = args[1]\n\t                page = RibbonPage(self)\n\t                page.setObjectName(title)\n\t                page.setWindowTitle(title)\n", "                self._insertPage(args[0], page)\n\t                return page\n\t            elif isinstance(args[1], RibbonPage):\n\t                self._insertPage(args[0], args[1])\n\t    def page(self, index: int) -> RibbonPage:\n\t        var = self.m_tabBar.tabData(index)\n\t        if var:\n\t            return var.page\n\t        return None\n\t    def pageByName(self, title: str) -> RibbonPage:\n", "        c = self.m_stack.count()\n\t        for i in range(c):\n\t            w = self.m_stack.widget(i)\n\t            if w and w.windowTitle() == title:\n\t                return w\n\t        return None\n\t    def pageByObjectName(self, objname: str) -> RibbonPage:\n\t        c = self.m_stack.count()\n\t        for i in range(c):\n\t            w = self.m_stack.widget(i)\n", "            if w and w.objectName() == objname:\n\t                return w\n\t        return None\n\t    def pages(self, get_all: bool = True) -> List[RibbonPage]:\n\t        c = self.m_stack.count()\n\t        res = []\n\t        for i in range(c):\n\t            w = self.m_stack.widget(i)\n\t            if isinstance(w, RibbonPage):\n\t                page: RibbonPage = w\n", "                if not get_all and page.isPageContext():\n\t                    continue\n\t                res.append(page)\n\t        return res\n\t    def isPageVisible(self, page: RibbonPage) -> bool:\n\t        return self.pageIndex(page) >= 0\n\t    def showPage(self, page: RibbonPage):\n\t        for i, data in enumerate(self.m_hidePages):\n\t            if page == data.page:\n\t                index = self.m_tabBar.insertTab(data.index, data.page.windowTitle())\n", "                data.index = index\n\t                self.m_tabBar.setTabData(index, data)\n\t                self.m_hidePages.pop(i)\n\t                self._updateTabData()\n\t                break\n\t        self.raisePage(page)\n\t    def hidePage(self, page: RibbonPage):\n\t        c = self.m_tabBar.count()\n\t        for i in range(c):\n\t            var: _RibbonTabData = self.m_tabBar.tabData(i)\n", "            if var.page == page:\n\t                self.m_hidePages.append(var)\n\t                self.m_tabBar.removeTab(i)\n\t                self._updateTabData()\n\t                return\n\t    def raisePage(self, page: RibbonPage):\n\t        index = self.m_stack.indexOf(page)\n\t        if index >= 0:\n\t            self.setCurrentIndex(index)\n\t    def removePage(self, page: RibbonPage):\n", "        index = self._tabIndex(page)\n\t        isUpdate = False\n\t        if index >= 0:\n\t            self.m_tabBar.removeTab(index)\n\t            isUpdate = True\n\t        self.m_stack.removeWidget(page)\n\t        for c in self.m_pageContextList:\n\t            c.takePage(page)\n\t        if isUpdate:\n\t            self._updateTabData()\n", "        self.repaint()\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def movePage(self, fr: int, to: int):\n\t        self.m_tabBar.moveTab(fr, to)\n\t        self._updateTabData()\n\t    def pageIndex(self, page: RibbonPage) -> int:\n\t        return self._tabIndex(page)\n\t    def _addPageContext(self, context: RibbonPageContext):\n\t        context.pageAdded.connect(self.onPageContextAdded)\n\t        if self.currentRibbonStyle() == RibbonBar.WpsLiteStyle:\n", "            self._resizeInWpsLiteStyle()\n\t        self.m_pageContextList.append(context)\n\t    def addPageContext(self, *args) -> Union[None, RibbonPageContext]:\n\t        \"\"\"\n\t        addPageContext(title: str, color = QColor(), id = QVariant()) -> RibbonPageContext\n\t        addPageContext(context: RibbonPageContext) -> None\n\t        \"\"\"\n\t        arg_len = len(args)\n\t        if arg_len > 0:\n\t            if isinstance(args[0], RibbonPageContext):\n", "                self._addPageContext(args[0])\n\t            else:\n\t                title = args[0]\n\t                color = args[1] if arg_len > 1 else QColor()\n\t                contextId = args[2] if arg_len > 2 else QVariant()\n\t                context = RibbonPageContext(self)\n\t                context.setObjectName(title)\n\t                context.setContextTitle(title)\n\t                context.setId(contextId)\n\t                context.setContextColor(color if color.isValid() else self._getPageContextColor())\n", "                self._addPageContext(context)\n\t                return context\n\t    def showPageContext(self, context: RibbonPageContext):\n\t        if self.isPageContextVisible(context):\n\t            return\n\t        pageContextData = _PageContextManagerData()\n\t        pageContextData.pageContext = context\n\t        for i in range(context.pageCount()):\n\t            page = context.page(i)\n\t            page.setGroupLayoutMode(RibbonGroup.TwoRowMode if self.isTwoRowStyle() else\n", "                                    RibbonGroup.ThreeRowMode)\n\t            index = self.m_tabBar.addTab(page.windowTitle())\n\t            pageContextData.tabPageIndex.append(index)\n\t            tabData = _RibbonTabData()\n\t            tabData.page = page\n\t            tabData.index = index\n\t            self.m_tabBar.setTabData(index, tabData)\n\t        self.m_currentShowingPageContextList.append(pageContextData)\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def hidePageContext(self, context: RibbonPageContext):\n", "        needResize = False\n\t        indexOffset = 0\n\t        for i, data in enumerate(self.m_currentShowingPageContextList):\n\t            if data.compare(context):\n\t                indexes = data.tabPageIndex\n\t                for index in reversed(indexes):\n\t                    self.m_tabBar.removeTab(index)\n\t                    indexOffset += 1\n\t                needResize = True\n\t                self.m_currentShowingPageContextList.pop(i)\n", "                break\n\t        if needResize:\n\t            self._updateTabData()\n\t            QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def isPageContextVisible(self, context: RibbonPageContext) -> bool:\n\t        return self._isContainPageContextInList(context)\n\t    def setPageContextVisible(self, context: RibbonPageContext, visible: bool):\n\t        if not context:\n\t            return\n\t        if visible:\n", "            self.showPageContext(context)\n\t        else:\n\t            self.hidePageContext(context)\n\t    def pageContextList(self) -> List[RibbonPageContext]:\n\t        return self.m_pageContextList\n\t    def destroyPageContext(self, context: RibbonPageContext):\n\t        if self.isPageContextVisible(context):\n\t            self.hidePageContext(context)\n\t        self.m_pageContextList.remove(context)\n\t        res = context.pageList()\n", "        for page in res:\n\t            page.hide()\n\t            # page.deleteLater()\n\t        context.deleteLater()\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def minimize(self):\n\t        self.setMinimized(True)\n\t    def isMinimized(self) -> bool:\n\t        return self.m_minimized\n\t    def setMinimized(self, flag: bool):\n", "        self._setMinimizedFlag(flag)\n\t        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t        self.minimizationChanged.emit(flag)\n\t    def haveShowMinimumButton(self) -> bool:\n\t        return self.m_minimumPageButton is not None\n\t    def showMinimumButton(self, shown: bool = True):\n\t        if shown:\n\t            self.activeRightButtonGroup()\n\t            if not self.m_minimumPageButton:\n\t                self.m_minimumPageButton = RibbonControlButton(self)\n", "                self.m_minimumPageButton.setAutoRaise(False)\n\t                self.m_minimumPageButton.setObjectName('RibbonBarHideGroupButton')\n\t                self.m_minimumPageButton.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t                self.m_minimumPageButton.setFixedSize(self.tabBarHeight() - 4, self.tabBarHeight() - 4)\n\t                self.m_minimumPageButton.ensurePolished()\n\t                action = QAction(self.m_minimumPageButton)\n\t                action.setIcon(self.style().standardIcon(QStyle.SP_TitleBarUnshadeButton if self.isMinimized() else\n\t                                                         QStyle.SP_TitleBarShadeButton, None))\n\t                action.triggered.connect(lambda: (\n\t                    self.setMinimized(not self.isMinimized()),\n", "                    action.setIcon(self.style().standardIcon(QStyle.SP_TitleBarUnshadeButton if self.isMinimized() else\n\t                                                             QStyle.SP_TitleBarShadeButton, None))\n\t                ))\n\t                self.m_minimumPageButton.setDefaultAction(action)\n\t                self.m_rightButtonGroup.addWidget(self.m_minimumPageButton)\n\t                self.update()\n\t            else:\n\t                self.m_minimumPageButton.show()\n\t        else:\n\t            if self.m_minimumPageButton:\n", "                self.m_minimumPageButton.hide()\n\t        QApplication.sendEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def tabBarHeight(self) -> int:\n\t        return round(self.m_tabBarHeight)\n\t    def titleBarHeight(self) -> int:\n\t        return round(self.m_titleBarHeight)\n\t    def rightButtonGroup(self) -> RibbonButtonGroup:\n\t        self.activeRightButtonGroup()\n\t        return self.m_rightButtonGroup\n\t    def activeRightButtonGroup(self):\n", "        if not self.m_rightButtonGroup:\n\t            self.m_rightButtonGroup = RibbonButtonGroup(self)\n\t            self.m_rightButtonGroup.setFrameShape(QFrame.NoFrame)\n\t        self.m_rightButtonGroup.show()\n\t    def quickAccessBar(self) -> RibbonQuickAccessBar:\n\t        return self.m_quickAccessBar\n\t    def currentRibbonStyle(self) -> int:\n\t        return self.m_ribbonStyle\n\t    def setRibbonStyle(self, style: int):\n\t        self.m_ribbonStyle = style\n", "        self.m_lastShowStyle = style\n\t        self.m_quickAccessBar.setIconVisible(self.isOfficeStyle())\n\t        self._updateRibbonElementGeometry()\n\t        oldSize = self.size()\n\t        newSize = QSize(oldSize.width(), self._mainBarHeight())\n\t        QApplication.sendEvent(self, QResizeEvent(newSize, oldSize))\n\t        if self.isMinimized():\n\t            self.setFixedHeight(self.m_tabBar.geometry().bottom())\n\t        self.ribbonStyleChanged.emit(style)\n\t    def currentIndex(self) -> int:\n", "        return self.m_tabBar.currentIndex()\n\t    def setCurrentIndex(self, index: int):\n\t        return self.m_tabBar.setCurrentIndex(index)\n\t    def isOfficeStyle(self) -> bool:\n\t        return (self.m_ribbonStyle & 0x00FF) == 0\n\t    def isTwoRowStyle(self) -> bool:\n\t        return (self.m_ribbonStyle & 0xFF00) != 0\n\t    def setWindowButtonsSize(self, size: QSize):\n\t        self.m_windowButtonsSize = size\n\t    def updateRibbonGeometry(self):\n", "        self._updateRibbonElementGeometry()\n\t        for page in self.pages():\n\t            page.updateItemGeometry()\n\t    def tabBarBaseLineColor(self) -> QColor:\n\t        return self.m_tabBarBaseLineColor\n\t    def setTabBarBaseLineColor(self, color: QColor):\n\t        self.m_tabBarBaseLineColor = color\n\t    def windowTitleTextColor(self) -> QColor:\n\t        return self.m_titleTextColor\n\t    def setWindowTitleTextColor(self, color: QColor):\n", "        self.m_titleTextColor = color\n\t    def windowTitleAlignment(self) -> int:\n\t        return self.m_titleAlignment\n\t    def setWindowTitleAlignment(self, align: int):\n\t        self.m_titleAlignment = align\n\t    def eventFilter(self, obj: QObject, event: QEvent) -> bool:\n\t        if not obj:\n\t            return super().eventFilter(obj, event)\n\t        if obj == self.cornerWidget(Qt.TopLeftCorner) or obj == self.cornerWidget(Qt.TopRightCorner):\n\t            if event.type() in (QEvent.UpdateLater, QEvent.MouseButtonRelease, QEvent.WindowActivate):\n", "                QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t        elif obj == self.m_stack:\n\t            '''\n\t            在stack 是popup模式时，点击的是stackWidget区域外的时候，如果是在ribbonTabBar上点击\n\t            那么忽略掉这次点击，把点击下发到ribbonTabBar,这样可以避免stackWidget在点击ribbonTabBar后\n\t            隐藏又显示，出现闪烁\n\t            '''\n\t            if event.type() in (QEvent.MouseButtonPress, QEvent.MouseButtonDblClick) and self.m_stack.isPopup():\n\t                mouseEvent: QMouseEvent = event\n\t                if not self.m_stack.rect().contains(mouseEvent.pos()):\n", "                    clickedWidget = QApplication.widgetAt(mouseEvent.globalPos())\n\t                    if clickedWidget == self.m_tabBar:\n\t                        targetPoint = clickedWidget.mapFromGlobal(mouseEvent.globalPos())\n\t                        ePress = QMouseEvent(mouseEvent.type(), targetPoint, mouseEvent.globalPos(),\n\t                                             mouseEvent.button(), mouseEvent.buttons(),\n\t                                             mouseEvent.modifiers())\n\t                        QApplication.postEvent(clickedWidget, ePress)\n\t                        return True\n\t        return super().eventFilter(obj, event)\n\t    def paintEvent(self, event: QPaintEvent):\n", "        p = QPainter(self)\n\t        if self.isOfficeStyle():\n\t            self._paintInOfficeStyle(p)\n\t        else:\n\t            self._paintInWpsLiteStyle(p)\n\t    def resizeEvent(self, event: QResizeEvent):\n\t        if self.isOfficeStyle():\n\t            self._resizeInOfficeStyle()\n\t        else:\n\t            self._resizeInWpsLiteStyle()\n", "        self.update()\n\t    def moveEvent(self, event: QMoveEvent):\n\t        if self.m_stack:\n\t            if self.m_stack.isPopup():\n\t                self._resizeStackedWidget()\n\t        super().moveEvent(event)\n\t    def onWindowTitleChanged(self, title: str):\n\t        self.update()\n\t    def onWindowIconChanged(self, icon: QIcon):\n\t        if self.m_quickAccessBar:\n", "            self.m_quickAccessBar.setIcon(icon)\n\t    def onPageWindowTitleChanged(self, title: str):\n\t        w = self.sender()\n\t        if not w:\n\t            return\n\t        for i in range(self.m_tabBar.count()):\n\t            p = self.m_tabBar.tabData(i)\n\t            if w == p.page:\n\t                self.m_tabBar.setTabText(i, title)\n\t    def onPageContextAdded(self, page: RibbonPage):\n", "        self.m_stack.addWidget(page)\n\t    def onCurrentRibbonTabChanged(self, index: int):\n\t        tabData: _RibbonTabData = self.m_tabBar.tabData(index)\n\t        if tabData and tabData.page:\n\t            page = tabData.page\n\t            if self.m_stack.currentWidget() != page:\n\t                self.m_stack.setCurrentWidget(page)\n\t            if self.isMinimized():\n\t                self.m_quickAccessBar.clearFocus()\n\t                if not self.m_stack.isVisible() and self.m_stack.isPopup():\n", "                    # 在stackWidget弹出前，先给tabbar一个QHoverEvent,让tabbar知道鼠标已经移开\n\t                    ehl = QHoverEvent(QEvent.HoverLeave, self.m_tabBar.mapToGlobal(QCursor.pos()),\n\t                                      self.m_tabBar.mapToGlobal(QCursor.pos()))\n\t                    QApplication.sendEvent(self.m_tabBar, ehl)\n\t                    self._resizeStackedWidget()\n\t                    self.m_stack.setFocus()\n\t                    self.m_stack.show()\n\t        self.currentRibbonTabChanged.emit(index)\n\t    def onCurrentRibbonTabClicked(self, index: int):\n\t        if index != self.m_tabBar.currentIndex():\n", "            return\n\t        if self.isMinimized():\n\t            if not self.m_stack.isVisible() and self.m_stack.isPopup():\n\t                # 在stackWidget弹出前，先给tabbar一个QHoverEvent,让tabbar知道鼠标已经移开\n\t                ehl = QHoverEvent(QEvent.HoverLeave, self.m_tabBar.mapToGlobal(QCursor.pos()),\n\t                                  self.m_tabBar.mapToGlobal(QCursor.pos()))\n\t                QApplication.sendEvent(self.m_tabBar, ehl)\n\t                self._resizeStackedWidget()\n\t                self.m_stack.setFocus()\n\t                self.m_stack.show()\n", "    def onCurrentRibbonTabDoubleClicked(self, index: int):\n\t        self.setMinimized(not self.isMinimized())\n\t    def onTabMoved(self, fr: int, to: int):\n\t        self.m_stack.moveWidget(fr, to)\n\t    def onStackWidgetHided(self):\n\t        pass\n\t    def recalc(self):\n\t        self.m_ribbonBarHeightOfficeStyleThreeRow = self._calcRibbonBarHeight(RibbonBar.OfficeStyle)\n\t        self.m_ribbonBarHeightWpsLiteStyleThreeRow = self._calcRibbonBarHeight(RibbonBar.WpsLiteStyle)\n\t        self.m_ribbonBarHeightOfficeStyleTwoRow = self._calcRibbonBarHeight(RibbonBar.OfficeStyleTwoRow)\n", "        self.m_ribbonBarHeightWpsLiteStyleTwoRow = self._calcRibbonBarHeight(RibbonBar.WpsLiteStyleTwoRow)\n\t    def _calcRibbonBarHeight(self, style) -> int:\n\t        if style == RibbonBar.OfficeStyle:\n\t            return self.titleBarHeight() + self.tabBarHeight() + \\\n\t                   QApplication.fontMetrics().lineSpacing() * 1.5 * 3 + \\\n\t                   RibbonGroupLayout.groupContentsMargins().top() + \\\n\t                   RibbonGroupLayout.groupContentsMargins().bottom() + \\\n\t                   RibbonGroup.groupTitleHeight()\n\t        elif style == RibbonBar.WpsLiteStyle:\n\t            return self.m_ribbonBarHeightOfficeStyleThreeRow - self.tabBarHeight()\n", "        elif style == RibbonBar.WpsLiteStyleTwoRow:\n\t            return int(self.m_ribbonBarHeightOfficeStyleThreeRow * 0.95 - self.tabBarHeight() -\n\t                       RibbonGroup.groupTitleHeight())\n\t        elif style == RibbonBar.OfficeStyleTwoRow:\n\t            return int(self.m_ribbonBarHeightOfficeStyleThreeRow * 0.95 - RibbonGroup.groupTitleHeight())\n\t        else:\n\t            return self.m_ribbonBarHeightOfficeStyleThreeRow\n\t    def _isContainPageContextInList(self, context: RibbonPageContext) -> bool:\n\t        if not context:\n\t            return False\n", "        for data in self.m_currentShowingPageContextList:\n\t            if data.compare(context):\n\t                return True\n\t        return False\n\t    def _setMinimizedFlag(self, flag: bool):\n\t        if self.m_minimized == flag:\n\t            return\n\t        self.m_minimized = flag\n\t        if flag:\n\t            self.m_stack.setPopup(True)\n", "            self.m_stack.setFocusPolicy(Qt.NoFocus)\n\t            self.m_stack.clearFocus()\n\t            self.m_stack.setFocus()\n\t            self.m_stack.hide()\n\t            self.setFixedHeight(self.m_tabBar.geometry().bottom())\n\t        else:\n\t            self.m_stack.setPopup(False)\n\t            self.m_stack.setFocus()\n\t            self.m_stack.show()\n\t    def _getPageContextColor(self) -> QColor:\n", "        if not self.m_pageContextColorList:\n\t            self.m_pageContextColorListIndex = -1\n\t            return QColor()\n\t        self.m_pageContextColorListIndex += 1\n\t        if self.m_pageContextColorListIndex >= len(self.m_pageContextColorList) or \\\n\t                self.m_pageContextColorListIndex < 0:\n\t            self.m_pageContextColorListIndex = 0\n\t        return self.m_pageContextColorList[self.m_pageContextColorListIndex]\n\t    def _updateTabData(self):\n\t        c = self.m_tabBar.count()\n", "        for i in range(c):\n\t            data: _RibbonTabData = self.m_tabBar.tabData(i)\n\t            if data:\n\t                data.index = i\n\t                self.m_tabBar.setTabData(i, data)\n\t        self._updatePageContextManagerData()\n\t    def _updatePageContextManagerData(self):\n\t        for cd in self.m_currentShowingPageContextList:\n\t            cd.tabPageIndex.clear()\n\t            for i in range(cd.pageContext.pageCount()):\n", "                page = cd.pageContext.page(i)\n\t                for j in range(self.m_tabBar.count()):\n\t                    data: _RibbonTabData = self.m_tabBar.tabData(j)\n\t                    if data:\n\t                        if data.page == page:\n\t                            cd.tabPageIndex.append(j)\n\t                    else:\n\t                        cd.tabPageIndex.append(-1)\n\t    def _updateRibbonElementGeometry(self):\n\t        for page in self.pages():\n", "            page.setGroupLayoutMode(RibbonGroup.TwoRowMode if self.isTwoRowStyle() else\n\t                                    RibbonGroup.ThreeRowMode)\n\t        if not self.isMinimized():\n\t            self.setFixedHeight(int(self._mainBarHeight()))\n\t    def _paintInOfficeStyle(self, p: QPainter):\n\t        self._paintBackground(p)\n\t        p.save()\n\t        pageContextPos = QPoint(self.width(), -1)\n\t        border = self.contentsMargins()\n\t        for cd in self.m_currentShowingPageContextList:\n", "            indexes = cd.tabPageIndex\n\t            clr = cd.pageContext.contextColor()\n\t            if indexes:\n\t                contextTitleRect = QRect(self.m_tabBar.tabRect(indexes[0]))\n\t                endRect = QRect(self.m_tabBar.tabRect(indexes[-1]))\n\t                contextTitleRect.setRight(endRect.right())\n\t                contextTitleRect.translate(self.m_tabBar.x(), self.m_tabBar.y())\n\t                contextTitleRect.setHeight(self.m_tabBar.height() - 1)\n\t                contextTitleRect -= self.m_tabBar.tabMargin()\n\t                contextTitleRect.setTop(border.top())\n", "                self._paintPageContextTab(p, cd.pageContext.contextTitle(), contextTitleRect, clr)\n\t                if contextTitleRect.left() < pageContextPos.x():\n\t                    pageContextPos.setX(contextTitleRect.left())\n\t                if contextTitleRect.right() > pageContextPos.y():\n\t                    pageContextPos.setY(contextTitleRect.right())\n\t            if self.m_tabBar.currentIndex() in indexes:\n\t                pen = QPen()\n\t                pen.setColor(clr)\n\t                pen.setWidth(1)\n\t                p.setPen(pen)\n", "                p.setBrush(Qt.NoBrush)\n\t                p.drawRect(self.m_stack.geometry())\n\t        p.restore()\n\t        parWindow = self.parentWidget()\n\t        if parWindow:\n\t            titleRegion = QRect()\n\t            if pageContextPos.y() < 0:\n\t                titleRegion.setRect(self.m_quickAccessBar.geometry().right() + 1, border.top(),\n\t                                    self.width() - self.m_iconRightBorderPosition - border.right() -\n\t                                    self.m_windowButtonsSize.width() - self.m_quickAccessBar.geometry().right() - 1,\n", "                                    int(self.titleBarHeight()))\n\t            else:\n\t                leftWidth = pageContextPos.x() - self.m_quickAccessBar.geometry().right() - \\\n\t                            self.m_iconRightBorderPosition\n\t                rightWidth = self.width() - pageContextPos.y() - self.m_windowButtonsSize.width()\n\t                if rightWidth > leftWidth:\n\t                    titleRegion.setRect(pageContextPos.y(), border.top(), rightWidth, self.titleBarHeight())\n\t                else:\n\t                    titleRegion.setRect(self.m_iconRightBorderPosition + self.m_quickAccessBar.geometry().right(),\n\t                                        border.top(), leftWidth, self.titleBarHeight())\n", "            self._paintWindowTitle(p, parWindow.windowTitle(), titleRegion)\n\t    def _paintInWpsLiteStyle(self, p: QPainter):\n\t        self._paintBackground(p)\n\t        p.save()\n\t        border = self.contentsMargins()\n\t        for cd in self.m_currentShowingPageContextList:\n\t            indexes = cd.tabPageIndex\n\t            clr = cd.pageContext.contextColor()\n\t            if indexes:\n\t                contextTitleRect = QRect(self.m_tabBar.tabRect(indexes[0]))\n", "                endRect = QRect(self.m_tabBar.tabRect(indexes[-1]))\n\t                contextTitleRect.setRight(endRect.right())\n\t                contextTitleRect.translate(self.m_tabBar.x(), self.m_tabBar.y())\n\t                contextTitleRect.setHeight(self.m_tabBar.height() - 1)\n\t                contextTitleRect -= self.m_tabBar.tabMargin()\n\t                contextTitleRect.setTop(border.top())\n\t                self._paintPageContextTab(p, \"\", contextTitleRect, clr)\n\t            if self.m_tabBar.currentIndex() in indexes:\n\t                pen = QPen()\n\t                pen.setColor(clr)\n", "                pen.setWidth(1)\n\t                p.setPen(pen)\n\t                p.setBrush(Qt.NoBrush)\n\t                p.drawRect(self.m_stack.geometry())\n\t        p.restore()\n\t        parWindow = self.parentWidget()\n\t        if parWindow:\n\t            start = self.m_tabBar.x() + self.m_tabBar.width()\n\t            width = self.m_quickAccessBar.x() - start\n\t            if width > 20:\n", "                titleRegion = QRect(start, border.top(), width, self.titleBarHeight())\n\t                self._paintWindowTitle(p, parWindow.windowTitle(), titleRegion)\n\t    def _paintBackground(self, painter: QPainter):\n\t        painter.save()\n\t        lineY = self.m_tabBar.geometry().bottom()\n\t        pen = QPen(self.m_tabBarBaseLineColor)\n\t        border = self.contentsMargins()\n\t        pen.setWidth(1)\n\t        pen.setStyle(Qt.SolidLine)\n\t        painter.setPen(pen)\n", "        painter.drawLine(QPoint(border.left(), lineY),\n\t                         QPoint(self.width() - border.right() - 1, lineY))\n\t        painter.restore()\n\t    def _paintWindowTitle(self, painter: QPainter, title: str, rect: QRect):\n\t        painter.save()\n\t        painter.setPen(self.m_titleTextColor)\n\t        painter.drawText(rect, self.m_titleAlignment, title)\n\t        painter.restore()\n\t    def _paintPageContextTab(self, painter: QPainter, title: str, rect: QRect, color: QColor):\n\t        border = self.contentsMargins()\n", "        painter.save()\n\t        painter.setPen(Qt.NoPen)\n\t        painter.setBrush(color)\n\t        painter.drawRect(QRect(rect.x(), border.top(), rect.width(), 5))\n\t        gColor = color.lighter(190)\n\t        newContextRect = QRect(rect)\n\t        newContextRect -= QMargins(0, 5, 0, 0)\n\t        painter.fillRect(newContextRect, gColor)\n\t        if self.isOfficeStyle() and title:\n\t            newContextRect.setBottom(self.m_tabBar.geometry().top())\n", "            painter.setPen(color)\n\t            painter.drawText(newContextRect, Qt.AlignCenter, title)\n\t        painter.restore()\n\t    def _resizeInOfficeStyle(self):\n\t        self._updateRibbonElementGeometry()\n\t        border = self.contentsMargins()\n\t        x = border.left()\n\t        y = border.top()\n\t        validTitleBarHeight = self.titleBarHeight()\n\t        tabH = self.tabBarHeight()\n", "        x += self.m_iconRightBorderPosition + 5\n\t        connerL = self.cornerWidget(Qt.TopLeftCorner)\n\t        if connerL and connerL.isVisible():\n\t            connerSize = connerL.sizeHint()\n\t            if connerSize.height() < validTitleBarHeight:\n\t                detal = (validTitleBarHeight - connerSize.height()) / 2\n\t                connerL.setGeometry(x, y + detal, connerSize.width(), connerSize.height())\n\t            else:\n\t                connerL.setGeometry(x, y, connerSize.width(), validTitleBarHeight)\n\t            x = connerL.geometry().right() + 5\n", "        # quick access bar定位\n\t        if self.m_quickAccessBar and self.m_quickAccessBar.isVisible():\n\t            if self.m_quickAccessBar.height() != validTitleBarHeight:\n\t                self.m_quickAccessBar.setFixedHeight(int(validTitleBarHeight))\n\t            quickAccessBarSize = self.m_quickAccessBar.sizeHint()\n\t            self.m_quickAccessBar.setGeometry(x, y, quickAccessBarSize.width(), int(validTitleBarHeight))\n\t        # 第二行，开始布局applitionButton，tabbar，tabBarRightSizeButtonGroupWidget，TopRightCorner\n\t        x = border.left()\n\t        y += validTitleBarHeight\n\t        if self.m_applicationButton and self.m_applicationButton.isVisible():\n", "            self.m_applicationButton.setGeometry(x, int(y), self.m_applicationButton.size().width(), int(tabH))\n\t            x = self.m_applicationButton.geometry().right()\n\t        # top right是一定要配置的，对于多文档窗口，子窗口的缩放等按钮就是通过这个窗口实现\n\t        endX = self.width() - border.right()\n\t        connerR = self.cornerWidget(Qt.TopRightCorner)\n\t        if connerR and connerR.isVisible():\n\t            connerSize = connerR.sizeHint()\n\t            endX -= connerSize.width()\n\t            if connerSize.height() < tabH:\n\t                detal = (tabH - connerSize.height()) / 2\n", "                connerR.setGeometry(endX, y + detal, connerSize.width(), connerSize.height())\n\t            else:\n\t                connerR.setGeometry(endX, y, connerSize.width(), tabH)\n\t        # tabBar 右边的附加按钮组，这里一般会附加一些类似登录等按钮组\n\t        if self.m_rightButtonGroup and self.m_rightButtonGroup.isVisible():\n\t            wSize = self.m_rightButtonGroup.sizeHint()\n\t            endX -= wSize.width()\n\t            self.m_rightButtonGroup.setGeometry(endX, y, wSize.width(), tabH)\n\t        # 最后确定tabbar宽度\n\t        tabBarWidth = endX - x\n", "        self.m_tabBar.setGeometry(int(x), int(y), tabBarWidth, int(tabH))\n\t        # 调整整个stackWidget\n\t        self._resizeStackedWidget()\n\t    def _resizeInWpsLiteStyle(self):\n\t        self._updateRibbonElementGeometry()\n\t        border = self.contentsMargins()\n\t        x = border.left()\n\t        y = border.top()\n\t        validTitleBarHeight = self.titleBarHeight()\n\t        # 先布局右边内容\n", "        # cornerWidget - TopRightCorner\n\t        endX = self.width() - border.right() - self.m_windowButtonsSize.width()\n\t        connerR = self.cornerWidget(Qt.TopRightCorner)\n\t        if connerR and connerR.isVisible():\n\t            connerSize = connerR.sizeHint()\n\t            endX -= connerSize.width()\n\t            if connerSize.height() < validTitleBarHeight:\n\t                detal = (validTitleBarHeight - connerSize.height()) / 2\n\t                connerR.setGeometry(endX, y + detal, connerSize.width(), connerSize.height())\n\t            else:\n", "                connerR.setGeometry(endX, y, connerSize.width(), int(validTitleBarHeight))\n\t        # tabBar 右边的附加按钮组\n\t        if self.m_rightButtonGroup and self.m_rightButtonGroup.isVisible():\n\t            wSize = self.m_rightButtonGroup.sizeHint()\n\t            endX -= wSize.width()\n\t            self.m_rightButtonGroup.setGeometry(endX, y, wSize.width(), int(validTitleBarHeight))\n\t        # quick access bar定位\n\t        if self.m_quickAccessBar and self.m_quickAccessBar.isVisible():\n\t            quickAccessBarSize = self.m_quickAccessBar.sizeHint()\n\t            endX -= quickAccessBarSize.width()\n", "            self.m_quickAccessBar.setGeometry(endX, y, quickAccessBarSize.width(), int(validTitleBarHeight))\n\t        # cornerWidget - TopLeftCorner\n\t        connerL = self.cornerWidget(Qt.TopLeftCorner)\n\t        if connerR and connerL.isVisible():\n\t            connerSize = connerR.sizeHint()\n\t            endX -= connerSize.width()\n\t            if connerSize.height() < validTitleBarHeight:\n\t                detal = (validTitleBarHeight - connerSize.height()) / 2\n\t                connerL.setGeometry(endX, y + detal, connerSize.width(), connerSize.height())\n\t            else:\n", "                connerL.setGeometry(endX, y, connerSize.width(), int(validTitleBarHeight))\n\t        # tab 的y值需要重新计算\n\t        tabH = self.tabBarHeight()\n\t        if tabH > validTitleBarHeight:\n\t            tabH = validTitleBarHeight\n\t        y += validTitleBarHeight - tabH\n\t        if self.m_applicationButton and self.m_applicationButton.isVisible():\n\t            self.m_applicationButton.setGeometry(x, y, self.m_applicationButton.size().width(), tabH)\n\t            x = self.m_applicationButton.geometry().right() + 2\n\t        tabBarWidth = endX - x\n", "        mintabBarWidth = self._calcMinTabBarWidth()\n\t        if mintabBarWidth < tabBarWidth:\n\t            tabBarWidth = mintabBarWidth\n\t        self.m_tabBar.setGeometry(x, y, tabBarWidth, tabH)\n\t        # 调整整个stackWidget\n\t        self._resizeStackedWidget()\n\t    def _resizeStackedWidget(self):\n\t        border = self.contentsMargins()\n\t        if self.m_stack.isPopup():\n\t            absPosition = self.mapToGlobal(QPoint(border.left(), self.m_tabBar.geometry().bottom() + 1))\n", "            self.m_stack.setGeometry(\n\t                absPosition.x(), absPosition.y(),\n\t                self.width() - border.left() - border.right(),\n\t                self._mainBarHeight() - self.m_tabBar.geometry().bottom() - border.bottom() - 1\n\t            )\n\t        else:\n\t            self.m_stack.setGeometry(\n\t                border.left(), self.m_tabBar.geometry().bottom() + 1,\n\t                self.width() - border.left() - border.right(),\n\t                round(self._mainBarHeight() - self.m_tabBar.geometry().bottom() - border.bottom() - 1)\n", "            )\n\t    def _calcMinTabBarWidth(self) -> int:\n\t        m = self.m_tabBar.tabMargin()\n\t        mintabBarWidth = 0\n\t        for i in range(self.m_tabBar.count()):\n\t            mintabBarWidth += self.m_tabBar.tabRect(i).width()\n\t        mintabBarWidth += m.left() + m.right()\n\t        return round(mintabBarWidth)\n\t    def _ribbonBarHeight(self, style) -> int:\n\t        if style == RibbonBar.OfficeStyle:\n", "            return self.m_ribbonBarHeightOfficeStyleThreeRow\n\t        elif style == RibbonBar.WpsLiteStyle:\n\t            return self.m_ribbonBarHeightWpsLiteStyleThreeRow\n\t        elif style == RibbonBar.OfficeStyleTwoRow:\n\t            return self.m_ribbonBarHeightOfficeStyleTwoRow\n\t        elif style == RibbonBar.WpsLiteStyleTwoRow:\n\t            return self.m_ribbonBarHeightWpsLiteStyleTwoRow\n\t        else:\n\t            return self.m_ribbonBarHeightOfficeStyleThreeRow\n\t    def _mainBarHeight(self) -> int:\n", "        return round(self._ribbonBarHeight(self.currentRibbonStyle()))\n\t    def _tabIndex(self, page: RibbonPage) -> int:\n\t        c = self.m_tabBar.count()\n\t        for i in range(c):\n\t            var = self.m_tabBar.tabData(i)\n\t            if var.page == page:\n\t                return i\n\t        return -1\n\t    # RibbonStyle\n\t    OfficeStyle = 0x0000\n", "    WpsLiteStyle = 0x0001\n\t    OfficeStyleTwoRow = 0x0100 | OfficeStyle\n\t    WpsLiteStyleTwoRow = 0x0100 | WpsLiteStyle\n\t    # signals\n\t    minimizationChanged = pyqtSignal(bool)\n\t    applicationButtonClicked = pyqtSignal()\n\t    currentRibbonTabChanged = pyqtSignal(int)\n\t    ribbonStyleChanged = pyqtSignal(int)\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonControls.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import Union\n\tfrom PyQt5.QtCore import QSize, QPoint\n\tfrom PyQt5.QtGui import QPaintEvent, QPainter\n\tfrom PyQt5.QtWidgets import QWidget, QCheckBox, QComboBox, QToolButton, \\\n\t    QLineEdit, QMenu, QAction, QSizePolicy, QWidgetAction\n\tclass RibbonControl(QWidget):\n\t    def __init__(self, parent=None):\n", "        super().__init__(parent)\n\tclass RibbonCheckBox(QCheckBox):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\tclass RibbonComboBox(QComboBox):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\tclass RibbonControlButton(QToolButton):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n", "class RibbonLineEdit(QLineEdit):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\tclass RibbonMenu(QMenu):\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonMenu(parent=None)\n\t        RibbonMenu(title: str, parent=None)\n\t        \"\"\"\n\t        parent = None\n", "        arg_len = len(args)\n\t        if arg_len > 0 and isinstance(args[0], str):\n\t            title = args[0]\n\t            if arg_len > 1 and isinstance(args[1], QWidget):\n\t                parent = args[1]\n\t            super().__init__(title, parent)\n\t        else:\n\t            if arg_len > 0 and isinstance(args[0], QWidget):\n\t                parent = args[0]\n\t            super().__init__(parent)\n", "        self.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n\t    def addRibbonMenu(self, *args) -> Union[QAction, QMenu]:\n\t        \"\"\"\n\t        addRibbonMenu(menu: RibbonMenu) -> QAction\n\t        addRibbonMenu(title: str) -> RibbonMenu\n\t        addRibbonMenu(icon: QIcon, title: str) -> RibbonMenu\n\t        \"\"\"\n\t        arg_len = len(args)\n\t        if arg_len == 1 and isinstance(args[0], RibbonMenu):\n\t            return super().addMenu(args[0])\n", "        elif arg_len == 1 and isinstance(args[0], str):\n\t            menu = RibbonMenu(args[0], self)\n\t            super().addAction(menu.menuAction())\n\t            return menu\n\t        else:\n\t            assert arg_len == 2\n\t            menu = RibbonMenu(args[1], self)\n\t            menu.setIcon(args[0])\n\t            super().addAction(menu.menuAction())\n\t            return menu\n", "    def addWidget(self, w: QWidget) -> QAction:\n\t        action = QWidgetAction(self)\n\t        action.setDefaultWidget(w)\n\t        self.addAction(action)\n\t        return action\n\tclass RibbonSeparator(QWidget):\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonMenu(parent=None)\n\t        RibbonMenu(height: int, parent=None)\n", "        \"\"\"\n\t        self.m_topMargin = 4\n\t        self.m_bottomMargin = 4\n\t        parent = None\n\t        arg_len = len(args)\n\t        if arg_len > 0 and isinstance(args[0], int):\n\t            height = args[0]\n\t            if arg_len > 1 and isinstance(args[1], QWidget):\n\t                parent = args[1]\n\t            super().__init__(parent)\n", "            self.setFixedSize(6, height)\n\t        else:\n\t            if arg_len > 0 and isinstance(args[0], QWidget):\n\t                parent = args[0]\n\t            super().__init__(parent)\n\t            self.setSizePolicy(QSizePolicy.Fixed, QSizePolicy.Expanding)\n\t            self.setFixedWidth(6)\n\t    def sizeHint(self) -> QSize:\n\t        return QSize(6, self.height())\n\t    def setTopBottomMargins(self, top: int, bottom: int):\n", "        self.m_topMargin = top\n\t        self.m_bottomMargin = bottom\n\t    def paintEvent(self, event: QPaintEvent):\n\t        painter = QPainter(self)\n\t        painter.setPen(self.palette().window().color().darker(114))\n\t        x1 = self.rect().center().x()\n\t        painter.drawLine(QPoint(x1, self.rect().top() + self.m_topMargin),\n\t                         QPoint(x1, self.rect().bottom() - self.m_bottomMargin))\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonPage.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import List, Union\n\tfrom PyQt5.QtCore import QSize, Qt, QEvent, QObject, QRect, QMargins, QPoint, pyqtSignal, QVariant\n\tfrom PyQt5.QtGui import QBrush, QPalette, QWheelEvent, QResizeEvent, QColor\n\tfrom PyQt5.QtWidgets import QWidget, QToolButton\n\tfrom .QxRibbonGroup import RibbonGroup\n\tfrom .QxRibbonControls import RibbonSeparator\n\tclass RibbonPageItem:\n", "    def __init__(self):\n\t        self.m_group: RibbonGroup = None\n\t        self.m_separator: RibbonSeparator = None\n\t        self.m_groupWillGeometry = QRect()\n\t        self.m_separatorWillGeometry = QRect()\n\t    def isEmpty(self) -> bool:\n\t        if self.m_group:\n\t            return self.m_group.isHidden()\n\t        return True\n\t    def isNull(self) -> bool:\n", "        return self.m_group is None\n\tclass RibbonPageScrollButton(QToolButton):\n\t    def __init__(self, arr: int, parent=None):\n\t        super().__init__(parent)\n\t        self.setArrowType(arr)\n\tclass RibbonPage(QWidget):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_groupLayoutMode = RibbonGroup.ThreeRowMode\n\t        self.m_itemList: List[RibbonPageItem] = list()\n", "        self.m_sizeHint = QSize(50, 50)\n\t        self.m_contentsMargins = QMargins(1, 1, 1, 1)\n\t        self.m_totalWidth = 0\n\t        self.m_XBase = 0\n\t        self.m_isRightScrollBtnShow = False\n\t        self.m_isLeftScrollBtnShow = False\n\t        self.m_isPageContext = False\n\t        self.m_isCanCustomize = True\n\t        self.m_leftScrollBtn = RibbonPageScrollButton(Qt.LeftArrow, self)\n\t        self.m_rightScrollBtn = RibbonPageScrollButton(Qt.RightArrow, self)\n", "        self.m_leftScrollBtn.setVisible(False)\n\t        self.m_rightScrollBtn.setVisible(False)\n\t        self.m_leftScrollBtn.clicked.connect(self.onLeftScrollButtonClicked)\n\t        self.m_rightScrollBtn.clicked.connect(self.onRightScrollButtonClicked)\n\t        self.setAutoFillBackground(True)\n\t        self.setBackgroundBrush(Qt.white)\n\t    def pageName(self) -> str:\n\t        return self.windowTitle()\n\t    def setPageName(self, title: str):\n\t        self.setWindowTitle(title)\n", "    def groupLayoutMode(self) -> int:\n\t        return self.m_groupLayoutMode\n\t    def addGroup(self, *args) -> Union[None, RibbonGroup]:\n\t        \"\"\"\n\t        addGroup(title: str) -> RibbonGroup\n\t        addGroup(group: RibbonGroup) -> None\n\t        \"\"\"\n\t        if len(args) == 1:\n\t            if isinstance(args[0], str):\n\t                return self.insertGroup(len(self.m_itemList), args[0])\n", "            else:\n\t                return self._insertGroup(len(self.m_itemList), args[0])\n\t    def _insertGroup(self, index: int, group: RibbonGroup):\n\t        if group.parentWidget() != self:\n\t            group.setParent(self)\n\t        group.setGroupLayoutMode(self.m_groupLayoutMode)\n\t        group.installEventFilter(self)\n\t        index = max(0, index)\n\t        index = min(len(self.m_itemList), index)\n\t        item = RibbonPageItem()\n", "        item.m_group = group\n\t        item.m_separator = RibbonSeparator(self)\n\t        self.m_itemList.insert(index, item)\n\t        self.updateItemGeometry()\n\t        group.setVisible(True)\n\t    def insertGroup(self, index: int, title: str):\n\t        group = RibbonGroup(self)\n\t        group.setWindowTitle(title)\n\t        group.setObjectName(title)\n\t        self._insertGroup(index, group)\n", "        return group\n\t    def group(self, index: int) -> RibbonGroup:\n\t        return self.m_itemList[index].m_group\n\t    def groupByName(self, title: str) -> RibbonGroup:\n\t        for item in self.m_itemList:\n\t            if item.m_group:\n\t                if item.m_group.windowTitle() == title:\n\t                    return item.m_group\n\t        return None\n\t    def groupByObjectName(self, objname: str) -> RibbonGroup:\n", "        for item in self.m_itemList:\n\t            if item.m_group:\n\t                if item.m_group.objectName() == objname:\n\t                    return item.m_group\n\t        return None\n\t    def groupIndex(self, group: RibbonGroup) -> int:\n\t        for i, item in enumerate(self.m_itemList):\n\t            if item.m_group == group:\n\t                return i\n\t        return -1\n", "    def moveGroup(self, fr: int, to: int):\n\t        item = self.m_itemList.pop(fr)\n\t        self.m_itemList.insert(to, item)\n\t        self._updateItemGeometry()\n\t    def takeGroup(self, group: RibbonGroup) -> bool:\n\t        item = None\n\t        for i, item in enumerate(self.m_itemList):\n\t            if item.m_group == group:\n\t                item = self.m_itemList.pop(i)\n\t                break\n", "        if not item or item.isNull():\n\t            return False\n\t        if item.m_separator:\n\t            item.m_separator.hide()\n\t            item.m_separator.deleteLater()\n\t        return True\n\t    def removeGroup(self, *args) -> bool:\n\t        \"\"\"\n\t        removeGroup(group: RibbonGroup) -> bool\n\t        removeGroup(index: int) -> bool\n", "        \"\"\"\n\t        group = None\n\t        if len(args) == 1:\n\t            if isinstance(args[0], int):\n\t                group = self.group(args[0])\n\t            else:\n\t                group = args[0]\n\t        if not group:\n\t            return False\n\t        if self.takeGroup(group):\n", "            return True\n\t        return False\n\t    def groupCount(self) -> int:\n\t        return len(self.m_itemList)\n\t    def groupList(self) -> List[RibbonGroup]:\n\t        res = []\n\t        for item in self.m_itemList:\n\t            if not item.isNull():\n\t                res.append(item.m_group)\n\t        return res\n", "    def setBackgroundBrush(self, brush: QBrush):\n\t        palette = self.palette()\n\t        palette.setBrush(QPalette.Window, brush)\n\t        self.setPalette(palette)\n\t    def sizeHint(self) -> QSize:\n\t        return self.m_sizeHint\n\t    def isPageContext(self) -> bool:\n\t        return self.m_isPageContext\n\t    def isCanCustomize(self) -> bool:\n\t        return self.m_isCanCustomize\n", "    def setCanCustomize(self, b: bool):\n\t        self.m_isCanCustomize = b\n\t    def updateItemGeometry(self):\n\t        for group in self.groupList():\n\t            group.updateGeometry()\n\t        self._updateItemGeometry()\n\t    def setGroupLayoutMode(self, m: int):\n\t        if self.m_groupLayoutMode == m:\n\t            return\n\t        self.m_groupLayoutMode = m\n", "        for group in self.groupList():\n\t            group.setGroupLayoutMode(m)\n\t        self.updateItemGeometry()\n\t    def markIsPageContext(self, b: bool = True):\n\t        self.m_isPageContext = b\n\t    def event(self, event: QEvent) -> bool:\n\t        if event.type() == QEvent.LayoutRequest:\n\t            self._updateItemGeometry()\n\t        return super().event(event)\n\t    def resizeEvent(self, event: QResizeEvent):\n", "        super().resizeEvent(event)\n\t        self._updateItemGeometry()\n\t    def eventFilter(self, watched: QObject, event: QEvent) -> bool:\n\t        return False\n\t    def wheelEvent(self, event: QWheelEvent):\n\t        contentSize = self._pageContentSize()\n\t        totalWidth = self.m_totalWidth\n\t        if totalWidth > contentSize.width():\n\t            numPixels: QPoint = event.pixelDelta()\n\t            numDegrees: QPoint = event.angleDelta() / 8\n", "            scrollPix = 0\n\t            if not numPixels.isNull():\n\t                scrollPix = numPixels.x() / 4\n\t            elif not numDegrees.isNull():\n\t                scrollPix = numDegrees.x() / 15\n\t            if scrollPix > 0:\n\t                tmp = self.m_XBase - scrollPix\n\t                if tmp < (contentSize.width() - totalWidth):\n\t                    tmp = contentSize.width() - totalWidth\n\t                self.m_XBase = tmp\n", "            else:\n\t                tmp = self.m_XBase - scrollPix\n\t                if tmp > 0:\n\t                    tmp = 0\n\t                self.m_XBase = tmp\n\t            self._updateItemGeometry()\n\t        else:\n\t            event.ignore()\n\t            self.m_XBase = 0\n\t    def onLeftScrollButtonClicked(self):\n", "        width = self._pageContentSize().width()\n\t        if self.m_totalWidth > width:\n\t            tmp = self.m_XBase + width\n\t            if tmp > 0:\n\t                tmp = 0\n\t            self.m_XBase = tmp\n\t        else:\n\t            self.m_XBase = 0\n\t        self._updateItemGeometry()\n\t    def onRightScrollButtonClicked(self):\n", "        width = self._pageContentSize().width()\n\t        totalWidth = self.m_totalWidth\n\t        if totalWidth > width:\n\t            tmp = self.m_XBase - width\n\t            if tmp < (width - totalWidth):\n\t                tmp = width - totalWidth\n\t            self.m_XBase = tmp\n\t        else:\n\t            self.m_XBase = 0\n\t        self._updateItemGeometry()\n", "    def _updateItemGeometry(self):\n\t        contentSize = self._pageContentSize()\n\t        y = 0\n\t        if not self.m_contentsMargins.isNull():\n\t            y = self.m_contentsMargins.top()\n\t        total = self._totalSizeHintWidth()\n\t        canExpandingCount = expandWidth = 0\n\t        if total <= contentSize.width():\n\t            self.m_XBase = 0\n\t            for item in self.m_itemList:\n", "                if not item.isEmpty():\n\t                    if item.m_group.isExpanding():\n\t                        canExpandingCount += 1\n\t            if canExpandingCount > 0:\n\t                expandWidth = round((contentSize.width() - total) / canExpandingCount)\n\t            else:\n\t                expandWidth = 0\n\t        total = 0\n\t        x = self.m_XBase\n\t        for item in self.m_itemList:\n", "            if item.isEmpty():\n\t                if item.m_separator:\n\t                    item.m_separator.hide()\n\t                item.m_groupWillGeometry = QRect(0, 0, 0, 0)\n\t                item.m_separatorWillGeometry = QRect(0, 0, 0, 0)\n\t                continue\n\t            group = item.m_group\n\t            if not group:\n\t                print(\"unknow widget in RibbonPageLayout\")\n\t                continue\n", "            groupSize = group.sizeHint()\n\t            separatorSize = QSize(0, 0)\n\t            if item.m_separator:\n\t                separatorSize = item.m_separator.sizeHint()\n\t            if group.isExpanding():\n\t                groupSize.setWidth(groupSize.width() + expandWidth)\n\t            w = groupSize.width()\n\t            item.m_groupWillGeometry = QRect(x, y, w, contentSize.height())\n\t            x += w\n\t            total += w\n", "            w = separatorSize.width()\n\t            item.m_separatorWillGeometry = QRect(x, y, w, contentSize.height())\n\t            x += w\n\t            total += w\n\t        self.m_totalWidth = total\n\t        if total > contentSize.width():\n\t            if self.m_XBase == 0:\n\t                self.m_isRightScrollBtnShow = True\n\t                self.m_isLeftScrollBtnShow = False\n\t            elif self.m_XBase <= (contentSize.width() - total):\n", "                self.m_isRightScrollBtnShow = False\n\t                self.m_isLeftScrollBtnShow = True\n\t            else:\n\t                self.m_isRightScrollBtnShow = True\n\t                self.m_isLeftScrollBtnShow = True\n\t        else:\n\t            self.m_isRightScrollBtnShow = False\n\t            self.m_isLeftScrollBtnShow = False\n\t        parent = self.parentWidget()\n\t        parentHeight = parent.height() if parent else contentSize.height()\n", "        parentWidth = parent.width() if parent else total\n\t        self.m_sizeHint = QSize(parentWidth, parentHeight)\n\t        self._doItemLayout()\n\t    def _doItemLayout(self):\n\t        self.m_leftScrollBtn.setGeometry(0, 0, 12, self.height())\n\t        self.m_rightScrollBtn.setGeometry(self.width() - 12, 0, 12, self.height())\n\t        showWidgets = []\n\t        hideWidgets = []\n\t        for item in self.m_itemList:\n\t            if item.isNull():\n", "                continue\n\t            if item.isEmpty():\n\t                hideWidgets.append(item.m_group)\n\t                if item.m_separator:\n\t                    hideWidgets.append(item.m_separator)\n\t            else:\n\t                item.m_group.setGeometry(item.m_groupWillGeometry)\n\t                showWidgets.append(item.m_group)\n\t                if item.m_separator:\n\t                    item.m_separator.setGeometry(item.m_separatorWillGeometry)\n", "                    showWidgets.append(item.m_separator)\n\t        self.m_rightScrollBtn.setVisible(self.m_isRightScrollBtnShow)\n\t        self.m_leftScrollBtn.setVisible(self.m_isLeftScrollBtnShow)\n\t        if self.m_isRightScrollBtnShow:\n\t            self.m_rightScrollBtn.raise_()\n\t        if self.m_isLeftScrollBtnShow:\n\t            self.m_leftScrollBtn.raise_()\n\t        for w in showWidgets:\n\t            w.show()\n\t        for w in hideWidgets:\n", "            w.hide()\n\t    def _pageContentSize(self) -> QSize:\n\t        s = self.size()\n\t        m = self.m_contentsMargins\n\t        if not m.isNull():\n\t            s.setHeight(s.height() - m.top() - m.bottom())\n\t            s.setWidth(s.width() - m.right() - m.left())\n\t        return s\n\t    def _totalSizeHintWidth(self) -> int:\n\t        total = 0\n", "        m = self.m_contentsMargins\n\t        if not m.isNull():\n\t            total += m.left() + m.right()\n\t        for item in self.m_itemList:\n\t            if item.isEmpty():\n\t                continue\n\t            groupSize = item.m_group.sizeHint()\n\t            separatorSize = QSize(0, 0)\n\t            if item.m_separator:\n\t                separatorSize = item.m_separator.sizeHint()\n", "            total += groupSize.width() + separatorSize.width()\n\t        return total\n\tclass RibbonPageContext(QObject):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_pageList: List[RibbonPage] = list()\n\t        self.m_contextID: QVariant = QVariant()\n\t        self.m_contextColor: QColor = QColor()\n\t        self.m_contextTitle: str = \"\"\n\t    def addPage(self, title: str) -> RibbonPage:\n", "        page = RibbonPage(self.parentWidget())\n\t        page.markIsPageContext(True)\n\t        page.setWindowTitle(title)\n\t        page.installEventFilter(self)\n\t        self.m_pageList.append(page)\n\t        self.pageAdded.emit(page)\n\t        return page\n\t    def page(self, index: int) -> RibbonPage:\n\t        if index < 0 or index >= len(self.m_pageList):\n\t            return None\n", "        return self.m_pageList[index]\n\t    def pageCount(self) -> int:\n\t        return len(self.m_pageList)\n\t    def pageList(self) -> List[RibbonPage]:\n\t        return self.m_pageList\n\t    def takePage(self, page: RibbonPage) -> bool:\n\t        for i, v in enumerate(self.m_pageList):\n\t            if v == page:\n\t                self.m_pageList.pop(i)\n\t                return True\n", "        return False\n\t    def getId(self) -> QVariant:\n\t        return self.m_contextID\n\t    def setId(self, i: QVariant):\n\t        self.m_contextID = i\n\t    def contextColor(self) -> QColor:\n\t        return self.m_contextColor\n\t    def setContextColor(self, color: QColor):\n\t        self.m_contextColor = color\n\t    def contextTitle(self) -> str:\n", "        return self.m_contextTitle\n\t    def setContextTitle(self, title: str):\n\t        self.m_contextTitle = title\n\t    def eventFilter(self, watched: QObject, event: QEvent) -> bool:\n\t        if not watched:\n\t            return False\n\t        if event.type() == QEvent.Close:\n\t            if isinstance(watched, RibbonPage):\n\t                page: RibbonPage = watched\n\t                self.takePage(page)\n", "        return False\n\t    def parentWidget(self) -> QWidget:\n\t        w: QWidget = self.parent()\n\t        return w\n\t    # signals\n\t    pageAdded = pyqtSignal(RibbonPage)\n\t    pageRemoved = pyqtSignal(RibbonPage)\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonGroup.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import List, Union, Tuple\n\tfrom PyQt5.QtCore import QSize, Qt, QEvent, pyqtSignal, QRect, QMargins\n\tfrom PyQt5.QtGui import QIcon, QPaintEvent, QResizeEvent, QActionEvent, QPainter\n\tfrom PyQt5.QtWidgets import QWidget, QMenu, QAction, QToolButton, \\\n\t    QWidgetAction, QLayoutItem, QSizePolicy, QApplication, QLayout, QWidgetItem\n\tfrom .QxRibbonControls import RibbonSeparator\n\tfrom .QxRibbonButton import RibbonButton\n", "from .QxRibbonGallery import RibbonGallery\n\tfrom . import QxRibbonRes_rc\n\tQX_RIBBON_PROP_ROW_PROPORTION = \"_qx_RibbonGroupRowProportion\"\n\tclass RibbonGroupOptionButton(QToolButton):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.setAutoRaise(True)\n\t        self.setCheckable(False)\n\t        self.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t        self.setFixedSize(16, 16)\n", "        self.setIconSize(QSize(10, 10))\n\t        self.setIcon(QIcon(\":/image/res/ribbonGroupOptionButton.png\"))\n\t    def connectAction(self, action: QAction):\n\t        self.clicked.connect(action.trigger)\n\tclass RibbonGroup(QWidget):\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonGroup(parent=None)\n\t        RibbonGroup(name: str, parent=None)\n\t        \"\"\"\n", "        parent = None\n\t        name = \"\"\n\t        arg_len = len(args)\n\t        if arg_len >= 1:\n\t            if isinstance(args[0], str):\n\t                name = args[0]\n\t                parent = args[1] if arg_len == 2 else None\n\t            else:\n\t                parent = args[0]\n\t        super().__init__(parent)\n", "        self.m_optionActionButton: RibbonGroupOptionButton = None\n\t        self.m_groupLayoutMode = RibbonGroup.ThreeRowMode\n\t        self.m_isCanCustomize = True\n\t        self.m_layout = RibbonGroupLayout(self)\n\t        self.m_layout.setSpacing(2)\n\t        self.m_layout.setContentsMargins(2, 2, 2, 2)\n\t        self.setGroupLayoutMode(RibbonGroup.ThreeRowMode)\n\t        if name:\n\t            self.setGroupName(name)\n\t    def groupName(self) -> str:\n", "        return self.windowTitle()\n\t    def setGroupName(self, title: str):\n\t        self.setWindowTitle(title)\n\t        self.update()\n\t    @staticmethod\n\t    def getActionRowProportionProperty(action: QAction):\n\t        return int(action.property(QX_RIBBON_PROP_ROW_PROPORTION))\n\t    @staticmethod\n\t    def setActionRowProportionProperty(action: QAction, rp: int):\n\t        action.setProperty(QX_RIBBON_PROP_ROW_PROPORTION, int(rp))\n", "    def setActionRowProportion(self, action: QAction, rp: int):\n\t        RibbonGroup.setActionRowProportionProperty(action, rp)\n\t        item = self.m_layout.groupItem(action)\n\t        if item:\n\t            item.rowProportion = rp\n\t            self.m_layout.invalidate()\n\t    def addAction(self, *args) -> Union[RibbonButton, None, QAction]:\n\t        \"\"\"\n\t        addAction(action: QAction, rowProportion: int) -> RibbonButton\n\t        addAction(action: QAction, popMode: int, rowProportion: int) -> None\n", "        addAction(text: str, icon: QIcon, popMode: int, rowProportion=RibbonGroup.Large) -> QAction\n\t        \"\"\"\n\t        arg_len = len(args)\n\t        if arg_len == 2:\n\t            action: QAction = args[0]\n\t            RibbonGroup.setActionRowProportionProperty(action, args[1])\n\t            super().addAction(action)\n\t            return self._lastAddedButton()\n\t        elif arg_len >= 3:\n\t            if isinstance(args[0], QAction):\n", "                action: QAction = args[0]\n\t                popMode = args[1]\n\t                rp = args[2]\n\t                RibbonGroup.setActionRowProportionProperty(action, rp)\n\t                super().addAction(action)\n\t                btn: RibbonButton = self._lastAddedButton()\n\t                if btn:\n\t                    btn.setPopupMode(popMode)\n\t                return None\n\t            else:\n", "                text: str = args[0]\n\t                icon: QIcon = args[1]\n\t                popMode: int = args[2]\n\t                rp = args[3] if arg_len == 4 else RibbonGroup.Large\n\t                action = QAction(icon, text, self)\n\t                self.addAction(action, popMode, rp)\n\t                return action\n\t    def addLargeAction(self, action: QAction) -> RibbonButton:\n\t        return self.addAction(action, RibbonGroup.Large)\n\t    def addMediumAction(self, action: QAction) -> RibbonButton:\n", "        return self.addAction(action, RibbonGroup.Medium)\n\t    def addSmallAction(self, action: QAction) -> RibbonButton:\n\t        return self.addAction(action, RibbonGroup.Small)\n\t    def addMenu(self, menu: QMenu, rp: int, pop_mode=QToolButton.InstantPopup) -> RibbonButton:\n\t        action: QAction = menu.menuAction()\n\t        self.addAction(action, rp)\n\t        btn: RibbonButton = self._lastAddedButton()\n\t        if btn:\n\t            btn.setPopupMode(pop_mode)\n\t        return btn\n", "    def addLargeMenu(self, menu: QMenu, pop_mode=QToolButton.InstantPopup) -> RibbonButton:\n\t        return self.addMenu(menu, RibbonGroup.Large, pop_mode)\n\t    def addSmallMenu(self, menu: QMenu, pop_mode=QToolButton.InstantPopup) -> RibbonButton:\n\t        return self.addMenu(menu, RibbonGroup.Small, pop_mode)\n\t    def addActionMenu(self, action: QAction, menu: QMenu, rp: int) -> RibbonButton:\n\t        btn: RibbonButton = self.addAction(action, rp)\n\t        if not btn:\n\t            return None\n\t        btn.setMenu(menu)\n\t        btn.setPopupMode(QToolButton.MenuButtonPopup)\n", "        return btn\n\t    def addLargeActionMenu(self, action: QAction, menu: QMenu) -> RibbonButton:\n\t        return self.addActionMenu(action, menu, RibbonGroup.Large)\n\t    def addWidget(self, w: QWidget, rp: int) -> QAction:\n\t        # FIXME: using QWidgetAction will cause defaultWidget to be deleted by python gc\n\t        action = QWidgetAction(self)\n\t        action.setDefaultWidget(w)\n\t        w.setAttribute(Qt.WA_Hover)\n\t        RibbonGroup.setActionRowProportionProperty(action, rp)\n\t        super().addAction(action)\n", "        return action\n\t    def addLargeWidget(self, w: QWidget) -> QAction:\n\t        return self.addWidget(w, RibbonGroup.Large)\n\t    def addMediumWidget(self, w: QWidget) -> QAction:\n\t        return self.addWidget(w, RibbonGroup.Medium)\n\t    def addSmallWidget(self, w: QWidget) -> QAction:\n\t        return self.addWidget(w, RibbonGroup.Small)\n\t    def addGallery(self) -> RibbonGallery:\n\t        gallery = RibbonGallery(self)\n\t        self.addWidget(gallery, RibbonGroup.Large)\n", "        self.setExpanding()\n\t        return gallery\n\t    def addSeparator(self, top: int = 6, bottom: int = 6) -> QAction:\n\t        action = QAction(self)\n\t        action.setSeparator(True)\n\t        RibbonGroup.setActionRowProportionProperty(action, RibbonGroup.Large)\n\t        super().addAction(action)\n\t        w = self.m_layout.lastWidget()\n\t        if isinstance(w, RibbonSeparator):\n\t            sep: RibbonSeparator = w\n", "            sep.setTopBottomMargins(top, bottom)\n\t        return action\n\t    def ribbonButtonForAction(self, action: QAction) -> RibbonButton:\n\t        layout = self.layout()\n\t        if isinstance(layout, RibbonGroupLayout):\n\t            lay: RibbonGroupLayout = layout\n\t            index = lay.indexOf(action)\n\t            if index == -1:\n\t                return None\n\t            item: QLayoutItem = lay.takeAt(index)\n", "            w = item.widget() if item else None\n\t            if w and isinstance(w, RibbonButton):\n\t                return w\n\t        return None\n\t    def ribbonButtons(self) -> List[RibbonButton]:\n\t        res = []\n\t        for o in self.children():\n\t            if isinstance(o, RibbonButton):\n\t                res.append(o)\n\t        return res\n", "    def hasOptionAction(self) -> bool:\n\t        return self.m_optionActionButton is not None\n\t    def addOptionAction(self, action: QAction):\n\t        if not action:\n\t            if self.m_optionActionButton:\n\t                self.m_optionActionButton = None\n\t            return\n\t        if not self.m_optionActionButton:\n\t            self.m_optionActionButton = RibbonGroupOptionButton(self)\n\t        self.m_optionActionButton.setFixedSize(self.optionActionButtonSize())\n", "        self.m_optionActionButton.setIconSize(self.optionActionButtonSize() - QSize(-2, -2))\n\t        self.m_optionActionButton.connectAction(action)\n\t        self.updateGeometry()\n\t        self.repaint()\n\t    def actionIndex(self, action: QAction) -> int:\n\t        return self.m_layout.indexOf(action)\n\t    def moveAction(self, fr: int, to: int):\n\t        self.m_layout.move(fr, to)\n\t        self.updateGeometry()\n\t    def groupLayoutMode(self) -> int:\n", "        return self.m_groupLayoutMode\n\t    def isTwoRow(self) -> bool:\n\t        return self.m_groupLayoutMode == RibbonGroup.TwoRowMode\n\t    def optionActionButtonSize(self) -> QSize:\n\t        return QSize(12, 12) if self.isTwoRow() else QSize(16, 16)\n\t    def sizeHint(self) -> QSize:\n\t        s = self.layout().sizeHint()\n\t        maxWidth = s.width() + 2\n\t        if self.groupLayoutMode() == RibbonGroup.ThreeRowMode:\n\t            fm = self.fontMetrics()\n", "            titleSize = fm.size(Qt.TextShowMnemonic, self.windowTitle())\n\t            if self.m_optionActionButton:\n\t                titleSize.setWidth(titleSize.width() + self.m_optionActionButton.width() + 4)\n\t            maxWidth = max(maxWidth, titleSize.width())\n\t        return QSize(maxWidth, s.height())\n\t    def minimumSizeHint(self) -> QSize:\n\t        return self.layout().minimumSize()\n\t    def isExpanding(self) -> bool:\n\t        sp = self.sizePolicy()\n\t        return sp.horizontalPolicy() == QSizePolicy.Expanding\n", "    def setExpanding(self, expanding: bool = True):\n\t        self.setSizePolicy(QSizePolicy.Expanding if expanding else QSizePolicy.Preferred,\n\t                           QSizePolicy.Fixed)\n\t    def isCanCustomize(self) -> bool:\n\t        return self.m_isCanCustomize\n\t    def setCanCustomize(self, b: bool):\n\t        self.m_isCanCustomize = b\n\t    def largeHeight(self) -> int:\n\t        return RibbonGroupLayout.calcLargeHeight(self.rect(), self)\n\t    def titleHeight(self) -> int:\n", "        return 0 if self.isTwoRow() else self.groupTitleHeight()\n\t    @staticmethod\n\t    def groupTitleHeight() -> int:\n\t        return RibbonGroup.s_groupTitleHeight\n\t    @staticmethod\n\t    def setGroupTitleHeight(h: int):\n\t        RibbonGroup.s_groupTitleHeight = h\n\t    def setGroupLayoutMode(self, mode: int):\n\t        if self.m_groupLayoutMode == mode:\n\t            return\n", "        self.m_groupLayoutMode = mode\n\t        self.layout().setSpacing(4 if mode == RibbonGroup.TwoRowMode else 2)\n\t        self.updateGeometry()\n\t        self._resetLargeToolButtonStyle()\n\t    def paintEvent(self, event: QPaintEvent):\n\t        p = QPainter(self)\n\t        if self.groupLayoutMode() == RibbonGroup.ThreeRowMode:\n\t            th = self.titleHeight()\n\t            f = self.font()\n\t            f.setPixelSize(round(th * 0.6))\n", "            p.setFont(f)\n\t            if self.m_optionActionButton:\n\t                p.drawText(1, self.height() - th, self.width() - self.m_optionActionButton.width() - 4,\n\t                           th, Qt.AlignCenter, self.windowTitle())\n\t            else:\n\t                p.drawText(1, self.height() - th, self.width(), th, Qt.AlignCenter, self.windowTitle())\n\t        super().paintEvent(event)\n\t    def resizeEvent(self, event: QResizeEvent):\n\t        if self.m_optionActionButton:\n\t            if self.groupLayoutMode() == RibbonGroup.ThreeRowMode:\n", "                self.m_optionActionButton.move(self.width() - self.m_optionActionButton.width() - 2,\n\t                                               self.height() - self.titleHeight() +\n\t                                               int((self.titleHeight() - self.m_optionActionButton.height()) / 2))\n\t            else:\n\t                self.m_optionActionButton.move(self.width() - self.m_optionActionButton.width(),\n\t                                               self.height() - self.m_optionActionButton.height())\n\t        return super().resizeEvent(event)\n\t    def actionEvent(self, event: QActionEvent):\n\t        action = event.action()\n\t        if event.type() == QEvent.ActionAdded:\n", "            if isinstance(action, QWidgetAction):\n\t                widgetAction: QWidgetAction = action\n\t                if widgetAction.parent() != self:\n\t                    widgetAction.setParent(self)\n\t            index = self.layout().count()\n\t            if event.before():\n\t                index = self.m_layout.indexOf(action)\n\t                if index == -1:\n\t                    index = self.layout().count()\n\t            self.m_layout.insertAction(index, action, RibbonGroup.getActionRowProportionProperty(action))\n", "            if self.parentWidget():\n\t                QApplication.postEvent(self.parentWidget(), QEvent(QEvent.LayoutRequest))\n\t        elif event.type() == QEvent.ActionChanged:\n\t            self.layout().invalidate()\n\t            if self.parentWidget():\n\t                QApplication.postEvent(self.parentWidget(), QEvent(QEvent.LayoutRequest))\n\t        elif event.type() == QEvent.ActionRemoved:\n\t            action.disconnect(self)\n\t            index = self.m_layout.indexOf(action)\n\t            if index != -1:\n", "                self.m_layout.takeAt(index)\n\t            if self.parentWidget():\n\t                QApplication.postEvent(self.parentWidget(), QEvent(QEvent.LayoutRequest))\n\t    def _lastAddedButton(self) -> RibbonButton:\n\t        w = self.m_layout.lastWidget()\n\t        return w if isinstance(w, RibbonButton) else None\n\t    def _resetLargeToolButtonStyle(self):\n\t        for b in self.ribbonButtons():\n\t            if not b or b.buttonType() != RibbonButton.LargeButton:\n\t                continue\n", "            if self.m_groupLayoutMode == RibbonGroup.ThreeRowMode:\n\t                if b.largeButtonType() != RibbonButton.Normal:\n\t                    b.setLargeButtonType(RibbonButton.Normal)\n\t            else:\n\t                if b.largeButtonType() != RibbonButton.Lite:\n\t                    b.setLargeButtonType(RibbonButton.Lite)\n\t    # GroupLayoutMode\n\t    ThreeRowMode = 0\n\t    TwoRowMode = 1\n\t    # RowProportion\n", "    Auto = 0\n\t    Large = 1\n\t    Medium = 2\n\t    Small = 3\n\t    actionTriggered = pyqtSignal(QAction)\n\t    s_groupTitleHeight = 21\n\tclass RibbonGroupItem(QWidgetItem):\n\t    def __init__(self, parent):\n\t        super().__init__(parent)\n\t        self.action: QAction = None\n", "        self.customWidget = False\n\t        self.rowIndex = 0\n\t        self.columnIndex = 0\n\t        self.willGeometry = QRect()\n\t        self.rowProportion = RibbonGroup.ThreeRowMode\n\t    def isEmpty(self) -> bool:\n\t        return self.action is None or not self.action.isVisible()\n\tclass RibbonGroupLayout(QLayout):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n", "        self.m_items: List[RibbonGroupItem] = list()\n\t        self.m_sizeHint = QSize(0, 0)\n\t        self.m_columnCount = 0\n\t        self.m_largeHeight = 0\n\t        self.m_expandFlag = False\n\t        self.m_dirty = True\n\t        self.setSpacing(1)\n\t    def indexOf(self, action: QAction) -> int:\n\t        for i, item in enumerate(self.m_items):\n\t            if item.action == action:\n", "                return i\n\t        return -1\n\t    def addItem(self, item: QLayoutItem):\n\t        print(\"Warning: RibbonGroupLayout::addItem(): please use addAction() instead\");\n\t    def insertAction(self, index: int, act: QAction, rp=RibbonGroup.Auto):\n\t        index = max(0, index)\n\t        index = min(len(self.m_items), index)\n\t        item = self._createItem(act, rp)\n\t        if item:\n\t            self.m_items.insert(index, item)\n", "            self.invalidate()\n\t    def itemAt(self, index: int) -> QLayoutItem:\n\t        if index < 0 or index >= len(self.m_items):\n\t            return None\n\t        return self.m_items[index]\n\t    def takeAt(self, index: int) -> QLayoutItem:\n\t        item: RibbonGroupItem = self.m_items.pop(index)\n\t        if not item:\n\t            return None\n\t        widgetAction: QWidgetAction = item.action\n", "        if widgetAction and isinstance(widgetAction, QWidgetAction) and item.customWidget:\n\t            widgetAction.releaseWidget(item.widget())\n\t        else:\n\t            item.widget().hide()\n\t            item.widget().deleteLater()\n\t        self.invalidate()\n\t        return item\n\t    def count(self) -> int:\n\t        return len(self.m_items)\n\t    def isEmpty(self) -> bool:\n", "        return self.count() == 0\n\t    def invalidate(self):\n\t        self.m_dirty = True\n\t        super().invalidate()\n\t    def expandingDirections(self) -> int:\n\t        return Qt.Horizontal\n\t    def setGeometry(self, rect: QRect):\n\t        self.m_dirty = False\n\t        self._updateGeomArray(rect)\n\t        super().setGeometry(rect)\n", "        self._layoutActions()\n\t    def minimumSize(self) -> QSize:\n\t        return self.m_sizeHint\n\t    def sizeHint(self) -> QSize:\n\t        return self.m_sizeHint\n\t    def groupItem(self, action: QAction) -> RibbonGroupItem:\n\t        index = self.indexOf(action)\n\t        if index >= 0:\n\t            return self.m_items[index]\n\t        return None\n", "    def lastItem(self) -> RibbonGroupItem:\n\t        if self.isEmpty():\n\t            return None\n\t        return self.m_items[-1]\n\t    def lastWidget(self) -> QWidget:\n\t        item: RibbonGroupItem = self.lastItem()\n\t        if item:\n\t            return item.widget()\n\t        return None\n\t    def move(self, fr: int, to: int):\n", "        pass\n\t    def isDirty(self) -> bool:\n\t        return self.m_dirty\n\t    @staticmethod\n\t    def calcLargeHeight(rect: QRect, group: RibbonGroup) -> int:\n\t        m: QMargins = RibbonGroupLayout.groupContentsMargins()\n\t        return int(rect.height() - m.top() - m.bottom() - group.titleHeight())\n\t    @staticmethod\n\t    def groupContentsMargins() -> QMargins:\n\t        return RibbonGroupLayout.s_contentsMargins\n", "    @staticmethod\n\t    def setGroupContentsMargins(m: QMargins):\n\t        RibbonGroupLayout.s_contentsMargins = m\n\t    def ribbonGroupItems(self) -> List[RibbonGroupItem]:\n\t        return self.m_items\n\t    def _createItem(self, action: QAction, rp) -> RibbonGroupItem:\n\t        customWidget = False\n\t        widget = None\n\t        group: RibbonGroup = self.parentWidget()\n\t        if not group or not isinstance(group, RibbonGroup):\n", "            return None\n\t        if isinstance(action, QWidgetAction):\n\t            widgetAction: QWidgetAction = action\n\t            # widget = widgetAction.requestWidget(group)\n\t            widget = widgetAction.defaultWidget()\n\t            if widget:\n\t                widget.setParent(group)\n\t                widget.setAttribute(Qt.WA_LayoutUsesWidgetRect)\n\t                customWidget = True\n\t        elif action.isSeparator():\n", "            sep = RibbonSeparator(group)\n\t            widget = sep\n\t        if not widget:\n\t            buttonType = RibbonButton.LargeButton if rp == RibbonGroup.Large else RibbonButton.SmallButton\n\t            button = RibbonButton(group)\n\t            button.setAutoRaise(True)\n\t            button.setFocusPolicy(Qt.NoFocus)\n\t            button.setButtonType(buttonType)\n\t            if RibbonButton.LargeButton == buttonType:\n\t                button.setLargeButtonType(RibbonButton.Lite if group.isTwoRow() else RibbonButton.Normal)\n", "            button.setDefaultAction(action)\n\t            button.triggered.connect(group.actionTriggered)\n\t            widget = button\n\t        widget.hide()\n\t        result = RibbonGroupItem(widget)\n\t        result.rowProportion = rp\n\t        result.customWidget = customWidget\n\t        result.action = action\n\t        return result\n\t    def _columnWidthInfo(self, col_index: int) -> Tuple[int, int]:\n", "        width = -1\n\t        maximum = -1\n\t        for item in self.m_items:\n\t            if not item.isEmpty() and item.columnIndex == col_index:\n\t                width = max(width, item.willGeometry.width())\n\t                maximum = max(maximum, item.widget().maximumWidth())\n\t        return width, maximum\n\t    def _recalcExpandGeomArray(self, rect: QRect):\n\t        expandWidth = rect.width() - self.m_sizeHint.width()\n\t        if expandWidth <= 0:\n", "            return\n\t        class _ColumnExpandInfo:\n\t            def __init__(self):\n\t                self.oldColumnWidth: int = 0\n\t                self.columnMaximumWidth: int = -1\n\t                self.columnExpandedWidth: int = 0\n\t                self.expandItems: List[RibbonGroupItem] = list()\n\t        columnExpandInfo: dict = {}\n\t        for item in self.m_items:\n\t            if not item.isEmpty() and item.expandingDirections() & Qt.Horizontal:\n", "                columnExpandInfo.setdefault(item.columnIndex, _ColumnExpandInfo())\n\t                columnExpandInfo[item.columnIndex].expandItems.append(item)\n\t        if len(columnExpandInfo) <= 0:\n\t            return\n\t        oneColCanexpandWidth = expandWidth / len(columnExpandInfo)\n\t        for k, v in columnExpandInfo.items():\n\t            oldColumnWidth, columnMaximumWidth = self._columnWidthInfo(k)\n\t            columnExpandInfo[k].oldColumnWidth = oldColumnWidth\n\t            columnExpandInfo[k].columnMaximumWidth = columnMaximumWidth\n\t            if oldColumnWidth <= 0 or oldColumnWidth > columnMaximumWidth:\n", "                columnExpandInfo.pop(k)\n\t                continue\n\t            colWidth = oneColCanexpandWidth + oldColumnWidth\n\t            if colWidth >= columnMaximumWidth:\n\t                columnExpandInfo[k].columnExpandedWidth = round(columnMaximumWidth)\n\t            else:\n\t                columnExpandInfo[k].columnExpandedWidth = round(colWidth)\n\t        for k, v in columnExpandInfo.items():\n\t            moveXLen = v.columnExpandedWidth - v.oldColumnWidth\n\t            for item in self.m_items:\n", "                if item.isEmpty() or item.columnIndex < k:\n\t                    continue\n\t                if item.columnIndex == k:\n\t                    if item in v.expandItems:\n\t                        item.willGeometry.setWidth(v.columnExpandedWidth)\n\t                    else:\n\t                        continue\n\t                else:\n\t                    item.willGeometry.moveLeft(item.willGeometry.x() + moveXLen)\n\t    def _updateGeomArray(self, rect: QRect):\n", "        group: RibbonGroup = self.parentWidget()\n\t        if not group or not isinstance(group, RibbonGroup):\n\t            return\n\t        height = rect.height()\n\t        m: QMargins = RibbonGroupLayout.groupContentsMargins()\n\t        spacing = self.spacing()\n\t        x = m.left()\n\t        rowCount = 3 if group.groupLayoutMode() == RibbonGroup.ThreeRowMode else 2\n\t        largeHeight = RibbonGroupLayout.calcLargeHeight(rect, group)\n\t        self.m_largeHeight = largeHeight\n", "        smallHeight = round((largeHeight - (rowCount - 1) * spacing) / rowCount)\n\t        yMediumRow0 = m.top() if rowCount == 2 else round(m.top() + ((largeHeight - 2 * smallHeight) / 3))\n\t        yMediumRow1 = round(m.top() + smallHeight + spacing) if rowCount == 2 else \\\n\t            round(m.top() + ((largeHeight - 2 * smallHeight) / 3) * 2 + smallHeight)\n\t        ySmallRow0 = m.top()\n\t        ySmallRow1 = round(m.top() + smallHeight + spacing)\n\t        ySmallRow2 = round(m.top() + 2 * (smallHeight + spacing))\n\t        row = column = columnMaxWidth = totalWidth = 0\n\t        thisColumnRP0 = RibbonGroup.Auto\n\t        lastGeomItem: RibbonGroupItem = None\n", "        for i, item in enumerate(self.m_items):\n\t            if item.isEmpty():\n\t                item.rowIndex = -1\n\t                item.columnIndex = -1\n\t                continue\n\t            hint = item.sizeHint()\n\t            exp = item.expandingDirections()\n\t            if item.widget():\n\t                if item.widget().sizePolicy().horizontalPolicy() & QSizePolicy.ExpandFlag:\n\t                    self.m_expandFlag = True\n", "            rp = item.rowProportion\n\t            if rp == RibbonGroup.Auto:\n\t                if exp & Qt.Vertical:\n\t                    rp = RibbonGroup.Large\n\t                else:\n\t                    rp = RibbonGroup.Small\n\t            if rp == RibbonGroup.Large:\n\t                if row != 0:\n\t                    x += columnMaxWidth + spacing\n\t                    column += 1\n", "                item.rowIndex = 0\n\t                item.columnIndex = column\n\t                item.willGeometry = QRect(x, m.top(), hint.width(), largeHeight)\n\t                columnMaxWidth = hint.width()\n\t                x += columnMaxWidth + spacing\n\t                row = 0\n\t                columnMaxWidth = 0\n\t                column += 1\n\t            elif rp == RibbonGroup.Medium:\n\t                if rowCount == 2:\n", "                    if row == 0:\n\t                        item.rowIndex = 0\n\t                        item.columnIndex = column\n\t                        item.willGeometry = QRect(x, yMediumRow0, hint.width(), smallHeight)\n\t                        thisColumnRP0 = RibbonGroup.Medium\n\t                        columnMaxWidth = hint.width()\n\t                        row = 1\n\t                    else:\n\t                        item.rowIndex = 1\n\t                        item.columnIndex = column\n", "                        item.willGeometry = QRect(x, yMediumRow1, hint.width(), smallHeight)\n\t                        columnMaxWidth = max(columnMaxWidth, hint.width())\n\t                        x += columnMaxWidth + spacing\n\t                        row = 0\n\t                        columnMaxWidth = 0\n\t                        column += 1\n\t                else:\n\t                    if row == 0:\n\t                        item.rowIndex = 0\n\t                        item.columnIndex = column\n", "                        item.willGeometry = QRect(x, yMediumRow0, hint.width(), smallHeight)\n\t                        thisColumnRP0 = RibbonGroup.Medium\n\t                        columnMaxWidth = hint.width()\n\t                        row = 1\n\t                    elif row == 1:\n\t                        item.rowIndex = 1\n\t                        item.columnIndex = column\n\t                        item.willGeometry = QRect(x, yMediumRow1, hint.width(), smallHeight)\n\t                        columnMaxWidth = max(columnMaxWidth, hint.width())\n\t                        x += columnMaxWidth + spacing\n", "                        row = 0\n\t                        columnMaxWidth = 0\n\t                        column += 1\n\t                    else:\n\t                        x += columnMaxWidth + spacing\n\t                        column += 1\n\t                        item.rowIndex = 0\n\t                        item.columnIndex = column\n\t                        item.willGeometry = QRect(x, yMediumRow0, hint.width(), smallHeight)\n\t                        thisColumnRP0 = RibbonGroup.Medium\n", "                        columnMaxWidth = hint.width()\n\t                        row = 1\n\t            elif rp == RibbonGroup.Small:\n\t                if row == 0:\n\t                    item.rowIndex = 0\n\t                    item.columnIndex = column\n\t                    item.willGeometry = QRect(x, ySmallRow0, hint.width(), smallHeight)\n\t                    thisColumnRP0 = RibbonGroup.Small\n\t                    columnMaxWidth = hint.width()\n\t                    row = 1\n", "                elif row == 1:\n\t                    item.rowIndex = 1\n\t                    item.columnIndex = column\n\t                    item.willGeometry = QRect(x, ySmallRow1, hint.width(), smallHeight)\n\t                    if rowCount == 3 and thisColumnRP0 == RibbonGroup.Medium:\n\t                        item.willGeometry = QRect(x, yMediumRow1, hint.width(), smallHeight)\n\t                    columnMaxWidth = max(columnMaxWidth, hint.width())\n\t                    if rowCount == 2:\n\t                        x += columnMaxWidth + spacing\n\t                        row = 0\n", "                        columnMaxWidth = 0\n\t                        column += 1\n\t                    else:\n\t                        row = 2\n\t                    if rowCount == 3 and thisColumnRP0 == RibbonGroup.Medium:\n\t                        x += columnMaxWidth + spacing\n\t                        row = 0\n\t                        columnMaxWidth = 0\n\t                        column += 1\n\t                else:\n", "                    item.rowIndex = 2\n\t                    item.columnIndex = column\n\t                    item.willGeometry = QRect(x, ySmallRow2, hint.width(), smallHeight)\n\t                    columnMaxWidth = max(columnMaxWidth, hint.width())\n\t                    x += columnMaxWidth + spacing\n\t                    row = 0\n\t                    columnMaxWidth = 0\n\t                    column += 1\n\t            lastGeomItem = item\n\t        if lastGeomItem:\n", "            if lastGeomItem.columnIndex != column:\n\t                self.m_columnCount = column\n\t                totalWidth = x + m.right()\n\t            else:\n\t                self.m_columnCount = column + 1\n\t                totalWidth = x + columnMaxWidth + spacing + m.right()\n\t        if group.isTwoRow():\n\t            if group.hasOptionAction():\n\t                totalWidth += group.optionActionButtonSize().width()\n\t        if totalWidth < rect.width():\n", "            self._recalcExpandGeomArray(rect)\n\t        self.m_sizeHint = QSize(totalWidth, height)\n\t    def _layoutActions(self):\n\t        if self.m_dirty:\n\t            self._updateGeomArray(self.geometry())\n\t        showWidgets = []\n\t        hideWidgets = []\n\t        for item in self.m_items:\n\t            if item.isEmpty():\n\t                hideWidgets.append(item.widget())\n", "            else:\n\t                item.setGeometry(item.willGeometry)\n\t                showWidgets.append(item.widget())\n\t        for w in showWidgets:\n\t            w.show()\n\t        for w in hideWidgets:\n\t            w.hide()\n\t    s_contentsMargins = QMargins(1, 1, 1, 1)\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonContainers.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import Qt, QSize\n\tfrom PyQt5.QtGui import QIcon\n\tfrom PyQt5.QtWidgets import QWidget, QHBoxLayout, QLabel, QSizePolicy\n\tclass RibbonCtrlContainer(QWidget):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_widget = None\n", "        self.m_icon = QIcon()\n\t        self.m_iconSize = QSize(18, 18)\n\t        self.m_layout = QHBoxLayout(self)\n\t        self.m_layout.setSpacing(0);\n\t        self.m_layout.setObjectName(\"layout\");\n\t        self.m_layout.setContentsMargins(0, 0, 0, 0);\n\t        self.m_labelPixmap = QLabel(self)\n\t        self.m_labelPixmap.setObjectName(\"labelPixmap\")\n\t        self.m_labelPixmap.setAlignment(Qt.AlignCenter)\n\t        self.m_layout.addWidget(self.m_labelPixmap)\n", "        self.m_labelText = QLabel(self)\n\t        self.m_labelText.setObjectName(\"labelTest\")\n\t        self.m_layout.addWidget(self.m_labelText)\n\t    def setIconVisible(self, b: bool):\n\t        self.m_labelPixmap.setVisible(b)\n\t    def setTitleVisible(self, b: bool):\n\t        self.m_labelText.setVisible(b)\n\t    def setIcon(self, i: QIcon):\n\t        self.m_icon = i\n\t        self.m_labelPixmap.setPixmap(i.pixmap(self.m_iconSize))\n", "    def getIcon(self) -> QIcon:\n\t        return self.m_icon\n\t    def setText(self, t: str):\n\t        self.m_labelText.setText(t)\n\t    def getText(self) -> str:\n\t        return self.m_labelText.text()\n\t    def hasWidget(self) -> bool:\n\t        return self.m_widget is not None\n\t    def setWidget(self, w: QWidget):\n\t        if self.m_widget:\n", "            old_widget = self.m_widget\n\t            i = self.m_layout.indexOf(old_widget)\n\t            if i >= 0:\n\t                self.m_layout.takeAt(i)\n\t        self.m_widget = w\n\t        if not w:\n\t            return\n\t        if w.parent() != self:\n\t            w.setParent(self)\n\t        self.m_layout.addWidget(w)\n", "        sp = QSizePolicy(QSizePolicy.Expanding, QSizePolicy.Preferred)\n\t        sp.setHorizontalStretch(0)\n\t        sp.setVerticalStretch(0)\n\t        w.setSizePolicy(sp)\n\t    def getWidget(self) -> QWidget:\n\t        return self.m_widget\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonButton.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import Qt, QSize, QRect, QEvent, QPoint\n\tfrom PyQt5.QtGui import QPixmap, QPainter, QIcon, QCursor, QPalette\n\tfrom PyQt5.QtWidgets import QToolButton, QAction, QStyleOptionToolButton, QWidget, \\\n\t    QStyle, QSizePolicy, QStyleOption\n\tQX_INDICATOR_ARROW_WIDTH = 8\n\tQX_WIDTH_HEIGHT_RATIO = 1.2\n\tclass RibbonButton(QToolButton):\n", "    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonButton(parent=None)\n\t        RibbonButton(defaultAction: QAction, parent=None)\n\t        \"\"\"\n\t        parent = None\n\t        act: QAction = None\n\t        arg_len = len(args)\n\t        if arg_len > 0 and isinstance(args[0], QAction):\n\t            parent = args[1] if arg_len >= 2 else None\n", "            act = args[0]\n\t        elif arg_len > 0:\n\t            parent = args[0]\n\t        super().__init__(parent)\n\t        self.m_buttonType = RibbonButton.LargeButton\n\t        self.m_largeButtonType = RibbonButton.Normal\n\t        self.m_mouseOnSubControl = False\n\t        self.m_menuButtonPressed = False\n\t        self.m_isWordWrap = False\n\t        self.m_iconAndTextSpace = 2\n", "        self.m_iconRect = QRect()\n\t        self.m_textRect = QRect()\n\t        if act:\n\t            self.setDefaultAction(act)\n\t        self.setAutoRaise(True)\n\t        self.setButtonType(RibbonButton.SmallButton)\n\t    def buttonType(self) -> int:\n\t        return self.m_buttonType\n\t    def setButtonType(self, button_type):\n\t        self.m_buttonType = button_type\n", "        if RibbonButton.LargeButton == button_type:\n\t            self.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)\n\t            self.setSizePolicy(QSizePolicy.Maximum, QSizePolicy.Expanding)\n\t        else:\n\t            self.setToolButtonStyle(Qt.ToolButtonTextBesideIcon)\n\t            self.setSizePolicy(QSizePolicy.Preferred, QSizePolicy.Maximum)\n\t        self.setMouseTracking(True)\n\t    def sizeHint(self) -> QSize:\n\t        s = super().sizeHint()\n\t        opt = QStyleOptionToolButton()\n", "        self.initStyleOption(opt)\n\t        if RibbonButton.LargeButton == self.m_buttonType:\n\t            # 计算最佳大小\n\t            if (RibbonButton.Normal == self.m_largeButtonType) or \\\n\t                    (RibbonButton.Lite == self.m_largeButtonType and RibbonButton.s_liteStyleEnableWordWrap):\n\t                if s.width() > s.height() * QX_WIDTH_HEIGHT_RATIO:\n\t                    fm = self.fontMetrics()\n\t                    textRange = QRect(0, 0, s.width(), s.height())\n\t                    maxTryCount = 3\n\t                    tryCount = 0\n", "                    alignment = Qt.TextShowMnemonic | Qt.TextWordWrap\n\t                    while tryCount < maxTryCount:\n\t                        textRange.setWidth(int(s.width() / 2 + (s.width() / 2) * (tryCount / maxTryCount)))\n\t                        textRange = fm.boundingRect(textRange, alignment, self.text())\n\t                        if textRange.height() <= fm.lineSpacing() * 2:\n\t                            self.m_isWordWrap = (textRange.height() > fm.lineSpacing())\n\t                            break\n\t                        tryCount += 1\n\t                    s.setWidth(textRange.width() + self.m_iconAndTextSpace * 2)\n\t                    if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n", "                            (opt.features & QStyleOptionToolButton.HasMenu):\n\t                        if self.largeButtonType() == RibbonButton.Lite or self.m_isWordWrap:\n\t                            s.setWidth(s.width() + QX_INDICATOR_ARROW_WIDTH)\n\t                else:\n\t                    self.m_isWordWrap = '\\n' in self.text()\n\t                    if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n\t                            (opt.features & QStyleOptionToolButton.HasMenu):\n\t                        # 如果有菜单\n\t                        if self.m_isWordWrap:\n\t                            s.setWidth(s.width() + QX_INDICATOR_ARROW_WIDTH)\n", "            else:\n\t                if s.width() > s.height() * 1.5:\n\t                    s.setWidth(int(s.height() * 1.5))\n\t                if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n\t                        (opt.features & QStyleOptionToolButton.HasMenu):\n\t                    s.setWidth(s.width() + QX_INDICATOR_ARROW_WIDTH)\n\t        else:\n\t            # 在仅有图标的小模式显示时，预留一个下拉箭头位置\n\t            if self.toolButtonStyle() == Qt.ToolButtonIconOnly:\n\t                if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n", "                        (opt.features & QStyleOptionToolButton.HasMenu):\n\t                    s.setWidth(s.width() + QX_INDICATOR_ARROW_WIDTH)\n\t        return s\n\t    def minimumSizeHint(self) -> QSize:\n\t        return self.sizeHint()\n\t    def setLargeButtonType(self, large_type):\n\t        self.m_largeButtonType = large_type\n\t    def largeButtonType(self) -> int:\n\t        return self.m_largeButtonType\n\t    @staticmethod\n", "    def setToolButtonTextShift(on: bool):\n\t        RibbonButton.s_isToolButtonTextShift = on\n\t    @staticmethod\n\t    def isToolButtonTextShift() -> bool:\n\t        return RibbonButton.s_isToolButtonTextShift\n\t    @staticmethod\n\t    def setLiteStyleEnableWordWrap(on: bool):\n\t        RibbonButton.s_liteStyleEnableWordWrap = on\n\t    @staticmethod\n\t    def isLiteStyleEnableWordWrap() -> bool:\n", "        return RibbonButton.s_liteStyleEnableWordWrap\n\t    def event(self, e: QEvent) -> bool:\n\t        eList = (\n\t            QEvent.WindowDeactivate,\n\t            QEvent.ActionChanged,\n\t            QEvent.ActionRemoved,\n\t            QEvent.ActionAdded,\n\t        )\n\t        if e.type() in eList:\n\t            self.m_mouseOnSubControl = False\n", "        return super().event(e)\n\t    def changeEvent(self, e: QEvent):\n\t        if e:\n\t            if e.type() == QEvent.FontChange:\n\t                opt = QStyleOptionToolButton()\n\t                self.initStyleOption(opt)\n\t                self._calcIconAndTextRect(opt)\n\t        super().changeEvent(e)\n\t    def paintEvent(self, e: QEvent):\n\t        if self.m_buttonType == self.LargeButton:\n", "            self._drawLargeButton(e)\n\t        elif self.m_buttonType == self.SmallButton:\n\t            self._drawSmallButton(e)\n\t    def resizeEvent(self, e):\n\t        super().resizeEvent(e)\n\t        opt = QStyleOptionToolButton()\n\t        self.initStyleOption(opt)\n\t        self._calcIconAndTextRect(opt)\n\t    def mouseMoveEvent(self, e):\n\t        isMouseOnSubControl = False\n", "        if self.m_iconRect.isValid():\n\t            isMouseOnSubControl = not self.m_iconRect.contains(e.pos())\n\t        if self.m_mouseOnSubControl != isMouseOnSubControl:\n\t            self.m_mouseOnSubControl = isMouseOnSubControl\n\t            self.update()\n\t        super().mouseMoveEvent(e)\n\t    def mousePressEvent(self, e):\n\t        if e.button() == Qt.LeftButton and self.popupMode() == QToolButton.MenuButtonPopup:\n\t            if self.m_buttonType == self.LargeButton:\n\t                popupr = self.rect().adjusted(0, int(self.height() / 2), 0, 0)\n", "                if popupr.isValid() and popupr.contains(e.pos()):\n\t                    self.m_menuButtonPressed = True\n\t                    self.showMenu()\n\t                    return\n\t            elif self.m_iconRect.isValid() and not self.m_iconRect.contains(e.pos()):\n\t                self.m_menuButtonPressed = True\n\t                self.showMenu()\n\t                return\n\t        self.m_menuButtonPressed = False\n\t        super().mousePressEvent(e)\n", "    def mouseReleaseEvent(self, e):\n\t        super().mouseReleaseEvent(e)\n\t        self.m_menuButtonPressed = False\n\t    def focusOutEvent(self, e):\n\t        super().focusOutEvent(e)\n\t        self.m_mouseOnSubControl = False\n\t    def leaveEvent(self, e):\n\t        self.m_mouseOnSubControl = False\n\t        super().leaveEvent(e)\n\t    def hitButton(self, pos: QPoint) -> bool:\n", "        if super().hitButton(pos):\n\t            return not self.m_menuButtonPressed\n\t        return False\n\t    def _calcIconAndTextRect(self, opt: QStyleOptionToolButton):\n\t        if RibbonButton.LargeButton == self.m_buttonType:\n\t            self.m_iconRect = opt.rect.adjusted(self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n\t                                                -self.m_iconAndTextSpace, -self.m_iconAndTextSpace)\n\t            if opt.toolButtonStyle != Qt.ToolButtonIconOnly:\n\t                fm = self.fontMetrics()\n\t                if RibbonButton.Normal == self.m_largeButtonType or \\\n", "                        (RibbonButton.Lite == self.m_largeButtonType and RibbonButton.s_liteStyleEnableWordWrap):\n\t                    maxHeight = opt.rect.height() - (fm.lineSpacing() * 2) - \\\n\t                                2 * self.m_iconAndTextSpace - self.m_iconAndTextSpace\n\t                else:\n\t                    maxHeight = opt.rect.height() - (fm.lineSpacing() * 1.2) - \\\n\t                                2 * self.m_iconAndTextSpace - self.m_iconAndTextSpace\n\t                self.m_iconRect.setHeight(round(maxHeight))\n\t                self.m_textRect.setRect(self.m_iconAndTextSpace,\n\t                                        self.m_iconRect.bottom() + self.m_iconAndTextSpace,\n\t                                        self.m_iconRect.width(),\n", "                                        opt.rect.bottom() - self.m_iconRect.bottom() - self.m_iconAndTextSpace)\n\t                if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n\t                        (opt.features & QStyleOptionToolButton.HasMenu):\n\t                    if self.m_isWordWrap:\n\t                        self.m_textRect.adjust(0, 0, -QX_INDICATOR_ARROW_WIDTH, 0)\n\t                    elif RibbonButton.Lite == self.m_largeButtonType and not RibbonButton.s_liteStyleEnableWordWrap:\n\t                        self.m_textRect.adjust(0, 0, -QX_INDICATOR_ARROW_WIDTH, 0)\n\t            else:\n\t                self.m_textRect = QRect()\n\t        else:\n", "            # small button\n\t            if opt.toolButtonStyle == Qt.ToolButtonIconOnly:\n\t                self.m_iconRect = opt.rect.adjusted(self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n\t                                                    -self.m_iconAndTextSpace, -self.m_iconAndTextSpace)\n\t                if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n\t                        (opt.features & QStyleOptionToolButton.HasMenu):\n\t                    self.m_iconRect.adjust(0, 0, -QX_INDICATOR_ARROW_WIDTH, 0)\n\t                self.m_textRect = QRect()\n\t            else:\n\t                self.m_iconRect = QRect(self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n", "                                        max(opt.rect.height(), opt.iconSize.width()) - 2 * self.m_iconAndTextSpace,\n\t                                        opt.rect.height() - 2 * self.m_iconAndTextSpace)\n\t                self.m_textRect.setRect(self.m_iconRect.right() + self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n\t                                        opt.rect.right() - self.m_iconRect.right() - 2 * self.m_iconAndTextSpace,\n\t                                        opt.rect.height() - 2 * self.m_iconAndTextSpace)\n\t                if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or \\\n\t                        (opt.features & QStyleOptionToolButton.HasMenu):\n\t                    self.m_textRect.adjust(0, 0, -QX_INDICATOR_ARROW_WIDTH, 0)\n\t        # 纯文本的文字位置\n\t        if Qt.ToolButtonTextOnly == self.toolButtonStyle() or self.icon().isNull():\n", "            self.m_textRect = opt.rect.adjusted(self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n\t                                                -self.m_iconAndTextSpace, -self.m_iconAndTextSpace)\n\t    def _adjustedTextRect(self, opt: QStyleOptionToolButton) -> QRect:\n\t        rect = self.m_textRect\n\t        if RibbonButton.s_isToolButtonTextShift:\n\t            x = y = 0\n\t            if opt.state & (QStyle.State_Sunken | QStyle.State_On):\n\t                x = self.style().pixelMetric(QStyle.PM_ButtonShiftHorizontal, opt, self)\n\t                y = self.style().pixelMetric(QStyle.PM_ButtonShiftVertical, opt, self)\n\t            rect.translate(x, y)\n", "        return rect\n\t    def _calcIndicatorArrowDownRect(self, opt: QStyleOptionToolButton) -> QRect:\n\t        \"\"\"sub control 的下拉箭头的位置\"\"\"\n\t        rect = QRect(opt.rect)\n\t        if RibbonButton.LargeButton == self.m_buttonType:\n\t            if RibbonButton.Lite == self.m_largeButtonType and not RibbonButton.s_liteStyleEnableWordWrap:\n\t                rect.setRect(self.m_textRect.right(), self.m_textRect.top(),\n\t                             opt.rect.right() - self.m_iconAndTextSpace - self.m_textRect.right(),\n\t                             self.m_textRect.height())\n\t            elif self.m_isWordWrap:\n", "                rect.setRect(self.m_textRect.right(), int(self.m_textRect.top() + self.m_textRect.height() / 2),\n\t                             opt.rect.right() - self.m_iconAndTextSpace - self.m_textRect.right(),\n\t                             int(self.m_textRect.height() / 2))\n\t            else:\n\t                rect.setRect(self.m_textRect.left(), self.m_textRect.bottom() - QX_INDICATOR_ARROW_WIDTH,\n\t                             self.m_textRect.width(), QX_INDICATOR_ARROW_WIDTH)\n\t        else:\n\t            rect.setRect(rect.width() - QX_INDICATOR_ARROW_WIDTH - self.m_iconAndTextSpace, self.m_iconAndTextSpace,\n\t                         QX_INDICATOR_ARROW_WIDTH, rect.height() - 2 * self.m_iconAndTextSpace)\n\t        return rect\n", "    def _createIconPixmap(self, opt: QStyleOptionToolButton, icon_size: QSize) -> QPixmap:\n\t        if not opt.icon.isNull():  # 有图标\n\t            state = QIcon.On if opt.state & QStyle.State_On else QIcon.Off\n\t            if not (opt.state & QStyle.State_Enabled):\n\t                mode = QIcon.Disabled\n\t            elif (opt.state & QStyle.State_MouseOver) and (opt.state & QStyle.State_AutoRaise):\n\t                mode = QIcon.Active\n\t            else:\n\t                mode = QIcon.Normal\n\t            return opt.icon.pixmap(self.window().windowHandle(), icon_size, mode, state)\n", "        return QPixmap()\n\t    def _drawLargeButton(self, e: QEvent):\n\t        p = QPainter(self)\n\t        opt = QStyleOptionToolButton()\n\t        self.initStyleOption(opt)\n\t        if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or (opt.features & QStyleOptionToolButton.HasMenu):\n\t            if not self.rect().contains(self.mapFromGlobal(QCursor.pos())):\n\t                opt.state &= ~QStyle.State_MouseOver\n\t        autoRaise = opt.state & QStyle.State_AutoRaise\n\t        bFlags = opt.state & ~QStyle.State_Sunken\n", "        if autoRaise and (not (bFlags & QStyle.State_MouseOver) or not (bFlags & QStyle.State_Enabled)):\n\t            bFlags &= ~QStyle.State_Raised\n\t        if opt.state & QStyle.State_Sunken:\n\t            if opt.activeSubControls & QStyle.SC_ToolButton:\n\t                bFlags |= QStyle.State_Sunken\n\t            elif opt.activeSubControls & QStyle.SC_ToolButtonMenu:\n\t                bFlags |= QStyle.State_MouseOver\n\t        # 绘制背景\n\t        tool = QStyleOption(0)\n\t        tool.palette = opt.palette\n", "        drawStyle = QStyle.PE_PanelButtonTool if autoRaise else QStyle.PE_PanelButtonBevel\n\t        if (opt.subControls & QStyle.SC_ToolButton) and (opt.features & QStyleOptionToolButton.MenuButtonPopup):\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            self.style().drawPrimitive(QStyle.PE_PanelButtonTool, tool, p, self)\n\t            opt.activeSubControls &= QStyle.SC_ToolButtonMenu\n\t            if opt.activeSubControls:\n\t                pass\n\t            else:\n\t                if tool.state & QStyle.State_MouseOver:\n", "                    if self.m_mouseOnSubControl:\n\t                        # 鼠标在文字区，把图标显示为正常\n\t                        tool.rect = self.m_iconRect\n\t                        tool.state = QStyle.State_Raised  # 把图标区域显示为正常\n\t                    else:\n\t                        # 鼠标在图标区，把文字显示为正常\n\t                        tool.state = QStyle.State_Raised  # 把图标区域显示为正常\n\t                        tool.rect.setRect(self.m_textRect.x(), self.m_textRect.y(),\n\t                                          tool.rect.width() - 2 * self.m_iconAndTextSpace, self.m_textRect.height())\n\t                    self.style().drawPrimitive(drawStyle, tool, p, self)\n", "        elif (opt.subControls & QStyle.SC_ToolButton) and (opt.features & QStyleOptionToolButton.HasMenu):\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            self.style().drawPrimitive(drawStyle, tool, p, self)\n\t        elif opt.subControls & QStyle.SC_ToolButton:\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            if opt.state & QStyle.State_Sunken:\n\t                tool.state &= ~QStyle.State_MouseOver\n\t            self.style().drawPrimitive(drawStyle, tool, p, self)\n", "        # TODO: draw focus\n\t        self._drawIconAndLabel(p, opt)\n\t    def _drawSmallButton(self, e: QEvent):\n\t        p = QPainter(self)\n\t        opt = QStyleOptionToolButton()\n\t        self.initStyleOption(opt)\n\t        if (opt.features & QStyleOptionToolButton.MenuButtonPopup) or (opt.features & QStyleOptionToolButton.HasMenu):\n\t            if not self.rect().contains(self.mapFromGlobal(QCursor.pos())):\n\t                opt.state &= ~QStyle.State_MouseOver\n\t        autoRaise = bool(opt.state & QStyle.State_AutoRaise)\n", "        bFlags = opt.state & ~QStyle.State_Sunken\n\t        mFlags = bFlags\n\t        if autoRaise and (not (bFlags & QStyle.State_MouseOver) or not (bFlags & QStyle.State_Enabled)):\n\t            bFlags &= ~QStyle.State_Raised\n\t        if opt.state & QStyle.State_Sunken:\n\t            if opt.activeSubControls & QStyle.SC_ToolButton:\n\t                bFlags |= QStyle.State_Sunken\n\t                mFlags |= QStyle.State_MouseOver | QStyle.State_Sunken\n\t            elif opt.activeSubControls & QStyle.SC_ToolButtonMenu:\n\t                bFlags |= QStyle.State_MouseOver\n", "                mFlags |= QStyle.State_Sunken\n\t        # 绘制背景\n\t        tool = QStyleOption(0)\n\t        tool.palette = opt.palette\n\t        drawStyle = QStyle.PE_PanelButtonTool if autoRaise else QStyle.PE_PanelButtonBevel\n\t        if (opt.subControls & QStyle.SC_ToolButton) and (opt.features & QStyleOptionToolButton.MenuButtonPopup):\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            opt.activeSubControls = QStyle.SC_ToolButtonMenu & opt.activeSubControls\n\t            if opt.activeSubControls:\n", "                # 菜单激活\n\t                self.style().drawPrimitive(QStyle.PE_PanelButtonTool, tool, p, self)\n\t            else:\n\t                self.style().drawPrimitive(QStyle.PE_PanelButtonTool, tool, p, self)\n\t                if tool.state & QStyle.State_MouseOver:\n\t                    if self.m_mouseOnSubControl:\n\t                        # 鼠标在文字区，把图标显示为正常\n\t                        tool.rect = self.m_iconRect\n\t                        tool.state = QStyle.State_Raised  # 把图标区域显示为正常\n\t                    else:\n", "                        # 鼠标在图标区，把文字显示为正常\n\t                        tool.state = QStyle.State_Raised  # 把图标区域显示为正常\n\t                        tool.rect = opt.rect.adjusted(self.m_iconRect.width() + self.m_iconAndTextSpace,\n\t                                                      self.m_iconAndTextSpace,\n\t                                                      -self.m_iconAndTextSpace, -self.m_iconAndTextSpace)\n\t                    self.style().drawPrimitive(drawStyle, tool, p, self)\n\t        elif (opt.subControls & QStyle.SC_ToolButton) and (opt.features & QStyleOptionToolButton.HasMenu):\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            self.style().drawPrimitive(drawStyle, tool, p, self)\n", "        elif opt.subControls & QStyle.SC_ToolButton:\n\t            tool.rect = QRect(opt.rect)\n\t            tool.state = bFlags\n\t            if opt.state & QStyle.State_Sunken:\n\t                tool.state &= ~QStyle.State_MouseOver\n\t            self.style().drawPrimitive(drawStyle, tool, p, self)\n\t        self._drawIconAndLabel(p, opt)\n\t    def _drawIconAndLabel(self, p: QPainter, opt: QStyleOptionToolButton):\n\t        pm = self._createIconPixmap(opt, self.m_iconRect.size())\n\t        if self.m_buttonType == RibbonButton.LargeButton:\n", "            # 绘制图标和文字\n\t            textRect = self._adjustedTextRect(opt)\n\t            hasArrow = opt.features & QStyleOptionToolButton.Arrow\n\t            if ((not hasArrow) and opt.icon.isNull() and opt.text) or opt.toolButtonStyle == Qt.ToolButtonTextOnly:\n\t                # 只有文字模式\n\t                alignment = Qt.AlignCenter | Qt.TextShowMnemonic | Qt.TextWordWrap  # 纯文本下，居中对齐,换行\n\t                if not self.style().styleHint(QStyle.SH_UnderlineShortcut, opt, self):\n\t                    alignment = alignment | Qt.TextHideMnemonic\n\t                p.setFont(opt.font)\n\t                self.style().drawItemText(p, textRect, alignment, opt.palette,\n", "                                          opt.state & QStyle.State_Enabled, opt.text, QPalette.ButtonText)\n\t                return\n\t            if opt.toolButtonStyle != Qt.ToolButtonIconOnly:\n\t                # 文本加图标情况\n\t                p.setFont(opt.font)\n\t                alignment = Qt.TextShowMnemonic | Qt.TextWordWrap  # 换行\n\t                if not self.style().styleHint(QStyle.SH_UnderlineShortcut, opt, self):\n\t                    alignment |= Qt.TextHideMnemonic\n\t                # 文字在icon下，先绘制图标\n\t                if not hasArrow:\n", "                    self.style().drawItemPixmap(p, self.m_iconRect, Qt.AlignCenter, pm)\n\t                else:\n\t                    self._drawArrow(self.style(), opt, self.m_iconRect, p, self)\n\t                if self.m_largeButtonType == RibbonButton.Normal:\n\t                    alignment = (Qt.AlignHCenter | Qt.AlignTop) | alignment\n\t                else:\n\t                    alignment |= Qt.AlignCenter\n\t                if RibbonButton.Lite == self.m_largeButtonType and not RibbonButton.s_liteStyleEnableWordWrap:\n\t                    opt.text = self.fontMetrics().elidedText(opt.text, Qt.ElideRight,\n\t                                                             textRect.width(), Qt.TextShowMnemonic)\n", "                # 再绘制文本，对于Normal模式下的 LargeButton，如果有菜单，箭头将在文本旁边\n\t                self.style().drawItemText(p, QStyle.visualRect(opt.direction, opt.rect, textRect), alignment,\n\t                                          opt.palette, opt.state & QStyle.State_Enabled, opt.text, QPalette.ButtonText)\n\t            else:\n\t                # 只有图标情况\n\t                if not hasArrow:\n\t                    self.style().drawItemPixmap(p, self.m_iconRect, Qt.AlignCenter, pm)\n\t                else:\n\t                    self._drawArrow(self.style(), opt, opt.rect, p, self)\n\t            # 绘制sub control 的下拉箭头\n", "            if opt.features & QStyleOptionToolButton.MenuButtonPopup or \\\n\t                    opt.features & QStyleOptionToolButton.HasMenu:\n\t                opt.rect = self._calcIndicatorArrowDownRect(opt)\n\t                self.style().drawPrimitive(QStyle.PE_IndicatorArrowDown, opt, p, self)\n\t        else:\n\t            if opt.icon.isNull():\n\t                # 只有文字\n\t                alignment = Qt.TextShowMnemonic\n\t                if not self.style().styleHint(QStyle.SH_UnderlineShortcut, opt, self):\n\t                    alignment |= Qt.TextHideMnemonic\n", "                self.style().drawItemText(p, QStyle.visualRect(opt.direction, opt.rect,\n\t                                                               opt.rect.adjusted(2, 1, -2, -1)),\n\t                                          alignment, opt.palette, opt.state & QStyle.State_Enabled,\n\t                                          opt.text, QPalette.ButtonText)\n\t            elif opt.toolButtonStyle != Qt.ToolButtonIconOnly:\n\t                # 文本加图标情况\n\t                p.save()\n\t                p.setFont(opt.font)\n\t                pr = self.m_iconRect  # 图标区域\n\t                tr = opt.rect.adjusted(pr.width() + 2, 0, -1, 0)  # 文本区域\n", "                alignment = Qt.TextShowMnemonic\n\t                if not self.style().styleHint(QStyle.SH_UnderlineShortcut, opt, self):\n\t                    alignment |= Qt.TextHideMnemonic\n\t                # ribbonButton在小图标下，不支持ToolButtonTextUnderIcon\n\t                if opt.toolButtonStyle != Qt.ToolButtonTextUnderIcon:\n\t                    self.style().drawItemPixmap(p, QStyle.visualRect(opt.direction, opt.rect, pr), Qt.AlignCenter, pm)\n\t                    alignment = alignment | Qt.AlignLeft | Qt.AlignVCenter\n\t                # 绘制文本\n\t                self.style().drawItemText(p, QStyle.visualRect(opt.direction, opt.rect, tr), alignment, opt.palette,\n\t                                          opt.state & QStyle.State_Enabled, opt.text, QPalette.ButtonText)\n", "                p.restore()\n\t            else:\n\t                # 只有图标情况\n\t                self.style().drawItemPixmap(p, self.m_iconRect, Qt.AlignCenter, pm)\n\t            # 绘制sub control 的下拉箭头\n\t            if opt.features & QStyleOptionToolButton.MenuButtonPopup or \\\n\t                    opt.features & QStyleOptionToolButton.HasMenu:\n\t                opt.rect = self._calcIndicatorArrowDownRect(opt)\n\t                self.style().drawPrimitive(QStyle.PE_IndicatorArrowDown, opt, p, self)\n\t    @staticmethod\n", "    def _drawArrow(style: QStyle, opt: QStyleOptionToolButton, rect: QRect,\n\t                   painter: QPainter, widget: QWidget = None):\n\t        if opt.arrowType == Qt.LeftArrow:\n\t            pe = QStyle.PE_IndicatorArrowLeft\n\t        elif opt.arrowType == Qt.RightArrow:\n\t            pe = QStyle.PE_IndicatorArrowRight\n\t        elif opt.arrowType == Qt.UpArrow:\n\t            pe = QStyle.PE_IndicatorArrowUp\n\t        elif opt.arrowType == Qt.DownArrow:\n\t            pe = QStyle.PE_IndicatorArrowDown\n", "        else:\n\t            return\n\t        arrowOpt: QStyleOption = opt\n\t        arrowOpt.rect = rect\n\t        style.drawPrimitive(pe, arrowOpt, painter, widget)\n\t    # RibbonButtonType\n\t    LargeButton = 0\n\t    SmallButton = 1\n\t    # LargeButtonType\n\t    Normal = 0\n", "    Lite = 1\n\t    s_isToolButtonTextShift = False\n\t    s_liteStyleEnableWordWrap = False\n\tif __name__ == '__main__':\n\t    from PyQt5.QtWidgets import QApplication\n\t    from QxRibbonControls import RibbonMenu\n\t    app = QApplication([])\n\t    mainWindow = QWidget()\n\t    menu = RibbonMenu(mainWindow)\n\t    menu.addAction(QIcon(\"res/logo.png\"), '1')\n", "    menu.addAction(QIcon(\"res/logo.png\"), '2')\n\t    menu.addAction(QIcon(\"res/logo.png\"), '3')\n\t    # act = QAction('Test', mainWindow)\n\t    btn = RibbonButton(mainWindow)\n\t    btn.setFocusPolicy(Qt.NoFocus)\n\t    # btn.setButtonType(RibbonButton.SmallButton)\n\t    btn.setButtonType(RibbonButton.LargeButton)\n\t    btn.setLargeButtonType(RibbonButton.Normal)\n\t    # btn.setDefaultAction(act)\n\t    btn.setMenu(menu)\n", "    btn.setText('Ribbon Button demo')\n\t    btn.setIcon(QIcon('res/logo.png'))\n\t    btn.setFixedHeight(78)\n\t    btn.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)\n\t    btn.setPopupMode(QToolButton.MenuButtonPopup)\n\t    mainWindow.setMinimumWidth(50)\n\t    mainWindow.resize(300, 200)\n\t    mainWindow.show()\n\t    app.exec()\n"]}
{"filename": "pyqt/PyRibbon/__init__.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom .QxRibbon import Ribbon\n\tfrom .QxRibbonWindow import RibbonWindow\n\tfrom .QxRibbonBar import RibbonBar\n\tfrom .QxRibbonPage import RibbonPage, RibbonPageContext\n\tfrom .QxRibbonGroup import RibbonGroup\n\tfrom .QxRibbonButtonGroup import RibbonButtonGroup\n\tfrom .QxRibbonControls import RibbonControl, RibbonCheckBox, RibbonComboBox, \\\n", "    RibbonControlButton, RibbonLineEdit, RibbonMenu, RibbonSeparator\n\tfrom .QxRibbonContainers import RibbonCtrlContainer\n\tfrom .QxRibbonQuickAccessBar import RibbonQuickAccessBar\n\tfrom .QxRibbonGallery import RibbonGallery, RibbonGalleryGroup\n\tfrom .QxRibbonButton import RibbonButton\n\tfrom .QxRibbonApplicationButton import RibbonApplicationButton\n\tfrom .QxWindowButtonGroup import WindowButtonGroup\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonGallery.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import List, Union, Dict\n\tfrom PyQt5.QtCore import QSize, Qt, pyqtSignal, QVariant, QPoint, \\\n\t    QAbstractListModel, QModelIndex, QItemSelectionModel\n\tfrom PyQt5.QtGui import QPalette, QIcon, QPainter, QPaintEvent, QResizeEvent\n\tfrom PyQt5.QtWidgets import QWidget, QFrame, QAction, QActionGroup, QLabel, QStyleOptionViewItem, \\\n\t    QStyledItemDelegate, QListView, QStyle, QVBoxLayout, QSizePolicy, QBoxLayout, QApplication\n\tfrom .QxRibbonControls import RibbonControlButton\n", "from . import QxRibbonRes_rc\n\tclass RibbonGalleryItem:\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonGalleryItem()\n\t        RibbonGalleryItem(text: str, icon: QIcon)\n\t        RibbonGalleryItem(action: QAction)\n\t        \"\"\"\n\t        self.m_datas: Dict[int, QVariant] = {}\n\t        self.m_flags = Qt.ItemIsEnabled | Qt.ItemIsSelectable\n", "        self.m_action: QAction = None\n\t        arg_len = len(args)\n\t        if arg_len == 2:\n\t            self.setText(args[0])\n\t            self.setIcon(args[1])\n\t            self.setTextAlignment(Qt.AlignTop | Qt.AlignHCenter)\n\t        elif arg_len == 1:\n\t            self.setTextAlignment(Qt.AlignTop | Qt.AlignHCenter)\n\t            self.setAction(args[0])\n\t    def setData(self, role: int, data: QVariant):\n", "        self.m_datas[role] = QVariant(data)\n\t    def data(self, role: int) -> QVariant:\n\t        if self.m_action:\n\t            if role == Qt.DisplayRole:\n\t                return self.m_action.text()\n\t            elif role == Qt.ToolTipRole:\n\t                return self.m_action.toolTip()\n\t            elif role == Qt.DecorationRole:\n\t                return self.m_action.icon()\n\t        return self.m_datas.get(role, None)\n", "    def setText(self, text: str):\n\t        self.setData(Qt.DisplayRole, text)\n\t    def text(self) -> str:\n\t        if self.m_action:\n\t            return self.m_action.text()\n\t        return str(self.data(Qt.DisplayRole).value())\n\t    def setToolTip(self, text: str):\n\t        self.setData(Qt.ToolTipRole, text)\n\t    def toolTip(self) -> str:\n\t        if self.m_action:\n", "            return self.m_action.tooltip()\n\t        return str(self.data(Qt.ToolTipRole).value())\n\t    def setIcon(self, icon: QIcon):\n\t        self.setData(Qt.DecorationRole, icon)\n\t    def icon(self) -> QIcon:\n\t        if self.m_action:\n\t            return self.m_action.tooltip()\n\t        return QIcon(self.data(Qt.ToolTipRole).value())\n\t    def isSelectable(self) -> bool:\n\t        return self.m_flags & Qt.ItemIsSelectable\n", "    def setSelectable(self, selectable: bool):\n\t        if selectable:\n\t            self.m_flags |= Qt.ItemIsSelectable\n\t        else:\n\t            self.m_flags &= ~Qt.ItemIsSelectable\n\t    def isEnable(self) -> bool:\n\t        if self.m_action:\n\t            return self.m_action.isEnabled()\n\t        return self.m_flags & Qt.ItemIsEnabled\n\t    def setEnable(self, enable: bool):\n", "        if self.m_action:\n\t            self.m_action.setEnabled(enable)\n\t        if enable:\n\t            self.m_flags |= Qt.ItemIsEnabled\n\t        else:\n\t            self.m_flags &= ~Qt.ItemIsEnabled\n\t    def setFlags(self, flag):\n\t        self.m_flags = flag\n\t        if self.m_action:\n\t            self.m_action.setEnabled(flag & Qt.ItemIsEnabled)\n", "    def flags(self) -> int:\n\t        return self.m_flags\n\t    def setAction(self, action: QAction):\n\t        self.m_action = action\n\t        if not action:\n\t            return\n\t        if action.isEnabled():\n\t            self.m_flags |= Qt.ItemIsEnabled\n\t        else:\n\t            self.m_flags &= ~Qt.ItemIsEnabled\n", "    def action(self) -> QAction:\n\t        return self.m_action\n\t    def setTextAlignment(self, align):\n\t        self.setData(Qt.TextAlignmentRole, int(align))\n\t    def getTextAlignment(self) -> int:\n\t        return int(self.data(Qt.TextAlignmentRole).value())\n\tclass RibbonGalleryGroupItemDelegate(QStyledItemDelegate):\n\t    def __init__(self, group, parent=None):\n\t        assert group\n\t        super().__init__(parent)\n", "        self.m_group = group\n\t    def paint(self, painter: QPainter, option: QStyleOptionViewItem, index: QModelIndex):\n\t        t = self.m_group.getGalleryGroupStyle()\n\t        if t == RibbonGalleryGroup.IconWidthText:\n\t            self.paintIconWithText(painter, option, index)\n\t        elif t == RibbonGalleryGroup.IconWithWordWrapText:\n\t            self.paintIconWithTextWordWrap(painter, option, index)\n\t        elif t == RibbonGalleryGroup.IconOnly:\n\t            self.paintIconOnly(painter, option, index)\n\t        else:\n", "            self.paintIconWithText(painter, option, index)\n\t    def sizeHint(self, option: QStyleOptionViewItem, index: QModelIndex) -> QSize:\n\t        return self.m_group.gridSize()\n\t    def paintIconOnly(self, painter: QPainter, option: QStyleOptionViewItem, index: QModelIndex):\n\t        style = self.m_group.style()\n\t        sp = self.m_group.spacing()\n\t        sp += 3\n\t        painter.save()\n\t        painter.setClipRect(option.rect)\n\t        style.drawPrimitive(QStyle.PE_PanelItemViewItem, option, painter, self.m_group)\n", "        iconRect = option.rect\n\t        iconRect.adjust(sp, sp, -sp, -sp)\n\t        icon = QIcon(index.data(Qt.DecorationRole).value()) # FIXME\n\t        icon.paint(painter, iconRect, Qt.AlignCenter, QIcon.Normal, QIcon.On)\n\t        painter.restore()\n\t    def paintIconWithText(self, painter: QPainter, option: QStyleOptionViewItem, index: QModelIndex):\n\t        super().paint(painter, option, index)\n\t    def paintIconWithTextWordWrap(self, painter: QPainter, option: QStyleOptionViewItem, index: QModelIndex):\n\t        super().paint(painter, option, index)\n\tclass RibbonGalleryGroupModel(QAbstractListModel):\n", "    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_items: List[RibbonGalleryItem] = list()\n\t    def rowCount(self, parent: QModelIndex) -> int:\n\t        return 0 if parent.isValid() else len(self.m_items)\n\t    def flags(self, index: QModelIndex) -> int:\n\t        if not index.isValid() or index.row() >= len(self.m_items):\n\t            return Qt.NoItemFlags\n\t        return self.m_items[index.row()].flags()\n\t    def data(self, index: QModelIndex, role: int) -> QVariant:\n", "        if not index.isValid() or index.row() >= len(self.m_items):\n\t            return QVariant()\n\t        return self.m_items[index.row()].data(role)\n\t    def index(self, row: int, column: int, parent: QModelIndex) -> QModelIndex:\n\t        if self.hasIndex(row, column, parent):\n\t            return self.createIndex(row, column, self.m_items[row])\n\t        return QModelIndex()\n\t    def setData(self, index: QModelIndex, value: QVariant, role: int) -> bool:\n\t        if not index.isValid() or index.row() >= len(self.m_items):\n\t            return False\n", "        self.m_items[index.row()].setData(role, value)\n\t        return True\n\t    def clear(self):\n\t        self.beginResetModel()\n\t        self.m_items.clear()\n\t        self.endResetModel()\n\t    def at(self, row: int) -> RibbonGalleryItem:\n\t        return self.m_items[row]\n\t    def insert(self, row: int, item: RibbonGalleryItem):\n\t        self.beginInsertRows(QModelIndex(), row, row)\n", "        self.m_items.insert(row, item)\n\t        self.endInsertRows()\n\t    def take(self, row: int) -> RibbonGalleryItem:\n\t        if row < 0 or row >= len(self.m_items):\n\t            return None\n\t        self.beginRemoveRows(QModelIndex(), row, row)\n\t        item = self.m_items.pop(row)\n\t        self.endRemoveRows()\n\t        return item\n\t    def append(self, item: RibbonGalleryItem):\n", "        count = len(self.m_items)\n\t        self.beginInsertRows(QModelIndex(), count, count + 1)\n\t        self.m_items.append(item)\n\t        self.endInsertRows()\n\tclass RibbonGalleryGroup(QListView):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_groupTitle = \"\"\n\t        self.m_preStyle = RibbonGalleryGroup.IconWidthText\n\t        self.m_displayRow = RibbonGalleryGroup.DisplayOneRow\n", "        self.m_gridMinimumWidth = 0\n\t        self.m_gridMaximumWidth = 0\n\t        self.m_blockRecalc = False\n\t        self.m_actionGroup = QActionGroup(self)\n\t        self.m_actionGroup.triggered.connect(self.triggered)\n\t        self.m_actionGroup.hovered.connect(self.hovered)\n\t        self.setViewMode(QListView.IconMode)\n\t        self.setResizeMode(QListView.Adjust)\n\t        self.setSelectionRectVisible(True)\n\t        self.setUniformItemSizes(True)\n", "        self.setSpacing(1)\n\t        self.setItemDelegate(RibbonGalleryGroupItemDelegate(self, self))\n\t        self.clicked.connect(self.onItemClicked)\n\t        self.setModel(RibbonGalleryGroupModel(self))\n\t    def setRecalcGridSizeBlock(self, on: bool = True):\n\t        self.m_blockRecalc = on\n\t    def isRecalcGridSizeBlock(self) -> bool:\n\t        return self.m_blockRecalc\n\t    def recalcGridSize(self, *args):\n\t        \"\"\"\n", "        recalcGridSize()\n\t        recalcGridSize(galleryHeight: int)\n\t        \"\"\"\n\t        if self.isRecalcGridSizeBlock():\n\t            return\n\t        if len(args) == 1:\n\t            galleryHeight = args[0]\n\t        else:\n\t            galleryHeight = self.height()\n\t        dr = self.getDisplayRow()\n", "        if dr < 1:\n\t            dr = 1\n\t        elif dr > 3:\n\t            dr = 3\n\t        h = galleryHeight / dr\n\t        if h <= 1:\n\t            h = galleryHeight\n\t        w = h\n\t        if self.getGridMinimumWidth() > 0:\n\t            if w < self.getGridMinimumWidth():\n", "                w = self.getGridMinimumWidth()\n\t        if self.getGridMaximumWidth() > 0:\n\t            if w > self.getGridMaximumWidth():\n\t                w = self.getGridMaximumWidth()\n\t        w = round(w)\n\t        h = round(h)\n\t        self.setGridSize(QSize(w, h))\n\t        shiftpix = 4\n\t        t = self.getGalleryGroupStyle()\n\t        spacing = self.spacing()\n", "        if t == RibbonGalleryGroup.IconWidthText:\n\t            textHeight = self.fontMetrics().lineSpacing()\n\t            iconHeight = h - textHeight - 2 * spacing - shiftpix\n\t            if iconHeight > 0:\n\t                self.setIconSize(QSize(w - 2 * spacing - shiftpix, iconHeight))\n\t            else:\n\t                self.setIconSize(QSize(w - 2 * spacing - shiftpix, h - 2 * spacing - shiftpix))\n\t        elif t == RibbonGalleryGroup.IconWithWordWrapText:\n\t            textHeight = self.fontMetrics().lineSpacing() * 2\n\t            iconHeight = h - textHeight\n", "            if iconHeight > 0:\n\t                self.setIconSize(QSize(w - 2 * spacing - shiftpix, iconHeight))\n\t            else:\n\t                self.setIconSize(QSize(w - 2 * spacing - shiftpix, h - 2 * spacing - shiftpix))\n\t        else:\n\t            self.setIconSize(QSize(w - 2 * spacing - shiftpix, h - 2 * spacing - shiftpix))\n\t    def setGalleryGroupStyle(self, style):\n\t        self.m_preStyle = style\n\t        if style == RibbonGalleryGroup.IconWithWordWrapText:\n\t            self.setWordWrap(True)\n", "        self.recalcGridSize()\n\t    def getGalleryGroupStyle(self) -> int:\n\t        return self.m_preStyle\n\t    def addItem(self, *args):\n\t        \"\"\"\n\t        addItem(text: str, icon: QIcon)\n\t        addItem(item: RibbonGalleryItem)\n\t        \"\"\"\n\t        if not self.groupModel():\n\t            return\n", "        item = None\n\t        arg_len = len(args)\n\t        if arg_len == 2:\n\t            item = RibbonGalleryItem(args[0], args[1])\n\t        elif arg_len == 1 and isinstance(args[0], RibbonGalleryItem):\n\t            item = args[0]\n\t        if not item:\n\t            return\n\t        self.groupModel().append(item)\n\t    def addActionItem(self, action: QAction):\n", "        if not self.groupModel():\n\t            return\n\t        self.m_actionGroup.addAction(action)\n\t        self.groupModel().append(RibbonGalleryItem(action))\n\t    def addActionItemList(self, actions: List[QAction]):\n\t        model = self.groupModel()\n\t        if not model:\n\t            return\n\t        for a in actions:\n\t            self.m_actionGroup.addAction(a)\n", "            model.append(RibbonGalleryItem(a))\n\t    def setupGroupModel(self):\n\t        self.setModel(RibbonGalleryGroupModel(self))\n\t    def groupModel(self) -> RibbonGalleryGroupModel:\n\t        model = self.model()\n\t        if isinstance(model, RibbonGalleryGroupModel):\n\t            return model\n\t        else:\n\t            return None\n\t    def setGroupTitle(self, title: str):\n", "        self.m_groupTitle = title\n\t        self.groupTitleChanged.emit(title)\n\t    def getGroupTitle(self) -> str:\n\t        return self.m_groupTitle\n\t    def selectByIndex(self, index: int):\n\t        model = self.groupModel()\n\t        if not model:\n\t            return\n\t        idx = model.index(index, 0, QModelIndex())\n\t        selmodel = self.selectionModel()\n", "        if selmodel:\n\t            selmodel.select(idx, QItemSelectionModel.SelectCurrent)\n\t    def setDisplayRow(self, row: int):\n\t        self.m_displayRow = row\n\t        self.recalcGridSize()\n\t    def getDisplayRow(self) -> int:\n\t        return self.m_displayRow\n\t    def setGridMinimumWidth(self, width: int):\n\t        self.m_gridMinimumWidth = width\n\t    def getGridMinimumWidth(self) -> int:\n", "        return self.m_gridMinimumWidth\n\t    def setGridMaximumWidth(self, width: int):\n\t        self.m_gridMaximumWidth = width\n\t    def getGridMaximumWidth(self) -> int:\n\t        return self.m_gridMaximumWidth\n\t    def getActionGroup(self) -> QActionGroup:\n\t        return self.m_actionGroup\n\t    def onItemClicked(self, index: QModelIndex):\n\t        if not index.isValid():\n\t            return\n", "        itemTmp = index.internalPointer()\n\t        if itemTmp and isinstance(itemTmp, RibbonGalleryItem):\n\t            item: RibbonGalleryItem = itemTmp\n\t            action = item.action()\n\t            if action:\n\t                action.activate(QAction.Trigger)\n\t    def onItemEntered(self, index: QModelIndex):\n\t        if index.isValid():\n\t            return\n\t        itemTmp = index.internalPointer()\n", "        if itemTmp and isinstance(itemTmp, RibbonGalleryItem):\n\t            item: RibbonGalleryItem = itemTmp\n\t            action = item.action()\n\t            if action:\n\t                action.activate(QAction.Hover)\n\t    # GalleryGroupStyle\n\t    IconWidthText = 0\n\t    IconWithWordWrapText = 1\n\t    IconOnly = 2\n\t    # DisplayRow\n", "    DisplayOneRow = 1\n\t    DisplayTwoRow = 2\n\t    DisplayThreeRow = 3\n\t    # signals\n\t    groupTitleChanged = pyqtSignal(str)\n\t    triggered = pyqtSignal(QAction)\n\t    hovered = pyqtSignal(QAction)\n\tclass RibbonGalleryViewport(QWidget):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n", "        self.m_widgetToTitleLabel: Dict[QWidget, QLabel] = {}\n\t        self.m_layout = QVBoxLayout(self)\n\t        self.m_layout.setSpacing(0)\n\t        self.m_layout.setContentsMargins(0, 0, 0, 0)\n\t        self.setWindowFlags(Qt.Popup)\n\t        pl = self.palette()\n\t        pl.setBrush(QPalette.Window, pl.brush(QPalette.Base))\n\t        self.setPalette(pl)\n\t    def addWidget(self, w: QWidget, title: str = \"\"):\n\t        if not title:\n", "            w.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t            self.m_layout.addWidget(w)\n\t        else:\n\t            label = QLabel(self)\n\t            label.setText(title)\n\t            label.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t            self.m_layout.addWidget(label)\n\t            w.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t            self.m_layout.addWidget(w)\n\t            self.m_widgetToTitleLabel[w] = label\n", "    def removeWidget(self, w: QWidget):\n\t        label = self.getWidgetTitleLabel(w)\n\t        if label:\n\t            self.m_layout.removeWidget(label)\n\t        self.m_layout.removeWidget(w)\n\t    def getWidgetTitleLabel(self, w: QWidget) -> QLabel:\n\t        return self.m_widgetToTitleLabel.get(w, None)\n\t    def widgetTitleChanged(self, w: QWidget, title: str):\n\t        label = self.getWidgetTitleLabel(w)\n\t        if label:\n", "            label.setText(title)\n\tclass RibbonGallery(QFrame):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_buttonUp = RibbonControlButton(self)\n\t        self.m_buttonUp.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t        self.m_buttonUp.setObjectName(\"RibbonGalleryButtonUp\")\n\t        self.m_buttonUp.setMaximumWidth(RibbonGallery.s_galleryButtonMaximumWidth)\n\t        self.m_buttonUp.setIcon(QIcon(':/image/res/ArrowUp.png'))\n\t        self.m_buttonUp.clicked.connect(self.pageUp)\n", "        self.m_buttonDown = RibbonControlButton(self)\n\t        self.m_buttonDown.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t        self.m_buttonDown.setObjectName(\"RibbonGalleryButtonDown\")\n\t        self.m_buttonDown.setMaximumWidth(RibbonGallery.s_galleryButtonMaximumWidth)\n\t        self.m_buttonDown.setIcon(QIcon(':/image/res/ArrowDown.png'))\n\t        self.m_buttonDown.clicked.connect(self.pageDown)\n\t        self.m_buttonMore = RibbonControlButton(self)\n\t        self.m_buttonMore.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t        self.m_buttonMore.setObjectName(\"RibbonGalleryButtonMore\")\n\t        self.m_buttonMore.setMaximumWidth(RibbonGallery.s_galleryButtonMaximumWidth)\n", "        self.m_buttonMore.setIcon(QIcon(':/image/res/ArrowMore.png'))\n\t        self.m_buttonMore.clicked.connect(self.showMoreDetail)\n\t        self.triggered.connect(self.onTriggered)\n\t        self.m_popupWidget: RibbonGalleryViewport = None\n\t        self.m_viewportGroup: RibbonGalleryGroup = None\n\t        self.m_btnLayout = QBoxLayout(QBoxLayout.TopToBottom)\n\t        self.m_btnLayout.setSpacing(0)\n\t        self.m_btnLayout.setContentsMargins(0, 0, 0, 0)\n\t        self.m_btnLayout.addWidget(self.m_buttonUp)\n\t        self.m_btnLayout.addWidget(self.m_buttonDown)\n", "        self.m_btnLayout.addWidget(self.m_buttonMore)\n\t        self.m_layout = QBoxLayout(QBoxLayout.RightToLeft)\n\t        self.m_layout.setSpacing(0)\n\t        self.m_layout.setContentsMargins(0, 0, 0, 0)\n\t        self.m_layout.addLayout(self.m_btnLayout)\n\t        self.m_layout.addStretch()\n\t        self.setLayout(self.m_layout)\n\t        self.setFrameShape(QFrame.Box)\n\t        self.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n\t        self.setMinimumWidth(200)\n", "    def _addGalleryGroup(self, group: RibbonGalleryGroup):\n\t        group.setSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred)\n\t        viewport = self._ensureGetPopupViewPort()\n\t        viewport.addWidget(group, group.getGroupTitle())\n\t        group.clicked.connect(self.onItemClicked)\n\t        group.groupTitleChanged.connect(lambda title: viewport.widgetTitleChanged(group, title))\n\t        self.setCurrentViewGroup(group)\n\t    def addGalleryGroup(self, *args) -> Union[None, RibbonGalleryGroup]:\n\t        \"\"\"\n\t        addGalleryGroup() -> RibbonGalleryGroup\n", "        addGalleryGroup(group: RibbonGalleryGroup)\n\t        \"\"\"\n\t        if len(args) == 1 and isinstance(args[0], RibbonGalleryGroup):\n\t            group = args[0]\n\t            self._addGalleryGroup(group)\n\t        else:\n\t            group = RibbonGalleryGroup(self)\n\t            self._addGalleryGroup(group)\n\t            return group\n\t    def addCategoryActions(self, title: str, actions: List[QAction]) -> RibbonGalleryGroup:\n", "        group = RibbonGalleryGroup(self)\n\t        if title:\n\t            group.setGroupTitle(title)\n\t        group.addActionItemList(actions)\n\t        self.addGalleryGroup(group)\n\t        return group\n\t    def currentViewGroup(self) -> RibbonGalleryGroup:\n\t        return self.m_viewportGroup\n\t    def setCurrentViewGroup(self, group: RibbonGalleryGroup):\n\t        self._setViewPort(group)\n", "        QApplication.postEvent(self, QResizeEvent(self.size(), self.size()))\n\t    def getPopupViewPort(self) -> RibbonGalleryViewport:\n\t        return self.m_popupWidget\n\t    def sizeHint(self) -> QSize:\n\t        return QSize(100, 62)\n\t    @staticmethod\n\t    def setGalleryButtonMaximumWidth(self, width: int):\n\t        RibbonGallery.s_galleryButtonMaximumWidth = width\n\t    def pageUp(self):\n\t        if not self.m_viewportGroup:\n", "            return\n\t        vScrollBar = self.m_viewportGroup.verticalScrollBar()\n\t        v = vScrollBar.value()\n\t        v += vScrollBar.singleStep()\n\t        vScrollBar.setValue(v)\n\t    def pageDown(self):\n\t        if not self.m_viewportGroup:\n\t            return\n\t        vScrollBar = self.m_viewportGroup.verticalScrollBar()\n\t        v = vScrollBar.value()\n", "        v -= vScrollBar.singleStep()\n\t        vScrollBar.setValue(v)\n\t    def showMoreDetail(self):\n\t        if not self.m_popupWidget:\n\t            return\n\t        popupMenuSize = self.m_popupWidget.sizeHint()\n\t        start = self.mapToGlobal(QPoint(0, 0))\n\t        width = self.m_viewportGroup.width()\n\t        width += self.style().pixelMetric(QStyle.PM_ScrollBarExtent)\n\t        self.m_popupWidget.setGeometry(start.x(), start.y(), width, popupMenuSize.height())\n", "        self.m_popupWidget.show()\n\t    def onItemClicked(self, index: QModelIndex):\n\t        obj = self.sender()\n\t        if isinstance(obj, RibbonGalleryGroup):\n\t            group: RibbonGalleryGroup = obj\n\t            self.setCurrentViewGroup(group)\n\t            curGroup = self.currentViewGroup()\n\t            curGroup.scrollTo(index)\n\t            curGroup.setCurrentIndex(index)\n\t    def onTriggered(self, action: QAction):\n", "        if self.m_popupWidget:\n\t            if self.m_popupWidget.isVisible():\n\t                self.m_popupWidget.hide()\n\t    def resizeEvent(self, event: QResizeEvent):\n\t        super().resizeEvent(event)\n\t        h = self.layout().contentsRect().height()\n\t        if self.m_viewportGroup:\n\t            h = self.m_viewportGroup.height()\n\t            self.m_viewportGroup.recalcGridSize()\n\t        if self.m_popupWidget:\n", "            lay = self.m_popupWidget.layout()\n\t            if not lay:\n\t                return\n\t            c = lay.count()\n\t            for i in range(c):\n\t                item = lay.itemAt(i)\n\t                if not item:\n\t                    continue\n\t                w = item.widget()\n\t                if not w:\n", "                    continue\n\t                if isinstance(w, RibbonGalleryGroup):\n\t                    g: RibbonGalleryGroup = w\n\t                    g.recalcGridSize(h)\n\t    def paintEvent(self, event: QPaintEvent):\n\t        super().paintEvent(event)\n\t    def _setViewPort(self, group: RibbonGalleryGroup):\n\t        if not self.m_viewportGroup:\n\t            self.m_viewportGroup = RibbonGalleryGroup(self)\n\t            self.m_layout.addWidget(self.m_viewportGroup, 1)\n", "        self.m_viewportGroup.setRecalcGridSizeBlock(True)\n\t        self.m_viewportGroup.setGalleryGroupStyle(group.getGalleryGroupStyle())\n\t        self.m_viewportGroup.setDisplayRow(group.getDisplayRow())\n\t        self.m_viewportGroup.setSpacing(group.spacing())\n\t        self.m_viewportGroup.setGridMaximumWidth(group.getGridMaximumWidth())\n\t        self.m_viewportGroup.setGridMinimumWidth(group.getGridMinimumWidth())\n\t        self.m_viewportGroup.setRecalcGridSizeBlock(False)\n\t        self.m_viewportGroup.recalcGridSize(self.m_viewportGroup.height())\n\t        self.m_viewportGroup.setHorizontalScrollBarPolicy(Qt.ScrollBarAlwaysOff)\n\t        self.m_viewportGroup.setVerticalScrollBarPolicy(Qt.ScrollBarAlwaysOff)\n", "        self.m_viewportGroup.setModel(group.model())\n\t        self.m_viewportGroup.show()\n\t    def _ensureGetPopupViewPort(self) -> RibbonGalleryViewport:\n\t        if not self.m_popupWidget:\n\t            self.m_popupWidget = RibbonGalleryViewport(self)\n\t        return self.m_popupWidget\n\t    # signals\n\t    triggered = pyqtSignal(QAction)\n\t    hovered = pyqtSignal(QAction)\n\t    s_galleryButtonMaximumWidth = 15\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonDrawHelper.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import Qt, QSize, QRect\n\tfrom PyQt5.QtGui import QPixmap, QIcon, QPainter\n\tfrom PyQt5.QtWidgets import QWidget, QStyleOption, QStyle\n\tclass RibbonDrawHelper:\n\t    @staticmethod\n\t    def iconToPixmap(icon: QIcon, widget: QWidget, opt: QStyleOption, icon_size: QSize) -> QPixmap:\n\t        mode = QIcon.Normal\n", "        if not (opt.state & QStyle.State_Enabled):\n\t            mode = QIcon.Disabled\n\t        elif (opt.state & QStyle.State_MouseOver) and (opt.state & QStyle.State_AutoRaise):\n\t            mode = QIcon.Active\n\t        state = QIcon.Off\n\t        if (opt.state & QStyle.State_Selected) or (opt.state & QStyle.State_On):\n\t            state = QIcon.On\n\t        return icon.pixmap(widget.window().windowHandle(), icon_size, mode, state)\n\t    @staticmethod\n\t    def drawIcon(icon: QIcon, painter: QPainter, opt: QStyleOption, *args):\n", "        \"\"\"\n\t        drawIcon(QIcon, QPainter, QStyleOption, x: int, y: int, width: int, height: int)\n\t        drawIcon(QIcon, QPainter, QStyleOption, rect: QRect)\n\t        \"\"\"\n\t        if len(args) < 1:\n\t            return\n\t        if isinstance(args[0], int):\n\t            rect = QRect(args[0], args[1], args[2], args[3])\n\t        else:\n\t            rect = args[0]\n", "        mode = QIcon.Normal\n\t        if not (opt.state & QStyle.State_Enabled):\n\t            mode = QIcon.Disabled\n\t        elif (opt.state & QStyle.State_MouseOver) and (opt.state & QStyle.State_AutoRaise):\n\t            mode = QIcon.Active\n\t        state = QIcon.Off\n\t        if (opt.state & QStyle.State_Selected) or (opt.state & QStyle.State_On):\n\t            state = QIcon.On\n\t        icon.paint(painter, rect, Qt.AlignCenter, mode, state)\n\t    @staticmethod\n", "    def iconActualSize(icon: QIcon, opt: QStyleOption, icon_size: QSize) -> QSize:\n\t        mode = QIcon.Normal\n\t        if not (opt.state & QStyle.State_Enabled):\n\t            mode = QIcon.Disabled\n\t        elif (opt.state & QStyle.State_MouseOver) and (opt.state & QStyle.State_AutoRaise):\n\t            mode = QIcon.Active\n\t        state = QIcon.Off\n\t        if (opt.state & QStyle.State_Selected) or (opt.state & QStyle.State_On):\n\t            state = QIcon.On\n\t        return icon.actualSize(icon_size, mode, state)\n", "    @staticmethod\n\t    def drawText(text: str, painter: QPainter, opt: QStyleOption, align, *args):\n\t        \"\"\"\n\t        drawText(str, QPainter, QStyleOption, Qt.Alignment, x: int, y: int, width: int, height: int)\n\t        drawText(str, QPainter, QStyleOption, Qt.Alignment, rect: QRect)\n\t        \"\"\"\n\t        if len(args) < 1:\n\t            return\n\t        if isinstance(args[0], int):\n\t            rect = QRect(args[0], args[1], args[2], args[3])\n", "        else:\n\t            rect = args[0]\n\t        painter.drawItemText(rect, align, opt.palette, opt.state & QStyle.State_Enabled, text)\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonQuickAccessBar.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtWidgets import QAction, QWidget, QMenu, QToolButton\n\tfrom .QxRibbonContainers import RibbonCtrlContainer\n\tfrom .QxRibbonButtonGroup import RibbonButtonGroup\n\tclass RibbonQuickAccessBar(RibbonCtrlContainer):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_buttonGroup = RibbonButtonGroup(self)\n", "        self.setWidget(self.m_buttonGroup)\n\t    def addSeparator(self):\n\t        self.m_buttonGroup.addSeparator()\n\t    def addAction(self, action: QAction):\n\t        self.m_buttonGroup.addAction(action)\n\t    def addWidget(self, w: QWidget):\n\t        self.m_buttonGroup.addWidget(w)\n\t    def addMenu(self, m: QMenu, pop_mode=QToolButton.InstantPopup):\n\t        self.m_buttonGroup.addMenu(m, pop_mode)\n"]}
{"filename": "pyqt/PyRibbon/QxRibbon.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tQX_RIBBON_VERSION_STR = \"0.1.0\"\n\tclass Ribbon:\n\t    \"\"\"Microsoft Ribbon for PyQt\"\"\"\n\t    @staticmethod\n\t    def version() -> str:\n\t        return QX_RIBBON_VERSION_STR\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonButtonGroup.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import List\n\tfrom PyQt5.QtCore import Qt, QSize, pyqtSignal, QEvent\n\tfrom PyQt5.QtGui import QActionEvent\n\tfrom PyQt5.QtWidgets import QFrame, QAction, QMenu, QToolButton, QWidget, \\\n\t    QHBoxLayout, QSizePolicy, QWidgetAction\n\tfrom .QxRibbonButton import RibbonButton\n\tfrom .QxRibbonControls import RibbonSeparator\n", "class RibbonButtonGroupItem:\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonButtonGroupItem()\n\t        RibbonButtonGroupItem(a: QAction, w: QWidget, cw: bool)\n\t        \"\"\"\n\t        if len(args) < 3:\n\t            self.action: QAction = None\n\t            self.widget: QWidget = None\n\t            self.customWidget: bool = False\n", "        else:\n\t            self.action: QAction = args[0]\n\t            self.widget: QWidget = args[1]\n\t            self.customWidget: bool = args[2]\n\t    def compare(self, *args) -> bool:\n\t        \"\"\"\n\t        compare(action: QAction) -> bool\n\t        compare(w: RibbonButtonGroupItem) -> bool\n\t        \"\"\"\n\t        if len(args) < 1:\n", "            return False\n\t        if isinstance(args[0], QAction):\n\t            return self.action == args[0]\n\t        elif isinstance(args[0], RibbonButtonGroupItem):\n\t            return self.action == args[0].action\n\t        else:\n\t            return False\n\tclass RibbonButtonGroup(QFrame):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n", "        self.m_items: List[RibbonButtonGroupItem] = list()\n\t        layout = QHBoxLayout()\n\t        layout.setContentsMargins(0, 0, 0, 0)\n\t        layout.setSpacing(0)\n\t        self.setLayout(layout)\n\t        self.setSizePolicy(QSizePolicy.Maximum, QSizePolicy.Maximum)\n\t    def addAction(self, *args) -> QAction:\n\t        \"\"\"\n\t        addAction(a: QAction) -> QAction\n\t        addAction(text: str, icon: QIcon, pop_mode=QToolButton.InstantPopup) -> QAction\n", "        \"\"\"\n\t        if len(args) == 1:\n\t            super().addAction(args[0])\n\t            return args[0]\n\t        else:\n\t            a = QAction(args[1], args[0], self)\n\t            super().addAction(a)\n\t            pop_mode = QToolButton.InstantPopup if len(args) < 3 else args[2]\n\t            if self.m_items:\n\t                button: RibbonButton = self.m_items[-1].widget\n", "                button.setPopupMode(pop_mode)\n\t            return a\n\t    def addMenu(self, menu: QMenu, pop_mode=QToolButton.InstantPopup) -> QAction:\n\t        a = menu.menuAction()\n\t        self.addAction(a)\n\t        btn = self.m_items[-1].widget\n\t        btn.setPopupMode(pop_mode)\n\t        return a\n\t    def addSeparator(self) -> QAction:\n\t        a = QAction(self)\n", "        a.setSeparator(True)\n\t        self.addAction(a)\n\t        return a\n\t    def addWidget(self, w: QWidget):\n\t        a = QWidgetAction(self)\n\t        a.setDefaultWidget(w)\n\t        w.setAttribute(Qt.WA_Hover)\n\t        self.addAction(a)\n\t        return a\n\t    def hideWidget(self, action: QAction):\n", "        i = len(self.m_items)\n\t        for i, it in enumerate(self.m_items):\n\t            if isinstance(it.action, QWidgetAction) and it.action == action:\n\t                it.widget.hide()\n\t                widgetAction: QWidgetAction = it.action\n\t                widgetAction.releaseWidget(it.widget)\n\t                break\n\t        if i < len(self.m_items):\n\t            self.m_items.pop(i)\n\t    def sizeHint(self) -> QSize:\n", "        return self.layout().sizeHint()\n\t    def minimumSizeHint(self) -> QSize:\n\t        return self.layout().minimumSize()\n\t    def actionEvent(self, e: QActionEvent):\n\t        item = RibbonButtonGroupItem()\n\t        item.action = e.action()\n\t        if e.type() == QEvent.ActionAdded:\n\t            if isinstance(item.action, QWidgetAction):\n\t                item.action.setParent(self)\n\t                widgetAction: QWidgetAction = item.action\n", "                \"\"\"here widgetAction.requestWidget(self) is not widgetAction.defaultWidget()\n\t                if using requestWidget will cause defaultWidget was deleted by python garbage collect\n\t                see QWidgetAction source code, using defaultWidget() and set widget parent as self.\n\t                \"\"\"\n\t                # item.widget = widgetAction.requestWidget(self)\n\t                item.widget = widgetAction.defaultWidget()\n\t                if item.widget:\n\t                    item.widget.setParent(self)\n\t                    item.widget.setAttribute(Qt.WA_LayoutUsesWidgetRect)\n\t                    item.widget.show()\n", "                    item.customWidget = True\n\t            elif item.action.isSeparator():\n\t                sp = RibbonSeparator(self)\n\t                sp.setTopBottomMargins(3, 3)\n\t                item.widget = sp\n\t            if not item.widget:\n\t                btn = RibbonButton(self)\n\t                btn.setAutoRaise(True)\n\t                btn.setFocusPolicy(Qt.NoFocus)\n\t                btn.setButtonType(RibbonButton.SmallButton)\n", "                btn.setToolButtonStyle(Qt.ToolButtonIconOnly)\n\t                btn.setDefaultAction(item.action)\n\t                btn.triggered.connect(self.actionTriggered)\n\t                item.widget = btn\n\t            self.layout().addWidget(item.widget)\n\t            self.m_items.append(item)\n\t        elif e.type() == QEvent.ActionChanged:\n\t            self.layout().invalidate()\n\t        elif e.type() == QEvent.ActionRemoved:\n\t            # FIXME: whay clear all items?\n", "            item.action.disconnect()\n\t            for it in self.m_items:\n\t                if isinstance(it.action, QWidgetAction) and it.customWidget:\n\t                    widgetAction: QWidgetAction = it.action\n\t                    widgetAction.releaseWidget(it.widget)\n\t                else:\n\t                    it.widget.hide()\n\t                    it.widget.deleteLater()\n\t            self.m_items.clear()\n\t            self.layout().invalidate()\n", "    # signals\n\t    actionTriggered = pyqtSignal(QAction)\n"]}
{"filename": "pyqt/PyRibbon/FramelessHelper.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom typing import Dict\n\tfrom PyQt5.QtCore import Qt\n\tfrom PyQt5.QtCore import QObject, QPoint, QRect, QEvent\n\tfrom PyQt5.QtWidgets import QWidget, QRubberBand\n\tclass CursorPosCalculator:\n\t    \"\"\"\n\t    计算鼠标是否位于左、上、右、下、左上角、左下角、右上角、右下角\n", "    \"\"\"\n\t    m_nBorderWidth = 5\n\t    m_nTitleHeight = 30\n\t    def __init__(self):\n\t        self.reset()\n\t    def reset(self):\n\t        self.m_bOnEdges = False\n\t        self.m_bOnLeftEdge = False\n\t        self.m_bOnRightEdge = False\n\t        self.m_bOnTopEdge = False\n", "        self.m_bOnBottomEdge = False\n\t        self.m_bOnTopLeftEdge = False\n\t        self.m_bOnBottomLeftEdge = False\n\t        self.m_bOnTopRightEdge = False\n\t        self.m_bOnBottomRightEdge = False\n\t    def recalculate(self, pos: QPoint, rect: QRect):\n\t        mouseX = pos.x()\n\t        mouseY = pos.y()\n\t        x = rect.x()\n\t        y = rect.y()\n", "        width = rect.width()\n\t        height = rect.height()\n\t        self.m_bOnLeftEdge = (mouseX >= x) and (mouseX <= x + self.m_nBorderWidth)\n\t        self.m_bOnRightEdge = (mouseX >= x + width - self.m_nBorderWidth) and (mouseX <= x + width)\n\t        self.m_bOnTopEdge = (mouseY >= y) and (mouseY <= y + self.m_nBorderWidth)\n\t        self.m_bOnBottomEdge = (mouseY >= y + height - self.m_nBorderWidth) and (mouseY <= y + height)\n\t        self.m_bOnTopLeftEdge = self.m_bOnTopEdge and self.m_bOnLeftEdge\n\t        self.m_bOnBottomLeftEdge = self.m_bOnBottomEdge and self.m_bOnLeftEdge\n\t        self.m_bOnTopRightEdge = self.m_bOnTopEdge and self.m_bOnRightEdge\n\t        self.m_bOnBottomRightEdge = self.m_bOnBottomEdge and self.m_bOnRightEdge\n", "        self.m_bOnEdges = self.m_bOnLeftEdge or self.m_bOnRightEdge or self.m_bOnTopEdge or self.m_bOnBottomEdge\n\tclass WidgetData:\n\t    \"\"\"更新鼠标样式、移动窗体、缩放窗体\"\"\"\n\t    def __init__(self, mainClass, parent):  # parent: SARibbonMainWindow\n\t        self.obj: FramelessHelper = mainClass\n\t        self.m_pWidget: QWidget = parent\n\t        self.m_pWidget.setMouseTracking(True)\n\t        self.m_pWidget.setAttribute(Qt.WA_Hover, True)\n\t        self.m_windowFlags = self.m_pWidget.windowFlags()\n\t        self.m_bLeftButtonPressed = False\n", "        self.m_bCursorShapeChanged = False\n\t        self.m_bLeftButtonTitlePressed = False\n\t        self.m_pRubberBand: QRubberBand = None\n\t        self.m_ptDragPos = QPoint()\n\t        self.m_pressedMousePos = CursorPosCalculator()\n\t        self.m_moveMousePos = CursorPosCalculator()\n\t        self.updateRubberBandStatus()\n\t    def widget(self) -> QWidget:\n\t        return self.m_pWidget\n\t    def handleWidgetEvent(self, event) -> bool:\n", "        \"\"\"\n\t        处理鼠标事件-划过、按下、释放、移动\n\t        \"\"\"\n\t        edict = {\n\t            QEvent.MouseButtonPress: self.handleMousePressEvent,\n\t            QEvent.MouseButtonRelease: self.handleMouseReleaseEvent,\n\t            QEvent.MouseMove: self.handleMouseMoveEvent,\n\t            QEvent.Leave: self.handleLeaveEvent,\n\t            QEvent.HoverMove: self.handleHoverMoveEvent,\n\t            QEvent.MouseButtonDblClick: self.handleDoubleClickedMouseEvent,\n", "        }\n\t        etype = event.type()\n\t        if etype in edict:\n\t            return edict[etype](event)\n\t        print('Unknow Event Type: %s' % etype)\n\t        return False\n\t    def updateRubberBandStatus(self):\n\t        \"\"\"\n\t        更新橡皮筋状态\n\t        \"\"\"\n", "        if self.obj.m_bRubberBandOnMove or self.obj.m_bRubberBandOnResize:\n\t            if self.m_pRubberBand is None:\n\t                self.m_pRubberBand = QRubberBand(QRubberBand.Rectangle)\n\t        else:\n\t            self.m_pRubberBand = None\n\t    def updateCursorShape(self, pos: QPoint):\n\t        \"\"\"\n\t        更新鼠标样式\n\t        \"\"\"\n\t        if self.m_pWidget.isFullScreen() or self.m_pWidget.isMaximized():\n", "            if self.m_bCursorShapeChanged:\n\t                self.m_pWidget.unsetCursor()\n\t            return\n\t        self.m_moveMousePos.recalculate(pos, self.m_pWidget.frameGeometry())\n\t        if self.m_moveMousePos.m_bOnTopLeftEdge or self.m_moveMousePos.m_bOnBottomRightEdge:\n\t            self.m_pWidget.setCursor(Qt.SizeFDiagCursor)\n\t            self.m_bCursorShapeChanged = True\n\t        elif self.m_moveMousePos.m_bOnTopRightEdge or self.m_moveMousePos.m_bOnBottomLeftEdge:\n\t            self.m_pWidget.setCursor(Qt.SizeBDiagCursor)\n\t            self.m_bCursorShapeChanged = True\n", "        elif self.m_moveMousePos.m_bOnLeftEdge or self.m_moveMousePos.m_bOnRightEdge:\n\t            self.m_pWidget.setCursor(Qt.SizeHorCursor)\n\t            self.m_bCursorShapeChanged = True\n\t        elif self.m_moveMousePos.m_bOnTopEdge or self.m_moveMousePos.m_bOnBottomEdge:\n\t            self.m_pWidget.setCursor(Qt.SizeVerCursor)\n\t            self.m_bCursorShapeChanged = True\n\t        elif self.m_bCursorShapeChanged:\n\t            self.m_pWidget.unsetCursor()\n\t            self.m_bCursorShapeChanged = False\n\t    def resizeWidget(self, pos: QPoint):\n", "        \"\"\"窗口重置大小\"\"\"\n\t        if self.obj.m_bRubberBandOnResize:\n\t            origRect = self.m_pRubberBand.frameGeometry()\n\t        else:\n\t            origRect = self.m_pWidget.frameGeometry()\n\t        left, top, right, bottom = origRect.getCoords()\n\t        minWidth = self.m_pWidget.minimumWidth()\n\t        minHeight = self.m_pWidget.minimumHeight()\n\t        if self.m_pressedMousePos.m_bOnTopLeftEdge:\n\t            left = pos.x()\n", "            top = pos.y()\n\t        elif self.m_pressedMousePos.m_bOnBottomLeftEdge:\n\t            left = pos.x()\n\t            bottom = pos.y()\n\t        elif self.m_pressedMousePos.m_bOnTopRightEdge:\n\t            right = pos.x()\n\t            top = pos.y()\n\t        elif self.m_pressedMousePos.m_bOnBottomRightEdge:\n\t            right = pos.x()\n\t            bottom = pos.y()\n", "        elif self.m_pressedMousePos.m_bOnLeftEdge:\n\t            left = pos.x()\n\t        elif self.m_pressedMousePos.m_bOnRightEdge:\n\t            right = pos.x()\n\t        elif self.m_pressedMousePos.m_bOnTopEdge:\n\t            top = pos.y()\n\t        elif self.m_pressedMousePos.m_bOnBottomEdge:\n\t            bottom = pos.y()\n\t        newRect = QRect(QPoint(left, top), QPoint(right, bottom))\n\t        if newRect.isValid():\n", "            if minWidth > newRect.width():\n\t                if left != origRect.left():\n\t                    newRect.setLeft(origRect.left())\n\t                else:\n\t                    newRect.setRight(origRect.right())\n\t            if minHeight > newRect.height():\n\t                if top != origRect.top():\n\t                    newRect.setTop(origRect.top())\n\t                else:\n\t                    newRect.setBottom(origRect.bottom())\n", "            if self.obj.m_bRubberBandOnResize:\n\t                self.m_pRubberBand.setGeometry(newRect)\n\t            else:\n\t                self.m_pWidget.setGeometry(newRect)\n\t    def moveWidget(self, pos: QPoint):\n\t        \"\"\"移动窗口\"\"\"\n\t        if self.obj.m_bRubberBandOnMove:\n\t            self.m_pRubberBand.move(pos - self.m_ptDragPos)\n\t        else:\n\t            self.m_pWidget.move(pos - self.m_ptDragPos)\n", "    def handleMousePressEvent(self, event) -> bool:\n\t        if event.button() == Qt.LeftButton:\n\t            self.m_bLeftButtonPressed = True\n\t            self.m_bLeftButtonTitlePressed = (event.pos().y() < self.m_moveMousePos.m_nTitleHeight)\n\t            frameRect = self.m_pWidget.frameGeometry()\n\t            self.m_pressedMousePos.recalculate(event.globalPos(), frameRect)\n\t            self.m_ptDragPos = event.globalPos() - frameRect.topLeft()\n\t            if self.m_pressedMousePos.m_bOnEdges:\n\t                # 窗口在最大化状态时，点击标题栏不做任何处理\n\t                if self.m_pWidget.isMaximized():\n", "                    return False\n\t                if self.obj.m_bRubberBandOnResize:\n\t                    self.m_pRubberBand.setGeometry(frameRect)\n\t                    self.m_pRubberBand.show()\n\t                    return True\n\t            elif self.obj.m_bRubberBandOnMove and self.m_bLeftButtonTitlePressed:\n\t                # 窗口在最大化状态时，点击标题栏不做任何处理\n\t                if self.m_pWidget.isMaximized():\n\t                    return False\n\t                self.m_pRubberBand.setGeometry(frameRect)\n", "                self.m_pRubberBand.show()\n\t                return True\n\t        return False\n\t    def handleMouseReleaseEvent(self, event) -> bool:\n\t        if event.button() == Qt.LeftButton:\n\t            self.m_bLeftButtonPressed = False\n\t            self.m_bLeftButtonTitlePressed = False\n\t            self.m_pressedMousePos.reset()\n\t            if self.m_pRubberBand and self.m_pRubberBand.isVisible():\n\t                self.m_pRubberBand.hide()\n", "                self.m_pWidget.setGeometry(self.m_pRubberBand.geometry())\n\t                return True\n\t        return False\n\t    def handleMouseMoveEvent(self, event) -> bool:\n\t        if self.m_bLeftButtonPressed:\n\t            if self.obj.m_bWidgetResizable and self.m_pressedMousePos.m_bOnEdges:\n\t                if self.m_pWidget.isMaximized():\n\t                    # 窗口在最大化状态时，点击边界不做任何处理\n\t                    return False\n\t                self.resizeWidget(event.globalPos())\n", "                return True\n\t            elif self.obj.m_bWidgetMovable and self.m_bLeftButtonTitlePressed:\n\t                if self.m_pWidget.isMaximized():\n\t                    # 先求出窗口到鼠标的相对位置\n\t                    normalGeometry = self.m_pWidget.normalGeometry()\n\t                    self.m_pWidget.showNormal()\n\t                    # p = event.globalPos()\n\t                    ry = event.globalY()\n\t                    rx = event.globalX()\n\t                    ry -= 10\n", "                    rx -= (normalGeometry.width() / 2)\n\t                    self.m_pWidget.move(int(rx), int(ry))\n\t                    # 这时要重置m_ptDragPos\n\t                    self.m_ptDragPos = QPoint(int(normalGeometry.width() / 2), 10)\n\t                    return True\n\t                self.moveWidget(event.globalPos())\n\t                return True\n\t            return False\n\t        elif self.obj.m_bWidgetResizable:\n\t            self.updateCursorShape(event.globalPos())\n", "        return False\n\t    def handleLeaveEvent(self, event) -> bool:\n\t        if not self.m_bLeftButtonPressed:\n\t            self.m_pWidget.unsetCursor()\n\t            return True\n\t        return False\n\t    def handleHoverMoveEvent(self, event) -> bool:\n\t        if self.obj.m_bWidgetResizable:\n\t            self.updateCursorShape(self.m_pWidget.mapToGlobal(event.pos()))\n\t        return False\n", "    def handleDoubleClickedMouseEvent(self, event) -> bool:\n\t        if event.button() == Qt.LeftButton:\n\t            if self.m_pWidget and (self.m_pWidget.windowButtonFlags() & Qt.WindowMaximizeButtonHint):\n\t                # 在最大化按钮显示时才进行shownormal处理\n\t                if event.pos().y() < self.m_moveMousePos.m_nTitleHeight:\n\t                    if self.m_pWidget.isMaximized():\n\t                        self.m_pWidget.showNormal()\n\t                    else:\n\t                        self.m_pWidget.showMaximized()\n\t                    return True\n", "        return False\n\tclass FramelessHelper(QObject):\n\t    \"\"\"设置主类窗体效果\"\"\"\n\t    def __init__(self, parent):\n\t        super().__init__(parent)\n\t        # 存储界面对应的数据集合，以及是否可移动、可缩放属性\n\t        self.m_bWidgetMovable = True\n\t        self.m_bWidgetResizable = True\n\t        self.m_bRubberBandOnMove = False\n\t        self.m_bRubberBandOnResize = False\n", "        self.m_widgetDataHash: Dict[QWidget, WidgetData] = dict()\n\t        if parent:\n\t            w: QWidget = parent\n\t            w.setWindowFlags(w.windowFlags() | Qt.FramelessWindowHint)  # 设置无边框\n\t            self.activateOn(w)  # 激活当前窗体\n\t    def activateOn(self, parent: QWidget):\n\t        \"\"\"激活窗体事件\"\"\"\n\t        if parent not in self.m_widgetDataHash:\n\t            data = WidgetData(self, parent)\n\t            self.m_widgetDataHash[parent] = data\n", "            parent.installEventFilter(self)\n\t    def removeFrom(self, parent: QWidget):\n\t        \"\"\"移除窗体事件\"\"\"\n\t        data = self.m_widgetDataHash.get(parent, None)\n\t        if data:\n\t            self.m_widgetDataHash.pop(parent)\n\t            parent.removeEventFilter(self)\n\t    def setWidgetMovable(self, movable: bool):\n\t        \"\"\"设置窗体移动\"\"\"\n\t        self.m_bWidgetMovable = movable\n", "    def setWidgetResizable(self, resizable: bool):\n\t        \"\"\"设置窗体缩放\"\"\"\n\t        self.m_bWidgetResizable = resizable\n\t    def setRubberBandOnMove(self, movable: bool):\n\t        \"\"\"设置橡皮筋移动\"\"\"\n\t        self.m_bRubberBandOnMove = movable\n\t        dataList = self.m_widgetDataHash.values()\n\t        for data in dataList:\n\t            data.updateRubberBandStatus()\n\t    def setRubberBandOnResize(self, resizable: bool):\n", "        \"\"\"设置橡皮筋缩放\"\"\"\n\t        self.m_bRubberBandOnResize = resizable\n\t        dataList = self.m_widgetDataHash.values()\n\t        for data in dataList:\n\t            data.updateRubberBandStatus()\n\t    def setBorderWidth(self, width: int):\n\t        \"\"\"设置边框的宽度\"\"\"\n\t        if width > 0:\n\t            CursorPosCalculator.m_nBorderWidth = width\n\t    def setTitleHeight(self, height: int):\n", "        \"\"\"设置标题栏高度\"\"\"\n\t        if height > 0:\n\t            CursorPosCalculator.m_nTitleHeight = height\n\t    def widgetResizable(self) -> bool:\n\t        return self.m_bWidgetResizable\n\t    def widgetMovable(self) -> bool:\n\t        return self.m_bWidgetMovable\n\t    def rubberBandOnMove(self) -> bool:\n\t        return self.m_bRubberBandOnMove\n\t    def rubberBandOnResisze(self) -> bool:\n", "        return self.m_bRubberBandOnResize\n\t    def borderWidth(self) -> int:\n\t        return CursorPosCalculator.m_nBorderWidth\n\t    def titleHeight(self) -> int:\n\t        return CursorPosCalculator.m_nTitleHeight\n\t    def eventFilter(self, obj, event: QEvent):\n\t        filter_list = (\n\t            QEvent.MouseMove,\n\t            QEvent.HoverMove,\n\t            QEvent.MouseButtonPress,\n", "            QEvent.MouseButtonRelease,\n\t            QEvent.MouseButtonDblClick,\n\t            QEvent.Leave,\n\t        )\n\t        if event.type() in filter_list:\n\t            data = self.m_widgetDataHash.get(obj, None)\n\t            if data:\n\t                return data.handleWidgetEvent(event)\n\t        return super().eventFilter(obj, event)\n\tif __name__ == '__main__':\n", "    from PyQt5.QtWidgets import QApplication\n\t    app = QApplication([])\n\t    mainWindow = QWidget()\n\t    framelessHelper = FramelessHelper(mainWindow)\n\t    mainWindow.setMinimumWidth(500)\n\t    mainWindow.show()\n\t    app.exec()\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonRes_rc.py", "chunked_list": ["# -*- coding: utf-8 -*-\n\t# Resource object code\n\t#\n\t# Created by: The Resource Compiler for PyQt5 (Qt v5.15.2)\n\t#\n\t# WARNING! All changes made in this file will be lost!\n\tfrom PyQt5 import QtCore\n\tqt_resource_data = b\"\\\n\t\\x00\\x00\\x01\\x5d\\\n\t\\x89\\\n", "\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x04\\x03\\x00\\x00\\x00\\x7f\\x1c\\xd2\\x8e\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x0f\\\n\t\\x50\\x4c\\x54\\x45\\xff\\xff\\xff\\x00\\x00\\x00\\xcc\\xcc\\xcc\\x05\\x07\\x08\\\n\t\\xff\\xff\\xff\\x0e\\x9b\\x7e\\x75\\x00\\x00\\x00\\x01\\x74\\x52\\x4e\\x53\\x00\\\n\t\\x40\\xe6\\xd8\\x66\\x00\\x00\\x00\\x01\\x62\\x4b\\x47\\x44\\x00\\x88\\x05\\x1d\\\n\t\\x48\\x00\\x00\\x00\\x09\\x70\\x48\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\\n", "\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\\n\t\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\x57\\x2d\\x00\\x00\\x00\\x29\\x49\\x44\\x41\\\n\t\\x54\\x08\\xd7\\x63\\x10\\x62\\x60\\x60\\x50\\x64\\x50\\x56\\x60\\x60\\x32\\x02\\\n\t\\x21\\x20\\x83\\x41\\x59\\xc9\\x08\\x28\\xc8\\x64\\xac\\x00\\x27\\xc1\\x22\\x10\\\n\t\\x59\\x88\\x4a\\xb0\\x2e\\x00\\x72\\xd8\\x03\\xdb\\xcb\\xfc\\xbc\\xac\\x00\\x00\\\n\t\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\\n\t\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\\n\t\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\x38\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\\n\t\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\\n\t\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\\n", "\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\x30\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\\n\t\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x4b\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x09\\x00\\x00\\x00\\x09\\x04\\x03\\x00\\x00\\x00\\x12\\xbf\\x1b\\x23\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x26\\x00\\x00\\x80\\x84\\\n\t\\x00\\x00\\xfa\\x00\\x00\\x00\\x80\\xe8\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x70\\x9c\\xba\\x51\\x3c\\x00\\x00\\x00\\x12\\\n", "\\x50\\x4c\\x54\\x45\\xff\\xff\\xff\\x22\\x22\\x23\\x2d\\x2d\\x2e\\x27\\x27\\x28\\\n\t\\x22\\x22\\x23\\xff\\xff\\xff\\x56\\x4e\\xf2\\x3b\\x00\\x00\\x00\\x04\\x74\\x52\\\n\t\\x4e\\x53\\x00\\x00\\xe6\\xf3\\x9f\\x03\\x91\\x56\\x00\\x00\\x00\\x01\\x62\\x4b\\\n\t\\x47\\x44\\x05\\xf8\\x6f\\xe9\\xc7\\x00\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\\n\t\\xe6\\x04\\x0f\\x06\\x01\\x19\\xd8\\xd7\\x01\\x9a\\x00\\x00\\x00\\x26\\x49\\x44\\\n\t\\x41\\x54\\x08\\xd7\\x63\\x60\\x00\\x03\\x26\\x25\\x25\\x05\\x20\\x29\\x28\\x28\\\n\t\\x80\\x20\\x0d\\x85\\x40\\xa4\\xb0\\x12\\x88\\x14\\x72\\x02\\xa9\\x52\\x52\\x82\\\n\t\\xa8\\x66\\x00\\x00\\x37\\xe2\\x02\\x18\\x83\\x28\\x69\\xeb\\x00\\x00\\x00\\x25\\\n\t\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\\n\t\\x32\\x30\\x31\\x37\\x2d\\x31\\x32\\x2d\\x30\\x39\\x54\\x31\\x34\\x3a\\x33\\x36\\\n", "\\x3a\\x31\\x36\\x2b\\x30\\x38\\x3a\\x30\\x30\\x70\\x8c\\xd2\\x0b\\x00\\x00\\x00\\\n\t\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\\n\t\\x00\\x32\\x30\\x32\\x32\\x2d\\x30\\x34\\x2d\\x31\\x34\\x54\\x32\\x32\\x3a\\x30\\\n\t\\x31\\x3a\\x32\\x35\\x2b\\x30\\x38\\x3a\\x30\\x30\\x52\\x37\\x87\\x05\\x00\\x00\\\n\t\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x01\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0b\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\xc8\\xf9\\x6c\\x08\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n", "\\x00\\x00\\x00\\x02\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\\n\t\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe4\\x07\\x01\\x07\\x1f\\x2d\\xc6\\x57\\x0c\\\n\t\\x2f\\x00\\x00\\x00\\x35\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\xfc\\xcf\\x80\\x0d\\\n\t\\x30\\x61\\x15\\x65\\x60\\x61\\x60\\x60\\x60\\x60\\x44\\xd1\\xf2\\x9f\\x11\\xaa\\\n\t\\xfa\\x3f\\x23\\xaa\\x20\\xdc\\x10\\x98\\x04\\x8c\\x66\\x42\\x56\\x85\\xd0\\xc5\\\n\t\\x88\\xdd\\x25\\x38\\xac\\x64\\x24\\xc9\\xdd\\x00\\x39\\x39\\x0d\\x13\\xc6\\xeb\\\n\t\\x0c\\x98\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\\n\t\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x31\\x37\\x2d\\x31\\x32\\x2d\\x30\\x39\\\n\t\\x54\\x31\\x34\\x3a\\x33\\x36\\x3a\\x31\\x36\\x2b\\x30\\x38\\x3a\\x30\\x30\\x70\\\n\t\\x8c\\xd2\\x0b\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\\n", "\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\x30\\x2d\\x30\\x36\\x2d\\x33\\\n\t\\x30\\x54\\x32\\x33\\x3a\\x33\\x31\\x3a\\x34\\x35\\x2b\\x30\\x38\\x3a\\x30\\x30\\\n\t\\x8a\\xc5\\x22\\x37\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\\n\t\\x00\\x00\\x01\\x45\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n", "\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n\t\\x57\\x2d\\x00\\x00\\x00\\x38\\x49\\x44\\x41\\x54\\x08\\xd7\\xa5\\x8e\\x31\\x0a\\\n\t\\xc0\\x30\\x10\\xc3\\xa4\\x70\\xff\\xff\\xb2\\x3b\\x04\\x92\\xf6\\x9a\\x2d\\x5a\\\n\t\\x0c\\xc2\\x60\\x1b\\xc0\\xf0\\xa1\\x66\\xc4\\xad\\x8c\\xb4\\x56\\x34\\xd5\\x5b\\\n\t\\x00\\x83\\x03\\x17\\xd2\\xac\\x4b\\xef\\x75\\xa8\\xff\\x75\\x78\\x00\\x41\\x61\\\n\t\\x0c\\x19\\x36\\xff\\xb6\\xe6\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\\n", "\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\\n\t\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\x38\\\n\t\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\\n\t\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\x2d\\\n\t\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\x30\\\n\t\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\\n\t\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x2d\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n", "\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n\t\\x57\\x2d\\x00\\x00\\x00\\x20\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\x64\\xf8\\xcf\\\n\t\\x80\\x01\\x58\\x18\\x18\\xfe\\x33\\xa2\\x0a\\x31\\xfe\\x67\\x62\\xc0\\x02\\x06\\\n", "\\x56\\x90\\x11\\x9b\\xe3\\x01\\x4f\\xa6\\x04\\x13\\x9f\\x6c\\x81\\xe4\\x00\\x00\\\n\t\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\\n\t\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\\n\t\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\x38\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\\n\t\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\\n\t\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\\n\t\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\x30\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\\n\t\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x45\\\n\t\\x89\\\n", "\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n\t\\x57\\x2d\\x00\\x00\\x00\\x38\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\xf8\\xf0\\xe3\\\n", "\\x4c\\xc3\\x7f\\x06\\x04\\x3c\\xd3\\xf0\\xe1\\x07\\xc3\\x99\\x86\\xef\\xff\\x11\\\n\t\\xc2\\x10\\x1e\\x9c\\xf1\\x1f\\x89\\x85\\x24\\x8f\\x90\\x44\\xd2\\x86\\x30\\x86\\\n\t\\x89\\x01\\x1b\\xc0\\xa1\\x1d\\x8b\\x45\\x58\\x9d\\x84\\xcd\\xf1\\x00\\x21\\xd8\\\n\t\\x73\\xd5\\x85\\x2e\\x39\\x14\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\\n\t\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\\n\t\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\x38\\\n\t\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\\n\t\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\x2d\\\n\t\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\x30\\\n\t\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\\n", "\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x00\\xfc\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0b\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\xc8\\xf9\\x6c\\x08\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x02\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\\n\t\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe4\\x07\\x01\\x07\\x1f\\x2d\\xc6\\x57\\x0c\\\n\t\\x2f\\x00\\x00\\x00\\x30\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\xfc\\xcf\\x80\\x0d\\\n\t\\x30\\x31\\x90\\x22\\xcc\\xc2\\xc0\\xc0\\xc0\\xc0\\x88\\x62\\xd2\\x7f\\x46\\xa8\\\n", "\\xea\\xff\\x8c\\xa8\\x82\\x70\\x43\\x60\\x12\\x30\\x9a\\x09\\x59\\x15\\x42\\x17\\\n\t\\x23\\x35\\x1c\\x08\\x00\\xcb\\xec\\x0a\\x13\\xe2\\x0e\\x8b\\x76\\x00\\x00\\x00\\\n\t\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\\n\t\\x00\\x32\\x30\\x31\\x37\\x2d\\x31\\x32\\x2d\\x30\\x39\\x54\\x31\\x34\\x3a\\x33\\\n\t\\x36\\x3a\\x31\\x36\\x2b\\x30\\x38\\x3a\\x30\\x30\\x70\\x8c\\xd2\\x0b\\x00\\x00\\\n\t\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\\n\t\\x79\\x00\\x32\\x30\\x32\\x30\\x2d\\x30\\x36\\x2d\\x33\\x30\\x54\\x32\\x33\\x3a\\\n\t\\x33\\x31\\x3a\\x34\\x35\\x2b\\x30\\x38\\x3a\\x30\\x30\\x8a\\xc5\\x22\\x37\\x00\\\n\t\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x85\\\n", "\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n", "\\x57\\x2d\\x00\\x00\\x00\\x78\\x49\\x44\\x41\\x54\\x08\\xd7\\x8d\\xce\\x31\\x0a\\\n\t\\xc2\\x40\\x14\\x06\\xe1\\x79\\xef\\x16\\x56\\x06\\x0b\\x49\\x13\\xb0\\x09\\x1e\\\n\t\\xc4\\x6b\\x26\\xe4\\x1c\\x76\\xda\\x65\\x85\\xec\\xc6\\xca\\x7a\\x0f\\xb0\\xfb\\\n\t\\x5b\\x08\\x22\\x68\\xe1\\x94\\x5f\\x35\\x26\\xbe\\x73\\x7e\\x63\\xee\\x3f\\x21\\\n\t\\xf7\\x40\\xee\\x26\\xc5\\x50\\x4c\\x88\\x62\\x31\\x4c\\xca\\x1d\\x22\\x5d\\x07\\\n\t\\x2d\\xa9\\x58\\xb1\\x25\\x0d\\x8a\\x41\\x98\\xa8\\x76\\x9f\\x2f\\xfb\\xb6\\xc2\\\n\t\\xec\\x87\\xdb\\xb6\\x75\\x99\\x80\\x6a\\x6b\\x3c\\x37\\x70\\x5c\\x9b\\x9d\\x0b\\\n\t\\xec\\xb5\\x54\\xed\\x31\\xc2\\xe6\\xe4\\x82\\x37\\xfe\\xf1\\xf9\\x04\\x38\\xee\\\n\t\\x34\\x82\\x8d\\x0f\\x22\\x2c\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\\n\t\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\x30\\\n", "\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\x38\\\n\t\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\\n\t\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\x2d\\\n\t\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\x30\\\n\t\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\x44\\\n\t\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x26\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n", "\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n\t\\x57\\x2d\\x00\\x00\\x00\\x19\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\xfc\\xcf\\x80\\\n\t\\x09\\x98\\x18\\xa8\\x2f\\xc8\\xc8\\x80\\xc5\\x26\\x46\\x1a\\xd8\\x0e\\x00\\x91\\\n\t\\xcd\\x03\\x0f\\x56\\x2b\\x46\\x9c\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\x64\\\n", "\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x32\\x31\\x2d\\\n\t\\x30\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\x30\\x38\\x3a\\x31\\x32\\x2b\\x30\\\n\t\\x38\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\\n\t\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\x31\\\n\t\\x2d\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\x3a\\x33\\x31\\x3a\\x34\\x39\\x2b\\\n\t\\x30\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\x00\\x00\\x00\\x00\\x49\\x45\\x4e\\\n\t\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x01\\x87\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n", "\\x00\\x00\\x0a\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\x27\\x3b\\x07\\x36\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x20\\x63\\x48\\x52\\x4d\\x00\\x00\\x7a\\x25\\x00\\x00\\x80\\x83\\\n\t\\x00\\x00\\xf9\\xff\\x00\\x00\\x80\\xe9\\x00\\x00\\x75\\x30\\x00\\x00\\xea\\x60\\\n\t\\x00\\x00\\x3a\\x98\\x00\\x00\\x17\\x6f\\x92\\x5f\\xc5\\x46\\x00\\x00\\x00\\x02\\\n\t\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\x00\\x09\\x70\\x48\\\n\t\\x59\\x73\\x00\\x00\\x0b\\x13\\x00\\x00\\x0b\\x13\\x01\\x00\\x9a\\x9c\\x18\\x00\\\n\t\\x00\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe5\\x08\\x05\\x05\\x1f\\x31\\x17\\xbc\\\n\t\\x57\\x2d\\x00\\x00\\x00\\x7a\\x49\\x44\\x41\\x54\\x08\\xd7\\x8d\\x8e\\x21\\x0e\\\n\t\\x83\\x40\\x14\\x44\\xdf\\xdf\\x70\\x89\\x2a\\x36\\x55\\x35\\x24\\x35\\x84\\x83\\\n", "\\x70\\x4d\\x1a\\xce\\x51\\xb9\\x0e\\x04\\xbb\\x54\\xd5\\xc2\\x01\\x76\\xa7\\x02\\\n\t\\x51\\x51\\x44\\x67\\xc4\\x4b\\xc6\\xbc\\x31\\xf1\\x1b\\x77\\xb2\\x51\\x1d\\x28\\\n\t\\xf6\\x7e\\xc0\\xa5\\x77\\x02\\x30\\x01\\xc5\\xd6\\xf8\\xf4\\xd0\\xad\\xfe\\xea\\\n\t\\x04\\x15\\x14\\x7b\\x4d\\xc1\\xdf\\x0b\\x04\\x6f\\x53\\x7d\\x73\\x42\\xa4\\x30\\\n\t\\x68\\x49\\xd9\\xb2\\x2d\\x69\\x50\\x0a\\x82\\xbd\\x19\\x15\\xe7\\x6c\\x42\\x64\\\n\t\\x8b\\xf3\\xa8\\xbd\\x41\\x6c\\xad\\xf8\\x76\\x6b\\x75\\x88\\xfe\\xfa\\xf9\\x01\\\n\t\\xe6\\xd3\\x3a\\x60\\x85\\x9d\\x6f\\x4f\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\x74\\\n\t\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\x32\\x30\\x32\\x31\\\n\t\\x2d\\x30\\x38\\x2d\\x30\\x32\\x54\\x32\\x32\\x3a\\x30\\x38\\x3a\\x31\\x32\\x2b\\\n\t\\x30\\x38\\x3a\\x30\\x30\\x99\\xd1\\x32\\x9e\\x00\\x00\\x00\\x25\\x74\\x45\\x58\\\n", "\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\x00\\x32\\x30\\x32\\\n\t\\x31\\x2d\\x30\\x38\\x2d\\x30\\x34\\x54\\x32\\x31\\x3a\\x33\\x31\\x3a\\x34\\x39\\\n\t\\x2b\\x30\\x38\\x3a\\x30\\x30\\x29\\xc7\\x98\\x5d\\x00\\x00\\x00\\x00\\x49\\x45\\\n\t\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x00\\xfb\\\n\t\\x89\\\n\t\\x50\\x4e\\x47\\x0d\\x0a\\x1a\\x0a\\x00\\x00\\x00\\x0d\\x49\\x48\\x44\\x52\\x00\\\n\t\\x00\\x00\\x0b\\x00\\x00\\x00\\x0a\\x08\\x04\\x00\\x00\\x00\\xc8\\xf9\\x6c\\x08\\\n\t\\x00\\x00\\x00\\x04\\x67\\x41\\x4d\\x41\\x00\\x00\\xb1\\x8f\\x0b\\xfc\\x61\\x05\\\n\t\\x00\\x00\\x00\\x02\\x62\\x4b\\x47\\x44\\x00\\xff\\x87\\x8f\\xcc\\xbf\\x00\\x00\\\n", "\\x00\\x07\\x74\\x49\\x4d\\x45\\x07\\xe4\\x07\\x01\\x07\\x1f\\x2d\\xc6\\x57\\x0c\\\n\t\\x2f\\x00\\x00\\x00\\x2f\\x49\\x44\\x41\\x54\\x08\\xd7\\x63\\xfc\\xcf\\x80\\x0d\\\n\t\\x30\\x31\\x90\\x22\\xcc\\xc2\\xc0\\xc0\\xc0\\xc0\\x08\\x61\\xff\\x87\\x30\\xfe\\\n\t\\xa3\\xa8\\xfe\\x0f\\xc5\\x28\\x86\\xfc\\x47\\xa5\\x99\\x50\\x04\\xe1\\x6c\\x46\\\n\t\\x6a\\x38\\x10\\x00\\xbd\\x94\\x0a\\x0d\\xc6\\x7b\\xd7\\x10\\x00\\x00\\x00\\x25\\\n\t\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x63\\x72\\x65\\x61\\x74\\x65\\x00\\\n\t\\x32\\x30\\x31\\x37\\x2d\\x31\\x32\\x2d\\x30\\x39\\x54\\x31\\x34\\x3a\\x33\\x36\\\n\t\\x3a\\x31\\x36\\x2b\\x30\\x38\\x3a\\x30\\x30\\x70\\x8c\\xd2\\x0b\\x00\\x00\\x00\\\n\t\\x25\\x74\\x45\\x58\\x74\\x64\\x61\\x74\\x65\\x3a\\x6d\\x6f\\x64\\x69\\x66\\x79\\\n\t\\x00\\x32\\x30\\x32\\x30\\x2d\\x30\\x36\\x2d\\x33\\x30\\x54\\x32\\x33\\x3a\\x33\\\n", "\\x31\\x3a\\x34\\x35\\x2b\\x30\\x38\\x3a\\x30\\x30\\x8a\\xc5\\x22\\x37\\x00\\x00\\\n\t\\x00\\x00\\x49\\x45\\x4e\\x44\\xae\\x42\\x60\\x82\\\n\t\\x00\\x00\\x05\\xb3\\\n\t\\x00\\\n\t\\x00\\x1b\\x93\\x78\\x9c\\xb5\\x58\\x4b\\x8f\\xdb\\x36\\x10\\xbe\\xfb\\x57\\xa8\\\n\t\\xf1\\xa5\\x5d\\xac\\xd7\\xb2\\x1d\\xc7\\x6b\\x2d\\x5a\\x60\\xd7\\xc9\\x36\\x87\\\n\t\\x6e\\x5f\\xbb\\x69\\x0e\\x45\\x11\\x50\\x22\\x65\\x0b\\x91\\x45\\x95\\xa2\\x6b\\\n\t\\xa7\\xc5\\x9e\\x8a\\x1e\\x8b\\x5e\\x5a\\xa0\\x3f\\xa1\\x40\\x4f\\xbd\\xa5\\x28\\\n\t\\x82\\xfc\\x99\\xa4\\x8f\\x53\\xff\\x42\\x49\\x51\\x0f\\x92\\xa2\\x1e\\xde\\x4d\\\n\t\\x63\\x2c\\x02\\x0d\\xc9\\xef\\x1b\\xce\\x0c\\x87\\x33\\xfc\\xf7\\x8f\\x97\\xc3\\\n", "\\x03\\x2b\\xa1\\x80\\x50\\x8b\\x04\\xae\\x8b\\x23\\x2b\\x41\\xf4\\x60\\xd8\\xeb\\\n\t\\x7d\\x9a\\x7e\\x3d\\x0e\\x22\\x88\\xb7\\xd6\\x37\\x3d\\xcb\\x72\\x81\\xf7\\x74\\\n\t\\x49\\xf0\\x26\\x82\\x03\\x0f\\x87\\x98\\x38\\xd6\\x76\\x15\\x50\\x74\\xc2\\x87\\\n\t\\x30\\x81\\x88\\x09\\x46\\xf1\\xce\\x4a\\x70\\x18\\x40\\xab\\x3f\\xb3\\xf9\\xef\\\n\t\\xa4\\x77\\xdd\\xeb\\x0d\\x0f\\x04\\xd6\\x19\\x20\\x25\\x30\\xfb\\xe8\\x8a\\xaa\\\n\t\\x21\\xe6\\x03\\x83\\x6d\\x00\\xe9\\x4a\\x90\\xf2\\x3f\\x5b\\xfc\\xaf\\x52\\x6e\\\n\t\\x28\\xc5\\xd1\\xfb\\x0c\\x3f\\x96\\xa8\\x4b\\x61\\x8d\\x0a\\x94\\x80\\x28\\x89\\\n\t\\x01\\x41\\x11\\x4d\\xe1\\xc4\\x3a\\xb1\\xe2\\x3d\\xab\\x06\\xa5\\xb0\\x01\\xcd\\\n\t\\x35\\xf6\\xc6\\xd0\\x86\\xbe\\xa2\\xd0\\x27\\x9b\\xc0\\x7b\\x7a\\xea\\x79\\x28\\\n\t\\x49\\x14\\x73\\xa8\\xf2\\x1a\\xb5\\xfa\\x1e\\x42\\xc7\\xbe\\xa7\\x00\\x2e\\x28\\\n", "\\x09\\x17\\x38\\xa2\\x20\\x88\\x90\\x84\\xa7\\x88\\x3b\\xee\\x32\\x87\\xfc\\x18\\\n\t\\x2c\\x51\\x89\\xc4\\xbf\\x1c\\x1f\\x7b\\x9b\\x24\\x85\\xc1\\x1b\\x1a\\x32\\x4c\\\n\t\\xc7\\x8a\\x70\\x84\\x24\\xe3\\xf0\\x69\\x75\\x6a\\xfb\\x9e\\x0f\\x7d\\xa4\\x70\\\n\t\\x5c\\x52\\x36\\x0d\\xc1\\xc7\\x01\\x5c\\xca\\xe1\\xa6\\x88\\xbb\\x47\\x5d\\x69\\\n\t\\xf1\\x29\\x1c\\x23\\x39\\x46\\x28\\x8e\\xf3\\x38\\xb1\\xb3\\xd8\\x30\\x30\\x35\\\n\t\\xee\\x2f\\x57\\xf9\\x34\\x8e\\xc3\\xc0\\x03\\x34\\xc8\\x7d\\x5f\\xaa\\x5d\\x19\\\n\t\\x4a\\xa1\\xcc\\xfa\\xa6\\x2a\\x85\\xc8\\xa7\\x03\\x02\\x60\\xb0\\x49\\x1c\\x6b\\\n\t\\xcc\\x15\\x53\\x86\\x49\\xb0\\x5c\\x55\\xc7\\xab\\x86\\x1d\\xbb\\xd3\\xd9\\x1c\\\n\t\\x48\\xbb\\xaa\\x28\\xe2\\x38\\x2b\\xfc\\x55\\x6d\\x04\\xf4\\xa7\\xc7\\xc7\\xc7\\\n\t\\xd0\\x6e\\x06\\x88\\x09\\x0b\\x4a\\x04\\xeb\\x20\\x26\\x93\\x7b\\x73\\x77\\xde\\\n", "\\x08\\xd1\\xc5\\xba\\x57\\xc0\\x55\\x0e\\x84\\xf8\\xee\\x1c\\xb9\\xbd\\x7f\\x7e\\\n\t\\xfd\\xf9\\xcf\\xe7\\xdf\\xbd\\xfe\\xed\\x87\\xd7\\xbf\\xff\\xf4\\xea\\xf9\\xf7\\\n\t\\x7f\\x7f\\xfb\\xe2\\xd5\\x8b\\x97\\x7f\\xfd\\xf8\\x4b\\xbc\\x53\\x00\\x1d\\x87\\\n\t\\x02\\x57\\xf6\\x4e\\x7f\\x3a\\x63\\x26\\xf4\\xe5\\x78\\x12\\xba\\xc9\\xbc\\x1a\\\n\t\\xa3\\x65\\xad\\x01\\x59\\x06\\x11\\xf7\\x55\\x16\\x57\\x85\\x28\\x75\\x9d\\x2e\\\n\t\\xe4\\xee\\x66\\x71\\x8a\\xd6\\x92\\xcc\\xc5\\xcc\\x36\\xeb\\x72\\x26\\x13\\x65\\\n\t\\x81\\x7a\\xaf\\x58\\xbc\\xcb\\x45\\x63\\x5b\\x9a\\xb6\\x42\\x82\\x63\\x3c\\x2d\\\n\t\\xe7\\xe9\\xb2\\x18\\x40\\x18\\x44\\xcb\\x9c\\x59\\x15\\x66\\x3a\\x6a\\xd2\\x74\\\n\t\\x33\\x9a\\x2c\\x57\\x32\\xcb\\xab\\xba\\x7b\\xfe\\x0f\\x6b\\x2a\\x46\\x2a\\xac\\\n\t\\x49\\x2b\\xd6\\xb4\\x8f\\xc6\\x66\\x7b\\x66\\xd2\\xd2\\x9e\\x13\\x21\\x19\\x1e\\\n", "\\x48\\x06\\x1d\\xf1\\x69\\x6c\\x3b\\xaa\\x45\\x47\\x25\\xe6\\xae\\x2a\\x54\\x6d\\\n\t\\x6a\\xeb\\xe2\\x5c\\x57\\x5d\\x2e\\xb6\\x75\\x34\\x51\\xa5\\x85\\xba\\x47\\x69\\\n\t\\x58\\x5c\\x1b\\x0c\\xeb\\x24\\x28\\x44\\x1e\\x45\\xf0\\xd0\\xaa\\x8e\\x49\\xc7\\\n\t\\xba\\x26\\xad\\xd8\\x2d\\x69\\x45\\xcd\\x87\\x26\\xde\\x16\\xcf\\x4a\\xb7\\xbd\\\n\t\\x94\\x77\\x25\\x37\\xeb\\x99\\x4f\\xec\\xb9\\xc8\\x1c\\xe7\\xe9\\xbf\\x37\\x63\\\n\t\\xaa\\xd4\\x1c\\xce\\x5b\\x8a\\xe6\\x99\\x9e\\x66\\x35\\x5b\\x34\\xd2\\x77\\x6d\\\n\t\\x24\\x55\\xe9\\x2a\\x39\\xa1\\x52\\x87\\xe8\\x25\\x88\\x56\\x37\\xe4\\x6a\\x6a\\\n\t\\xa7\\xa3\\x4c\\xb4\\x13\\xf3\\x35\\x90\\x99\\xf9\\x5a\\x05\\x97\\xb2\\xae\\xc1\\\n\t\\x61\\xee\\x1c\\x22\\x1f\\x74\\x82\\x97\\xaf\\x6f\\x85\\x40\\xb9\\x19\\xf2\\xc9\\\n\t\\xb6\\x6d\\x1b\\x63\\xa4\\x3f\\x66\\xd7\\x84\\x7f\\xb7\\x86\\x62\\x8e\\xe0\\xd8\\\n", "\\x9f\\x1b\\x28\\xbc\\x15\\xe2\\xd7\\xb4\\x42\\x91\\x6b\\xda\\xb4\\xab\\xe6\\xe2\\\n\t\\x49\\xe5\\x28\\x8f\\x52\\xdb\\x26\\x18\\x03\\x80\\x7e\\x13\\xc3\\x4c\\x2f\\xcf\\\n\t\\x58\\x0d\\x46\\x70\\xa8\\xfb\\x5f\\x11\\x77\\xb9\\xe4\\xf6\\x8d\\x93\\x6b\\x23\\\n\t\\x53\\x3f\\x2b\\x64\\x41\\x18\\x22\\xf2\\x4c\\xc8\\x1e\\xc5\\x87\\x96\\x49\\x7e\\\n\t\\x1f\\x6f\\x23\\xf3\\xc8\\x05\\x26\\xa8\\x2e\\xae\\x2a\\x46\\x36\\xf1\\xb3\\x03\\\n\t\\xf4\\x30\\x80\\x28\\xad\\x9d\\xbb\\x9f\\x04\\x33\\xa4\\x56\\x9f\\x54\\x35\\xda\\\n\t\\x2f\\xee\\x34\\x6c\\x39\\xfc\\x6e\\x1d\\x6f\\x1a\\xb6\\x9e\\xc1\\x6f\\x15\\x67\\\n\t\\x17\\x28\\xda\\x94\\xe1\\xc5\\xbf\\x8c\\x47\\xa6\\x8a\\x75\\xbe\\xe0\\xbf\\xba\\\n\t\\xb4\\x5e\\x36\\x30\\x25\\xb0\\xe3\\xb0\\x74\\xb3\\x4e\\xe1\\xb3\\x0c\\xed\\x58\\\n\t\\xac\\xea\\x90\\xff\\xcc\\x5c\\x66\\x6f\\x96\\x90\\xea\\xbd\\xd3\\xc5\\xa2\\xd2\\\n", "\\xda\\xfa\\x43\\x5c\\x6f\\xbf\\x46\\xcb\\xeb\\x24\\x5e\\x16\\xa5\\x6a\\x49\\xa7\\\n\t\\xe5\\xf9\\x34\\xa4\\x3f\\x8a\\x4d\\x3d\\x42\\x65\\xa8\\xdb\\xb1\\x37\\x9f\\xea\\\n\t\\x0a\\x58\\x4b\\x9d\\x5f\\xdd\\xb1\\x7e\\x43\\x69\\x3d\\x72\\x53\\x77\\x5c\\x69\\\n\t\\xc0\\x2a\\x58\\x22\\x5b\\x48\\x68\\x42\\x50\\x9b\\x34\\xb2\\x30\\xbb\\x81\\x39\\\n\t\\x34\\x4a\\x7d\\x17\\x92\\x34\\x25\\x4f\\x56\\x78\\x3b\\x80\\xc8\\xc3\\x24\\xed\\\n\t\\x4f\\x06\\x79\\xc4\\x31\\x75\\xf6\\xa7\\xef\\x76\\x64\\x64\\x1d\\x3a\\xc6\\x79\\\n\t\\x9e\\x95\\x0a\\x3e\\x37\\x64\\x93\\x9a\\x31\\xab\\xd9\\x64\\x7c\\xf3\\x6c\\x92\\\n\t\\xe1\\x7f\\x16\\xa0\\x6d\\x8c\\x09\\xad\\x18\\x34\\x1f\\x68\\x0e\\x10\\x09\\xf0\\\n\t\\x03\\xd6\\xf4\\x3d\\x80\\x81\\x84\\x94\\x4b\\xea\\x62\\x62\\x61\\x2f\\xc6\\x0b\\\n\t\\x2d\\x6d\\x8b\\x0a\\x8d\\xcb\\x84\\x05\\xb9\\x07\\x4d\\xe6\\x3b\\x3b\\x3b\\x3b\\\n", "\\x9f\\xa9\\xd3\\x94\\xa4\\xa0\\xdc\\xcf\\x6b\\x17\\x9f\\xe1\\x9d\\x7c\\x35\\x0b\\\n\t\\x49\\x5b\\xb0\\x5e\\xeb\\x0b\\x9a\\x13\\x7a\\x79\\x0d\\xe9\\xaa\\x68\\x28\\x88\\\n\t\\x19\\x05\\xb8\\x21\\x6a\\xce\\x65\\xd2\\x29\\xbc\\xb5\\x2d\\x34\\x05\\x1c\\x48\\\n\t\\x58\\xaf\\x00\\xd9\\xf5\\x2f\\x8e\\xcc\\xc6\\xf5\\xc4\\xc5\\x35\\xc0\\xac\\x81\\\n\t\\x08\\x22\\x27\\x4f\\xfb\\x27\\xea\\x68\\x8c\\x93\\x80\\xe3\\xb3\\x43\\x83\\x63\\\n\t\\x2b\\xed\\x35\\xf8\\x8c\\xbc\\xe1\\x9a\\x2a\\xed\\x88\\x48\\x9f\\x45\\x6f\\xd8\\\n\t\\xd8\\xa3\\xe8\\xd5\\x7a\\x53\\x1b\\x63\\xd8\\x45\\xb3\\x5f\\xce\\xef\\x3f\\x78\\\n\t\\x70\\x56\\x77\\x39\\x1a\\xca\\x83\\x02\\x9e\\x21\\x0f\\x00\\x21\\xd9\\xe3\\x68\\\n\t\\xb0\\xe6\\xcf\\x64\\xd6\\x86\\x84\\x6f\\x3b\\xc3\\xf4\\x63\\xc8\\xca\\x92\\xe1\\\n\t\\x29\\x9f\\xc0\\x2b\\xa9\\xa3\\x38\\x5a\\xbe\\xa3\\xbe\\x80\\x21\\x96\\x56\\x00\\\n", "\\xc5\\xd2\\x9b\\x47\\x21\\x4a\\x21\\x87\\x07\\xcd\\xe9\\x28\\xed\\x5e\\xdb\\xbb\\\n\t\\x01\\xfe\\x30\\x77\\xe9\\x31\\x07\\x85\\x86\\x52\\xcb\\x36\\xf5\\x46\\x7b\\x37\\\n\t\\x1c\\x3a\\xc5\\xe7\\xa9\\x5d\\xae\\x9e\\xc5\\xe8\\xdd\\x3b\\x93\\x3b\\x5f\\xc8\\\n\t\\x5d\\xaa\\xf0\\x5d\\xf9\\x72\\xdb\\x11\\xe5\\xae\\x8a\\x92\\xf6\\xb9\\x9d\\x40\\\n\t\\x6a\\xaa\\xfb\\xf6\\xda\\x80\\x21\\x8a\\xb7\\xef\\x2b\\x7c\\xa3\\x3a\\xbd\\x78\\\n\t\\xe0\\xd2\\x51\\x1a\\x5f\\xc3\\xf4\\xc9\\xfd\\x2f\\x77\\x4f\\x2e\\x82\\x28\\x58\\\n\t\\x07\\x5f\\x23\\x31\\x26\\xa9\\x52\\x13\\x73\\x57\\x01\\x0d\\x91\\x0b\\x08\\x5f\\\n\t\\x58\\x86\\x9d\\x11\\x19\\xec\\x2a\\xc8\\x4a\\xc9\\x2b\\x18\\x6a\\x09\\x3e\\xc4\\\n\t\\x64\\x0d\\xc2\\xfd\\x39\\xba\\x60\\xb3\\x75\\x2d\\xc0\\x06\\xb3\\x08\\x67\\x1f\\\n\t\\xd6\\xee\\xad\\xb1\\x46\\x42\\x53\\xfe\\xdb\\x8f\\x2f\\xeb\\x3d\\xea\\x19\\x5b\\\n", "\\x1e\\x4f\\x3d\\xc0\\x7e\\x6e\\x2d\\xe7\\x22\\xc4\\xc9\\xfe\\x7e\\x4f\\x57\\x35\\\n\t\\x1b\\xaf\\x02\\xdc\\x62\\x9a\\xe3\\xd1\\x68\\x9c\\x26\\x83\\x4e\\xdc\\x4f\\x1e\\\n\t\\x72\\xb0\\x7d\\x35\\x68\\x31\\x95\\x3f\\x9a\\xd9\\x33\\xf0\\xe6\\x74\\x68\\x6c\\\n\t\\x45\\x69\\x86\\x35\\x48\\x56\\x00\\xa2\\x01\\x2f\\xfe\\x1b\\x08\\x2f\\xf9\\xa4\\\n\t\\x8c\\x4a\\x5a\\xbb\\x89\\x3a\\xad\\x7e\\x24\\xa6\\x15\\xaa\\xfe\\x07\\x9b\\x2d\\\n\t\\x3c\\x11\\\n\t\\x00\\x00\\x06\\x3c\\\n\t\\x00\\\n\t\\x00\\x1e\\x7b\\x78\\x9c\\xdd\\x59\\xdb\\x8e\\xdb\\x36\\x10\\x7d\\x5f\\x60\\xff\\\n\t\\x81\\x8d\\x5f\\x92\\x85\\x1d\\x4b\\xf2\\x75\\xb5\\x68\\x01\\x4b\\x96\\x9b\\x87\\\n", "\\xa6\\xb7\\x6c\\x9a\\x87\\xa2\\x08\\x64\\x89\\x6b\\x0b\\x91\\x45\\x45\\x92\\xbb\\\n\t\\x4e\\x83\\x7c\\x59\\x1f\\xfa\\x49\\xfd\\x85\\xf2\\x22\\x59\\xbc\\xda\\xda\\x24\\\n\t\\x40\\xd3\\x5a\\xd8\\x8b\\x86\\xe4\\x99\\xc3\\xe1\\xcc\\x70\\x48\\xff\\xfd\\xe7\\\n\t\\x5f\\x97\\x17\\xc3\\x2b\\x50\\x56\\x61\\x51\\x81\\x22\\x59\\xaf\\x51\\x06\\x4a\\\n\t\\x58\\x5d\\x0d\\x2f\\x2f\\x2e\\x2f\\x7e\\xa6\\xef\\xaf\\x92\\x2c\\x46\\xf7\\xe0\\\n\t\\xfd\\xe5\\x05\\x00\\xeb\\x30\\x7a\\xb3\\x29\\xd0\\x3e\\x8b\\x07\\x11\\x4a\\x51\\\n\t\\xe1\\x82\\xfb\\x6d\\x52\\xc1\\x1b\\xda\\x86\\x8a\\x18\\x62\\x89\\x9d\\x1f\\x40\\\n\t\\x89\\xd2\\x24\\x06\\xbd\\x99\\x45\\x1e\\xdc\\xfa\\x81\\xc0\\x0d\\xaf\\x18\\xa0\\\n\t\\x17\\x16\\x3c\\x3e\\x7e\\x35\\x60\\xf7\\x82\\x51\\x30\\x0d\\xe6\\x02\\xba\\x8c\\\n\t\\xdc\\xb4\\x0c\\xee\\x93\\xb8\\xda\\x32\\xed\\xe4\\xc7\\x62\\x7f\\x15\\xdd\\xfb\\\n", "\\xaa\\x42\\xd9\\xb7\\x58\\x4d\\x4e\\x38\\x28\\x42\\xcc\\x44\\xe5\\x51\\x15\\x61\\\n\t\\x56\\xe6\\x61\\x01\\xb3\\xaa\\xc1\\x63\\x03\\xe9\\x10\\xf0\\x0d\\x50\\x60\\x6a\\\n\t\\x6b\\xa9\\x16\\x89\\x9c\\xd8\\x8a\\xef\\x64\\x56\\x3f\\xed\\x93\\xe8\\xcd\\x22\\\n\t\\x8a\\x60\\x59\\xd6\\xc6\\xd1\\xc9\\x29\\xa6\\xd6\\x4e\\xab\\x95\\x85\\x3f\\x0d\\\n\t\\x6a\\x8b\\xeb\\x57\\x45\\xea\\xa3\\xac\\x0a\\x93\\x0c\\x72\\xb0\\x82\\xd8\\x88\\\n\t\\xaa\\x99\\x75\\x83\\xfb\\x63\\xb8\\x81\\x2d\\x1c\\x79\\x73\\xef\\x50\\xb4\\x2f\\\n\t\\x29\\x16\\xda\\x57\\x29\\x06\\x76\\x41\\x86\\x32\\xc8\\x46\\xb6\\xfd\\xce\\x78\\\n\t\\x91\\xa0\\xe5\\x45\\x85\\xfb\\xc1\\xf8\\x55\\x12\\x6f\\x98\\x47\\x6a\\xc4\\x1f\\\n\t\\xe3\\x95\\xd1\\x24\\x76\\xa0\\xe0\\x3b\\x15\\xca\\x1b\\xff\\xb1\\x1a\\x9f\\xd1\\\n\t\\x28\\x3b\\x3d\\xc9\\x86\\xf6\\x22\\xcf\\xd3\\x24\\x0a\\xab\\xa4\\xf1\\x88\\x96\\\n", "\\xba\\xd2\\x44\\xb1\\x18\\xe7\\x93\\x94\\xc7\\xf6\\x74\\xe1\\x2d\\x65\\xca\\x29\\\n\t\\xbc\\xab\\x06\\x45\\x18\\x27\\xfb\\xd2\\x05\\x0e\\x25\\x2e\\xb4\\x17\\xc9\\x66\\\n\t\\xab\\xe9\\xa0\\x58\\xeb\\x2d\\x99\\x4a\\x58\\x6c\\x48\\x4f\\xbc\\xda\\x8f\\xcb\\\n\t\\xbc\\x80\\x61\\xec\\xe6\\x61\\xdc\\x07\\x07\\xdb\\xb5\\xfa\\xe0\\x1d\\xfd\\x7d\\\n\t\\x70\\xe8\\xff\\x8e\\x6b\\xf7\\x4b\\x8c\\xef\\x5a\\x98\\xd8\\x74\\xb6\\xf2\\x96\\\n\t\\x7d\\xc0\\xde\\x9f\\x4e\\x40\\xcf\\x59\\x4c\\x56\\x0b\\xbf\\xdf\\x08\\x6c\\xd0\\\n\t\\xb3\\x17\\x63\\x6b\\x3e\\xef\\x5f\\x5e\\x50\\x99\\x4d\\x66\\x73\\xbd\\xf0\\x57\\\n\t\\x4f\\xc4\\x58\\x52\\x6c\\xe3\\xba\\x5b\\xf4\\x3b\\x34\\xe5\\x86\\x4f\\xe0\\x3c\\\n\t\\xf3\\x3c\\x27\\xf0\\x78\\xce\\xe3\\xd9\\x2c\\xf0\\x97\\x02\\x67\\x7b\\x1c\\xf8\\\n\t\\x2b\\x8e\\xf3\\xdc\\x0a\\xec\\x55\\x07\\xce\\x98\\x46\\x59\\xc2\\xf8\\xf3\\xb3\\\n", "\\xc6\\x96\\xf6\\x3c\\x81\\xb5\\xb3\\x9a\\x8e\\x16\\x81\\xc0\\xda\\x1f\\x8f\\xe6\\\n\t\\x0b\\x8e\\xf5\\x68\\x32\\xf7\\xfc\\xeb\\xb3\\xac\\x4f\\xfa\\x75\\xeb\\xd9\\xb7\\\n\t\\xe1\\x5a\\x48\\x4f\\xec\\xfd\\x21\\x09\\x84\\x1f\\xe7\\xba\\x55\\xb8\\x06\\xf5\\\n\t\\x68\\x36\\xa4\\x37\\xa6\\x9f\\x9b\\x1a\\x91\\xc5\\x41\\xcd\\x44\\xd4\\x21\\xa3\\\n\t\\x93\\xd6\\x1d\\x36\\x6c\\x92\\x11\\xcf\\x6f\\xc2\\x98\\x93\\xd2\\x58\\xd0\\xc8\\\n\t\\x49\\x0c\\xb9\\x60\\x2a\\x8b\\xd7\\x08\\x1b\\x66\\x27\\xf4\\xc7\\x52\\x96\\x23\\\n\t\\xa6\\x3c\\xc8\\xa1\\x16\\x3a\\x96\\xd8\\x75\\x0b\\xa9\\xc2\\x91\\xd8\\x57\\x95\\\n\t\\xe2\\xa5\\x8f\\x93\\x6c\\xc3\\x78\\xd8\\x8a\\x98\\xd1\\x56\\xe5\\x74\\x7d\\x15\\\n\t\\x69\\xcd\\x9a\\xdb\\xf7\\x14\\x83\\xbb\\x25\\x4c\\x61\\x54\\x41\\xec\\x70\\x6a\\\n\t\\x1b\\x0d\\x38\\x7e\\xef\\xfa\\xe8\\x34\\x73\\x46\\xb9\\xb8\\xea\\x96\\x55\\x6f\\\n", "\\x5f\\xdc\\xaa\\xf3\\xd9\\xcf\\x5b\\xf8\\xd7\\x4b\\x4f\\xe3\\x03\\x6d\\xce\\x3c\\\n\t\\x12\\x62\\x26\\xe0\\x76\\x46\\xf2\\x31\\x13\\xa2\\x33\\x76\\xbf\\x92\\x78\\x69\\\n\t\\x38\\x04\\xbe\\xe7\\x8f\\x96\\x37\\x3c\\x6f\\xd0\\x12\\x37\\xa0\\x1f\\x71\\x1b\\\n\t\\x37\\x57\\x5d\\x54\\x08\\xb0\\xef\\x70\\xe8\\x05\\x71\\xc2\\x6d\\x76\\x8d\\x04\\\n\t\\x98\\x99\\xf9\\x96\\xef\\xf8\\x63\\x8d\\x75\\x7a\\x6c\\xe6\\x44\\xcc\\x78\\xe0\\\n\t\\x80\\x1f\\x68\\xaa\\x87\\x6b\\x9c\\x57\\x56\\x33\\xa5\\x27\\x37\\x49\\x7d\\x15\\\n\t\\x25\\x17\\x50\\x22\\xc5\\x96\\xa1\\x1a\\xa9\\xda\\x68\\x97\\x89\\x29\\xe9\\x83\\\n\t\\xd7\\x25\\x26\\xda\\x93\\xf9\\x83\\xb7\\xd5\\xca\\xf7\\x56\\x8e\\x6d\\xd2\\x48\\\n\t\\xda\\x97\\xa3\\xe9\\x58\\xa7\\x2e\\xda\\x42\\x52\\x08\\x3c\\x54\\x5d\\x0d\\xf7\\\n\t\\x60\\x75\\x5c\\x24\\x76\\x0e\\x93\\x0e\\xda\\x82\\xf9\\xb5\\xbc\\x96\\xa4\\x10\\\n", "\\x2c\\x50\\x2a\\x2f\\xa9\\x20\\xd6\\xef\\x66\\xf2\\xba\\xaa\\x94\\xe4\\x1e\\xb2\\\n\t\\xd9\\x3e\\x68\\xb5\\xf5\\xea\\xe2\\x3a\\x4c\\x53\\x58\\xbc\\x63\\xb2\\x97\\x79\\\n\t\\x5f\\x27\\x5e\\xa2\\xfb\\x4c\\xdb\\xf0\\x1c\\x15\\xd0\\x54\\x83\\x1f\\x03\\xe6\\\n\t\\xa4\\x7a\\x1c\\xc4\\xcf\\x92\\x18\\xd2\\x72\\x9e\\xb7\\xc2\\x99\\x49\\xea\\x31\\\n\t\\xa5\\xba\\xe0\\xe4\\xda\\x7d\\xd6\\xaa\\x61\\xb5\\x0c\\x02\\x6f\\x74\\xac\\x1a\\\n\t\\x6c\\x67\\xee\\x50\\x21\\x29\\x13\\x6a\\xd9\\x7c\\x34\\x1a\\x5d\\x5e\\x60\\x06\\\n\t\\xc1\\x64\\xee\\xd7\\x3d\\x6d\\xd2\\x09\\x77\\xf3\\x9e\\x9c\\x98\\x12\\x1f\\x12\\\n\t\\xff\\x93\\x29\\x29\\x1b\\xe0\\x7f\\x66\\x46\\x40\\x3a\\xfa\\x3d\\x87\\xd9\\xbe\\\n\t\\x8d\\x66\\xf2\\x06\\xde\\xeb\\x42\\xd0\\x90\\x29\\xc8\\x63\\x3a\\x8c\\xcc\\xc7\\\n\t\\xd7\\xce\\x62\\xca\\x5b\\x91\\xc0\\xbb\\x2e\\xde\\x8b\\x77\\x4c\\x49\\x5d\\x8f\\\n", "\\xb8\\x60\\x82\\x47\\x39\\xe4\\x57\\xf3\\x8f\\x41\\xa3\\x21\\x86\\x5a\\x5c\\x57\\\n\t\\xdc\\x49\\xcf\\x64\\x37\\x65\\xb4\\x21\\x9d\\x76\\xc8\\xa5\\x32\\x5a\\x54\\xe7\\\n\t\\x01\\xa1\\x7c\\xd4\\x5c\\x34\\xd0\\xbc\\xf1\\x43\\xae\\x3b\\x05\\x2a\\x4d\\xa6\\\n\t\\x39\\x75\\x48\\x9f\\x46\\x4c\\xd1\\x97\\xbf\\x38\\x6f\\x3d\\xda\\x9c\\xab\\x82\\\n\t\\xc4\\x5b\\x15\\xe3\\x3a\\x37\\x15\\x9d\\x06\\x43\\x30\\xbe\\x64\\xf0\\x4f\\x03\\\n\t\\x64\\x7b\\x0b\\x07\\xc9\\x04\\x0f\\x5b\\x39\\x20\\x2d\\x9d\\x84\\x2e\\xb3\\xe6\\\n\t\\xa4\\x4c\\x4f\\xb9\\x45\\xf7\\x83\\x18\\x46\\xa8\\xa0\\x87\\xb7\\x41\\x13\\x13\\\n\t\\xd8\\x01\\x3b\\xc5\\x95\\x86\\x47\\xc7\\x0d\\x92\\xe7\\xd2\\x31\\x20\\xff\\x75\\\n\t\\x0f\\xab\\x79\\xac\\x53\\x4c\\xed\\xcc\\x5c\\x34\\x69\\xdf\\xe1\\x72\\x01\\xa5\\\n\t\\x63\\x58\\xb4\\x5f\\x12\\x78\\x9f\\xa3\\x42\\xb8\\x31\\x95\\x9a\\xce\\x5d\\x9d\\\n", "\\x4a\\xe5\\xd8\\x6e\\x8d\\x3c\\x74\\xe0\\x2b\\x31\\x26\\x31\\x6e\\x4b\\xc7\\xe5\\\n\t\\x12\\x32\\x42\\x33\\x8c\\xbf\\x45\\xd1\\xe4\\xb9\\x66\\x6e\\xb5\\xbd\\x80\\x58\\\n\t\\xf0\\x4b\\x50\\x10\\x9f\\x44\\xc2\\x75\\x0a\\xb9\\xad\\xa4\\x1d\\x60\\x3a\\x9a\\\n\t\\x75\\x3d\\x7b\\x9c\\x3c\\x79\\x48\\x44\\xdc\\xb8\\xc0\\x07\\xcf\\x18\\x57\\x7f\\\n\t\\x75\\x64\\xec\\xd7\\x11\\xdb\\xc9\\x07\\x08\\x1f\\x47\\x93\\xcc\\x6d\\xf6\\xa0\\\n\t\\x1b\\xa9\\x39\\x47\\x65\\x42\\x94\\xe0\\xd8\\x40\\x39\\xa0\\x47\\x57\\xda\\xa5\\\n\t\\xb9\\x3e\\x9e\\x88\\xe7\\x5b\\x96\\xdf\\x8f\\x57\\x10\\xc6\\x53\\xaf\\x25\\x0e\\\n\t\\xab\\x4f\\xa1\\xba\\x3e\\xa7\\xa7\\x73\\xae\\x02\\x69\\x97\\xeb\\x8b\\x8b\\xb8\\\n\t\\x0f\\x9a\\x69\\xe1\\x19\\x0d\\xc2\\xa2\\x68\\xbe\\x3e\\x48\\x76\\xe4\\xaa\\x18\\\n\t\\xec\\x8b\\xf4\\xb1\\x3b\\xa4\\x2f\\x43\\x5c\\x16\\x0f\\x17\\xa4\\x07\\x29\\xe5\\\n", "\\x9f\\xe6\\xd9\\xe6\\x78\\x59\\xc5\\x5d\\x04\\x43\\x9c\\xc2\\xc2\\x0a\\x71\\x57\\\n\t\\x4f\\x47\\x51\\xbd\\xa7\\x0f\\xaf\\x4e\\x27\\x3f\\x32\\xd2\\x70\\x2c\\x5a\\x8e\\\n\t\\xc8\\x23\\xae\\x0c\\xb9\\xaa\\x7e\\x11\\x61\\x7f\\x49\\x85\\x1d\\xba\\xdd\\x1e\\\n\t\\x34\\x77\\xc9\\x0d\\x1e\\xb6\\x93\\x61\\x81\\x84\\x80\\xd7\\x2b\\xfa\\x95\\x5a\\\n\t\\xeb\\xf6\\x5d\\x0e\\xbf\\x7e\\x34\\x7a\\xf4\\x9b\\x70\\x17\\xc3\\xbc\\xa9\\xfd\\\n\t\\x9e\\xa3\\x3b\\xd2\\x58\\x42\\xa2\\x37\\x3a\\x5d\\x81\\x84\\x4a\\x42\\xb9\\xf9\\\n\t\\xd0\\x9a\\x34\\x82\\x70\\x76\\x17\\x35\\xb0\\xec\\x0b\\xa4\\x5b\\x84\\xd2\\x87\\\n\t\\x95\\x3b\\xe2\\xfd\\x9f\\x16\\x8a\\xdd\\x5c\\x32\\x40\\xed\\xd5\\x65\\xef\\xed\\\n\t\\xe1\\xf5\\xf3\\x24\\x4b\\x76\\xc9\\x1f\\x90\\x0d\\xe6\\x39\\x18\\xfc\\xf1\\x36\\\n\t\\xa9\\x52\\xb8\\x0e\\x0b\\x32\\x52\\x70\\x49\\x8a\\x16\\x1e\\x14\\xb4\\xe6\\x28\\\n", "\\xc4\\xa3\\x1a\\x41\\xbf\\x47\\xc5\\x2e\\x4c\\x3b\\xe1\\x76\\xc2\\xc3\\x03\\x55\\\n\t\\x30\\xcd\\x94\\xd9\\x32\\xf6\\x8d\\x73\\x38\\x59\\x2f\\xf6\\xe0\\x84\\x3c\\x67\\\n\t\\x75\\xd4\\xc7\\x5c\\xb3\\x96\\xba\\x83\\x51\\x4f\\x14\\xe2\\x67\\xcd\\xeb\\xf1\\\n\t\\x53\\x54\\x7e\\xc4\\xda\\xd1\\x61\\x8a\\x61\\x14\\xb0\\x73\\xd3\\x9e\\xdb\\xb6\\\n\t\\xc3\\xe2\\xb9\\x93\\xc2\\xd7\\xcf\\x08\\x5c\\x07\\xb5\\xe7\\xec\\x70\\x67\\xcf\\\n\t\\xac\\x59\\xf8\\x69\\x8a\\x4d\\x17\\x19\\x4c\\x69\\x55\\x8f\\x1f\\x94\\xdb\\x30\\\n\t\\x86\\x03\\x72\\xb2\\x39\\xa1\\xe4\\x05\\xe9\\xd4\\xc0\\x73\\x83\\xf7\\x59\\xa7\\\n\t\\xe1\\x2f\\x59\\x37\\x8e\\xdf\\x3f\\x28\\x7e\\x7d\\x0c\\\n\t\"\n\tqt_resource_name = b\"\\\n", "\\x00\\x05\\\n\t\\x00\\x7a\\xec\\x35\\\n\t\\x00\\x74\\\n\t\\x00\\x68\\x00\\x65\\x00\\x6d\\x00\\x65\\\n\t\\x00\\x05\\\n\t\\x00\\x70\\x37\\xd5\\\n\t\\x00\\x69\\\n\t\\x00\\x6d\\x00\\x61\\x00\\x67\\x00\\x65\\\n\t\\x00\\x03\\\n\t\\x00\\x00\\x78\\xc3\\\n", "\\x00\\x72\\\n\t\\x00\\x65\\x00\\x73\\\n\t\\x00\\x12\\\n\t\\x01\\x46\\xe9\\xe7\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x43\\x00\\x6c\\x00\\x6f\\x00\\x73\\x00\\x65\\x00\\x2e\\x00\\x70\\x00\\x6e\\\n\t\\x00\\x67\\\n\t\\x00\\x1b\\\n\t\\x0c\\x47\\x0b\\xa7\\\n\t\\x00\\x72\\\n", "\\x00\\x69\\x00\\x62\\x00\\x62\\x00\\x6f\\x00\\x6e\\x00\\x47\\x00\\x72\\x00\\x6f\\x00\\x75\\x00\\x70\\x00\\x4f\\x00\\x70\\x00\\x74\\x00\\x69\\x00\\x6f\\x00\\x6e\\\n\t\\x00\\x42\\x00\\x75\\x00\\x74\\x00\\x74\\x00\\x6f\\x00\\x6e\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x0d\\\n\t\\x07\\xb6\\x8e\\xe7\\\n\t\\x00\\x41\\\n\t\\x00\\x72\\x00\\x72\\x00\\x6f\\x00\\x77\\x00\\x4d\\x00\\x6f\\x00\\x72\\x00\\x65\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x13\\\n\t\\x0e\\x53\\x56\\x87\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x4e\\x00\\x6f\\x00\\x72\\x00\\x6d\\x00\\x61\\x00\\x6c\\x00\\x2e\\x00\\x70\\\n", "\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x10\\\n\t\\x06\\xec\\x85\\x87\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x4d\\x00\\x61\\x00\\x78\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x18\\\n\t\\x0e\\x56\\x54\\xc7\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x43\\x00\\x6c\\x00\\x6f\\x00\\x73\\x00\\x65\\x00\\x5f\\x00\\x48\\x00\\x6f\\\n\t\\x00\\x76\\x00\\x65\\x00\\x72\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n", "\\x00\\x0d\\\n\t\\x08\\x13\\x81\\x07\\\n\t\\x00\\x41\\\n\t\\x00\\x72\\x00\\x72\\x00\\x6f\\x00\\x77\\x00\\x44\\x00\\x6f\\x00\\x77\\x00\\x6e\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x14\\\n\t\\x05\\xc6\\x2b\\x27\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x55\\x00\\x6e\\x00\\x73\\x00\\x68\\x00\\x61\\x00\\x64\\x00\\x65\\x00\\x2e\\\n\t\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x10\\\n", "\\x06\\xa6\\x85\\x87\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x4d\\x00\\x69\\x00\\x6e\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x12\\\n\t\\x00\\x76\\x0e\\x47\\\n\t\\x00\\x54\\\n\t\\x00\\x69\\x00\\x74\\x00\\x6c\\x00\\x65\\x00\\x62\\x00\\x61\\x00\\x72\\x00\\x5f\\x00\\x53\\x00\\x68\\x00\\x61\\x00\\x64\\x00\\x65\\x00\\x2e\\x00\\x70\\x00\\x6e\\\n\t\\x00\\x67\\\n\t\\x00\\x0b\\\n\t\\x0c\\x52\\x65\\x87\\\n", "\\x00\\x41\\\n\t\\x00\\x72\\x00\\x72\\x00\\x6f\\x00\\x77\\x00\\x55\\x00\\x70\\x00\\x2e\\x00\\x70\\x00\\x6e\\x00\\x67\\\n\t\\x00\\x0e\\\n\t\\x0a\\xdd\\x75\\x63\\\n\t\\x00\\x6f\\\n\t\\x00\\x66\\x00\\x66\\x00\\x69\\x00\\x63\\x00\\x65\\x00\\x32\\x00\\x30\\x00\\x31\\x00\\x33\\x00\\x2e\\x00\\x71\\x00\\x73\\x00\\x73\\\n\t\\x00\\x0b\\\n\t\\x0c\\xe2\\x21\\xa3\\\n\t\\x00\\x64\\\n\t\\x00\\x65\\x00\\x66\\x00\\x61\\x00\\x75\\x00\\x6c\\x00\\x74\\x00\\x2e\\x00\\x71\\x00\\x73\\x00\\x73\\\n", "\"\n\tqt_resource_struct_v1 = b\"\\\n\t\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01\\\n\t\\x00\\x00\\x00\\x10\\x00\\x02\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x06\\\n\t\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x03\\\n\t\\x00\\x00\\x00\\x20\\x00\\x02\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x04\\\n\t\\x00\\x00\\x01\\xf4\\x00\\x01\\x00\\x00\\x00\\x01\\x00\\x00\\x0d\\xb5\\\n\t\\x00\\x00\\x02\\x16\\x00\\x01\\x00\\x00\\x00\\x01\\x00\\x00\\x13\\x6c\\\n\t\\x00\\x00\\x00\\x20\\x00\\x02\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x07\\\n\t\\x00\\x00\\x01\\xae\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0b\\x2b\\\n", "\\x00\\x00\\x00\\x2c\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x01\\x5a\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x08\\x78\\\n\t\\x00\\x00\\x01\\x88\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0a\\x01\\\n\t\\x00\\x00\\x00\\xde\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x04\\xfe\\\n\t\\x00\\x00\\x00\\x92\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x02\\xb0\\\n\t\\x00\\x00\\x01\\x3a\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x07\\x78\\\n\t\\x00\\x00\\x00\\x56\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x01\\x61\\\n\t\\x00\\x00\\x01\\xd8\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0c\\xb6\\\n\t\\x00\\x00\\x00\\xb2\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x03\\xb5\\\n\t\\x00\\x00\\x01\\x04\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x06\\x2f\\\n", "\"\n\tqt_resource_struct_v2 = b\"\\\n\t\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01\\\n\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x00\\x10\\x00\\x02\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x06\\\n\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x03\\\n\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x00\\x20\\x00\\x02\\x00\\x00\\x00\\x02\\x00\\x00\\x00\\x04\\\n\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\n", "\\x00\\x00\\x01\\xf4\\x00\\x01\\x00\\x00\\x00\\x01\\x00\\x00\\x0d\\xb5\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xda\\x44\\\n\t\\x00\\x00\\x02\\x16\\x00\\x01\\x00\\x00\\x00\\x01\\x00\\x00\\x13\\x6c\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xda\\x1e\\\n\t\\x00\\x00\\x00\\x20\\x00\\x02\\x00\\x00\\x00\\x0b\\x00\\x00\\x00\\x07\\\n\t\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x01\\xae\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0b\\x2b\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd9\\x21\\\n\t\\x00\\x00\\x00\\x2c\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd8\\x02\\\n", "\\x00\\x00\\x01\\x5a\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x08\\x78\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd9\\xc4\\\n\t\\x00\\x00\\x01\\x88\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0a\\x01\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd8\\xc1\\\n\t\\x00\\x00\\x00\\xde\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x04\\xfe\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd8\\x82\\\n\t\\x00\\x00\\x00\\x92\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x02\\xb0\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd6\\xf4\\\n\t\\x00\\x00\\x01\\x3a\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x07\\x78\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd6\\x77\\\n", "\\x00\\x00\\x00\\x56\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x01\\x61\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xda\\xa1\\\n\t\\x00\\x00\\x01\\xd8\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x0c\\xb6\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd7\\xbf\\\n\t\\x00\\x00\\x00\\xb2\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x03\\xb5\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd8\\xdd\\\n\t\\x00\\x00\\x01\\x04\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\x06\\x2f\\\n\t\\x00\\x00\\x01\\x88\\x06\\x4f\\xd8\\x60\\\n\t\"\n\tqt_version = [int(v) for v in QtCore.qVersion().split('.')]\n", "if qt_version < [5, 8, 0]:\n\t    rcc_version = 1\n\t    qt_resource_struct = qt_resource_struct_v1\n\telse:\n\t    rcc_version = 2\n\t    qt_resource_struct = qt_resource_struct_v2\n\tdef qInitResources():\n\t    QtCore.qRegisterResourceData(rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data)\n\tdef qCleanupResources():\n\t    QtCore.qUnregisterResourceData(rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data)\n", "qInitResources()\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonWindow.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import QFile, QIODevice\n\tfrom PyQt5.QtCore import QObject, QEvent\n\tfrom PyQt5.QtWidgets import QMainWindow, QApplication, QWidget, QMenuBar\n\tfrom .FramelessHelper import FramelessHelper\n\tfrom .QxWindowButtonGroup import WindowButtonGroup\n\tfrom .QxRibbonBar import RibbonBar\n\tfrom . import QxRibbonRes_rc\n", "class RibbonWindow(QMainWindow):\n\t    def __init__(self, parent=None, use_ribbon=True):\n\t        super().__init__(parent)\n\t        self.m_useRibbon = use_ribbon\n\t        self.m_theme = RibbonWindow.Office2013Theme\n\t        self.m_ribbonBar: RibbonBar = None\n\t        self.m_windowButtonGroup: WindowButtonGroup = None\n\t        self.m_framelessHelper: FramelessHelper = None\n\t        if self.m_useRibbon:\n\t            self.setRibbonTheme(self.ribbonTheme())\n", "            self.setMenuWidget(RibbonBar(self))\n\t    def ribbonBar(self) -> RibbonBar:\n\t        return self.m_ribbonBar\n\t    def setRibbonTheme(self, theme):\n\t        if theme == RibbonWindow.NormalTheme:\n\t            self.loadTheme(':/theme/res/default.qss')\n\t        elif theme == RibbonWindow.Office2013Theme:\n\t            self.loadTheme(':/theme/res/office2013.qss')\n\t        else:\n\t            self.loadTheme(':/theme/res/default.qss')\n", "        self.m_theme = theme\n\t    def ribbonTheme(self) -> int:\n\t        return self.m_theme\n\t    def isUseRibbon(self) -> bool:\n\t        return self.m_useRibbon\n\t    def updateWindowFlag(self, flags):\n\t        if self.isUseRibbon():\n\t            self.m_windowButtonGroup.updateWindowFlag(flags)\n\t        self.repaint()\n\t    def windowButtonFlags(self) -> int:\n", "        if self.isUseRibbon():\n\t            return self.m_windowButtonGroup.windowButtonFlags()\n\t        return self.windowFlags()\n\t    def _setMenuWidget(self, bar: QWidget):\n\t        if isinstance(bar, RibbonBar):\n\t            self.m_ribbonBar: RibbonBar = bar\n\t            self.m_ribbonBar.installEventFilter(self)\n\t            if self.m_framelessHelper is None:\n\t                self.m_framelessHelper = FramelessHelper(self)\n\t            self.m_framelessHelper.setTitleHeight(self.m_ribbonBar.titleBarHeight())\n", "            if self.m_windowButtonGroup is None:\n\t                self.m_windowButtonGroup = WindowButtonGroup(self)\n\t            s = self.m_windowButtonGroup.sizeHint()\n\t            s.setHeight(self.m_ribbonBar.titleBarHeight())\n\t            self.m_windowButtonGroup.setFixedSize(s)\n\t            self.m_windowButtonGroup.setWindowStates(self.windowState())\n\t            self.m_useRibbon = True\n\t            self.m_windowButtonGroup.show()\n\t        else:\n\t            self.m_ribbonBar = None\n", "            self.m_useRibbon = False\n\t            self.m_framelessHelper = None\n\t            if self.m_windowButtonGroup:\n\t                self.m_windowButtonGroup.hide()\n\t    def setMenuWidget(self, bar: QWidget):\n\t        super().setMenuWidget(bar)\n\t        self._setMenuWidget(bar)\n\t    def setMenuBar(self, bar: QMenuBar):\n\t        super().setMenuBar(bar)\n\t        self._setMenuWidget(bar)\n", "    def resizeEvent(self, e):\n\t        if self.m_ribbonBar:\n\t            if self.m_ribbonBar.size().width() != self.size().width():\n\t                self.m_ribbonBar.setFixedWidth(self.size().width())\n\t            if self.m_windowButtonGroup:\n\t                self.m_ribbonBar.setWindowButtonsSize(self.m_windowButtonGroup.size())\n\t        super().resizeEvent(e)\n\t    def eventFilter(self, obj: QObject, e: QEvent) -> bool:\n\t        \"\"\"\n\t        过滤是为了把 ribbonBar 上的动作传递到 mainwindow，再传递到 frameless\n", "        由于 ribbonbar 会遮挡 frameless 的区域，导致 frameless 无法捕获这些消息\n\t        \"\"\"\n\t        if obj == self.m_ribbonBar:\n\t            e_list = (\n\t                QEvent.MouseButtonPress,\n\t                QEvent.MouseButtonRelease,\n\t                QEvent.MouseMove,\n\t                QEvent.Leave,\n\t                QEvent.HoverMove,\n\t                QEvent.MouseButtonDblClick\n", "            )\n\t            if e.type() in e_list:\n\t                QApplication.sendEvent(self, e)\n\t        return super().eventFilter(obj, e)\n\t    def event(self, e: QEvent):\n\t        if e and e.type() == QEvent.WindowStateChange:\n\t            if self.isUseRibbon():\n\t                self.m_windowButtonGroup.setWindowStates(self.windowState())\n\t        return super().event(e)\n\t    def loadTheme(self, filepath: str):\n", "        qFile = QFile(filepath)\n\t        if not qFile.open(QIODevice.ReadOnly | QIODevice.Text):\n\t            return\n\t        style_str = str(qFile.readAll(), encoding='utf-8')\n\t        self.setStyleSheet(style_str)\n\t        qFile.close()\n\t    NormalTheme = 0\n\t    Office2013Theme = 1\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonApplicationButton.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import Qt\n\tfrom PyQt5.QtWidgets import QPushButton\n\tclass RibbonApplicationButton(QPushButton):\n\t    def __init__(self, *args):\n\t        \"\"\"\n\t        RibbonApplicationButton(parent=None)\n\t        RibbonApplicationButton(text: str, parent=None)\n", "        RibbonApplicationButton(icon: QIcon, text: str, parent=None)\n\t        \"\"\"\n\t        super().__init__(*args)\n\t        self.setFocusPolicy(Qt.NoFocus)\n\t        self.setFlat(True)\n\t        self.setMinimumWidth(40)\n"]}
{"filename": "pyqt/PyRibbon/QxWindowButtonGroup.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import Qt, QSize\n\tfrom PyQt5.QtCore import QEvent\n\tfrom PyQt5.QtWidgets import QWidget, QPushButton\n\tclass WindowToolButton(QPushButton):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.setFlat(True)\n", "class WindowButtonGroup(QWidget):\n\t    def __init__(self, parent, flags=None):\n\t        super().__init__(parent)\n\t        self.m_closeStretch = 4\n\t        self.m_maxStretch = 3\n\t        self.m_minStretch = 3\n\t        self.m_iconScale = 0.5\n\t        self.m_winFlags = Qt.Widget\n\t        self.m_closeButton = None\n\t        self.m_minimizeButton = None\n", "        self.m_maximizeButton = None\n\t        if flags:\n\t            self.m_winFlags = flags\n\t        self.updateWindowFlag()\n\t        if parent:\n\t            parent.installEventFilter(self)\n\t    def setupMinimizeButton(self, on: bool):\n\t        if on:\n\t            if not self.m_minimizeButton:\n\t                self.m_minimizeButton = WindowToolButton(self)\n", "                self.m_minimizeButton.setObjectName('qx_MinimizeWindowButton')\n\t                self.m_minimizeButton.setFixedSize(30, 28)\n\t                self.m_minimizeButton.setFocusPolicy(Qt.NoFocus)\n\t                self.m_minimizeButton.clicked.connect(self.onMinimizeWindow)\n\t            self.m_minimizeButton.setIconSize(self.m_minimizeButton.size() * self.m_iconScale)\n\t            self.m_minimizeButton.show()\n\t        elif self.m_minimizeButton:\n\t            self.m_minimizeButton.hide()\n\t        self.updateSize()\n\t    def setupMaximizeButton(self, on: bool):\n", "        if on:\n\t            if not self.m_maximizeButton:\n\t                self.m_maximizeButton = WindowToolButton(self)\n\t                self.m_maximizeButton.setObjectName('qx_MaximizeWindowButton')\n\t                self.m_maximizeButton.setFixedSize(30, 28)\n\t                self.m_maximizeButton.setFocusPolicy(Qt.NoFocus)\n\t                self.m_maximizeButton.clicked.connect(self.onMaximizeWindow)\n\t            self.m_maximizeButton.setIconSize(self.m_maximizeButton.size() * self.m_iconScale)\n\t            self.m_maximizeButton.show()\n\t        elif self.m_maximizeButton:\n", "            self.m_maximizeButton.hide()\n\t        self.updateSize()\n\t    def setupCloseButton(self, on: bool):\n\t        if on:\n\t            if not self.m_closeButton:\n\t                self.m_closeButton = WindowToolButton(self)\n\t                self.m_closeButton.setObjectName('qx_CloseWindowButton')\n\t                self.m_closeButton.setFixedSize(40, 28)\n\t                self.m_closeButton.setFocusPolicy(Qt.NoFocus)\n\t                self.m_closeButton.clicked.connect(self.onCloseWindow)\n", "            self.m_closeButton.setIconSize(self.m_closeButton.size() * self.m_iconScale)\n\t            self.m_closeButton.show()\n\t        elif self.m_closeButton:\n\t            self.m_closeButton.hide()\n\t        self.updateSize()\n\t    def updateWindowFlag(self, flags=None):\n\t        if flags:\n\t            if flags & Qt.WindowCloseButtonHint:\n\t                self.m_winFlags |= Qt.WindowCloseButtonHint\n\t            else:\n", "                self.m_winFlags &= ~Qt.WindowCloseButtonHint\n\t            if flags & Qt.WindowMaximizeButtonHint:\n\t                self.m_winFlags |= Qt.WindowMaximizeButtonHint\n\t            else:\n\t                self.m_winFlags &= ~Qt.WindowMaximizeButtonHint\n\t            if flags & Qt.WindowMinimizeButtonHint:\n\t                self.m_winFlags |= Qt.WindowMinimizeButtonHint\n\t            else:\n\t                self.m_winFlags &= ~Qt.WindowMinimizeButtonHint\n\t        else:\n", "            flags = self.parentWidget().windowFlags()\n\t            self.m_winFlags = flags\n\t        self.setupMinimizeButton(flags & Qt.WindowMinimizeButtonHint)\n\t        self.setupMaximizeButton(flags & Qt.WindowMaximizeButtonHint)\n\t        self.setupCloseButton(flags & Qt.WindowCloseButtonHint)\n\t    def setButtonWidthStretch(self, close_st=4, max_st=3, min_st=3):\n\t        self.m_closeStretch = close_st\n\t        self.m_maxStretch = max_st\n\t        self.m_minStretch = min_st\n\t    def setIconScale(self, icon_scale=0.5):\n", "        self.m_iconScale = icon_scale\n\t    def setWindowStates(self, states: Qt.WindowStates):\n\t        if self.m_maximizeButton:\n\t            on = (states & Qt.WindowMaximized == Qt.WindowMaximized)\n\t            self.m_maximizeButton.setChecked(on)\n\t            self.m_maximizeButton.setToolTip(self.tr(\"Restore\") if on else self.tr(\"Maximize\"))\n\t    def windowButtonFlags(self) -> int:\n\t        f = Qt.Widget   # Qt::widget is 0\n\t        if self.m_winFlags & Qt.WindowCloseButtonHint:\n\t            f |= Qt.WindowCloseButtonHint\n", "        if self.m_winFlags & Qt.WindowMaximizeButtonHint:\n\t            f |= Qt.WindowMaximizeButtonHint\n\t        if self.m_winFlags & Qt.WindowMinimizeButtonHint:\n\t            f |= Qt.WindowMinimizeButtonHint\n\t        return f\n\t    def parentResize(self):\n\t        par = self.parentWidget()\n\t        if par:\n\t            pSize = par.size()\n\t            self.move(pSize.width() - self.width() - 1, 1)\n", "    def updateSize(self):\n\t        self.setFixedSize(self.sizeHint())\n\t        self.resize(self.size())\n\t    def resize(self, size: QSize):\n\t        tw = 0\n\t        if self.m_closeButton:\n\t            tw += self.m_closeStretch\n\t        if self.m_maximizeButton:\n\t            tw += self.m_maxStretch\n\t        if self.m_minimizeButton:\n", "            tw += self.m_minStretch\n\t        # Affected by the QSS style, the minimum width and height cannot be set,\n\t        # so it is necessary to set fixed size before moving\n\t        x = 0\n\t        if self.m_minimizeButton:\n\t            w = (self.m_minStretch / tw) * size.width()\n\t            # self.m_minimizeButton.setGeometry(x, 0, w, size.height())\n\t            self.m_minimizeButton.setFixedSize(int(w), size.height())\n\t            self.m_minimizeButton.move(x, 0)\n\t            x += w\n", "        if self.m_maximizeButton:\n\t            w = (self.m_maxStretch / tw) * size.width()\n\t            # self.m_maximizeButton.setGeometry(x, 0, w, size.height())\n\t            self.m_maximizeButton.setFixedSize(int(w), size.height())\n\t            self.m_maximizeButton.move(int(x), 0)\n\t            x += w\n\t        if self.m_closeButton:\n\t            w = (self.m_closeStretch / tw) * size.width()\n\t            # self.m_closeButton.setGeometry(x, 0, w, size.height())\n\t            self.m_closeButton.setFixedSize(int(w), size.height())\n", "            self.m_closeButton.move(int(x), 0)\n\t    def sizeHint(self) -> QSize:\n\t        w = 0\n\t        h = 28\n\t        if self.m_closeButton:\n\t            w += 40\n\t        if self.m_maximizeButton:\n\t            w += 30\n\t        if self.m_minimizeButton:\n\t            w += 30\n", "        return QSize(w, h)\n\t    def eventFilter(self, watched, e: QEvent) -> bool:\n\t        if watched == self.parentWidget():\n\t            if e.type() == QEvent.Resize:\n\t                self.parentResize()\n\t        return False    # 不截断任何事件\n\t    def resizeEvent(self, e):\n\t        self.resize(e.size())\n\t    def onCloseWindow(self):\n\t        try:\n", "            if self.parentWidget():\n\t                self.parentWidget().close()\n\t        except Exception as e:\n\t            print(__file__, 'onCloseWindow:', e)\n\t    def onMinimizeWindow(self):\n\t        if self.parentWidget():\n\t            self.parentWidget().showMinimized()\n\t    def onMaximizeWindow(self):\n\t        par = self.parentWidget()\n\t        if par:\n", "            if par.isMaximized():\n\t                par.showNormal()\n\t            else:\n\t                par.showMaximized()\n"]}
{"filename": "pyqt/PyRibbon/QxRibbonTabBar.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\tfrom PyQt5.QtCore import QMargins\n\tfrom PyQt5.QtWidgets import QTabBar\n\tclass RibbonTabBar(QTabBar):\n\t    def __init__(self, parent):\n\t        super().__init__(parent)\n\t        self.m_tabMargin: QMargins = QMargins(6, 0, 0, 0)\n\t        self.setExpanding(False)\n", "    def tabMargin(self) -> QMargins:\n\t        return self.m_tabMargin\n\t    def setTabMargin(self, margin: QMargins):\n\t        self.m_tabMargin = margin\n"]}
{"filename": "pyqt/demo/RibbonDemo.py", "chunked_list": ["#!/usr/bin/env python3\n\t# Copyright (c) 2023 maminjie <canpool@163.com>\n\t# SPDX-License-Identifier: GPL-3.0\n\timport sys\n\timport logging\n\tfrom PyQt5.QtCore import Qt, QFile, QIODevice\n\tfrom PyQt5.QtGui import QIcon, QKeySequence, QColor, QFont\n\tfrom PyQt5.QtWidgets import QApplication, QTextEdit, QStatusBar, QLineEdit, QRadioButton, \\\n\t    QToolButton, QCalendarWidget, QSizePolicy, QMenu, QAction, QLabel, QFontComboBox, \\\n\t    QMessageBox, QSpinBox, QButtonGroup, QFileDialog\n", "from PyRibbon import Ribbon, RibbonWindow, RibbonBar, RibbonButtonGroup, RibbonMenu, \\\n\t    RibbonPage, RibbonQuickAccessBar, RibbonGroup, RibbonGalleryGroup, RibbonButton, \\\n\t    RibbonComboBox, RibbonLineEdit, RibbonCheckBox, RibbonCtrlContainer, RibbonApplicationButton\n\tlogging.basicConfig(format='%(asctime)s %(levelname)s: [%(filename)s:%(lineno)d]: %(message)s',\n\t                    level=logging.DEBUG)\n\tclass MainWindow(RibbonWindow):\n\t    def __init__(self, parent=None):\n\t        super().__init__(parent)\n\t        self.m_pageContext = None\n\t        self.m_pageContext2 = None\n", "        self.m_edit = QTextEdit(self)\n\t        self.initWidgets()\n\t    def initWidgets(self):\n\t        self.setWindowTitle('pyribbon mainwindow demo')\n\t        self.setCentralWidget(self.m_edit)\n\t        self.setStatusBar(QStatusBar())\n\t        ribbon = self.ribbonBar()\n\t        ribbon.setContentsMargins(5, 0, 5, 0)\n\t        ribbon.applicationButton().setText(\"File\")\n\t        pageMain = ribbon.addPage('Main')\n", "        pageMain.setObjectName(\"pageMain\")\n\t        self.createPageMain(pageMain)\n\t        pageOther = RibbonPage(ribbon)\n\t        pageOther.setPageName('Other')\n\t        pageOther.setObjectName('pageOther')\n\t        ribbon.addPage(pageOther)\n\t        self.createPageOther(pageOther)\n\t        pageDelete = RibbonPage()\n\t        pageDelete.setPageName('Delete')\n\t        pageDelete.setObjectName('pageDelete')\n", "        ribbon.addPage(pageDelete)\n\t        self.createPageDelete(pageDelete)\n\t        pageSize = RibbonPage()\n\t        pageSize.setPageName(\"Size(example long page)\")\n\t        pageSize.setObjectName(\"pageSize\")\n\t        ribbon.addPage(pageSize)\n\t        self.createPageSize(pageSize)\n\t        # pageContext created after page\n\t        self.createPageContext1()\n\t        self.createPageContext2()\n", "        quickAccessBar = ribbon.quickAccessBar()\n\t        self.createQuickAccessBar(quickAccessBar)\n\t        rightBar = ribbon.rightButtonGroup()\n\t        self.createRightButtonGroup(rightBar)\n\t        self.setMinimumWidth(500)\n\t        self.showMaximized()\n\t        self.setWindowIcon(QIcon('res/logo.png'))\n\t    def createPageMain(self, page: RibbonPage):\n\t        groupStyle = page.addGroup(\"ribbon style\")\n\t        actSave = self.createAction(\"Save\", \"res/save.svg\")\n", "        actSave.setShortcut(QKeySequence(\"Ctrl+S\"))\n\t        groupStyle.addLargeAction(actSave)\n\t        actSave.triggered.connect(lambda: self.m_edit.append(\"actSave clicked\"))\n\t        actHideRibbon = self.createAction(\"hide ribbon\", \"res/hideRibbon.svg\", \"actHideRibobn\")\n\t        actHideRibbon.setCheckable(True)\n\t        groupStyle.addSmallAction(actHideRibbon)\n\t        actHideRibbon.triggered.connect(lambda b: self.ribbonBar().setMinimized(b))\n\t        self.ribbonBar().minimizationChanged.connect(lambda minimized: actHideRibbon.setChecked(minimized))\n\t        actShowHideButton = self.createAction(\"show hide button\", \"res/showHideButton.svg\", \"show hide buttong\")\n\t        actShowHideButton.setCheckable(True)\n", "        groupStyle.addSmallAction(actShowHideButton)\n\t        actShowHideButton.triggered.connect(lambda b: self.ribbonBar().showMinimumButton(b))\n\t        actShowHideButton.trigger()\n\t        actwordWrapIn2row = self.createAction(\"word wrap in 2row\", \"res/wordwrap.svg\")\n\t        actwordWrapIn2row.setCheckable(True)\n\t        groupStyle.addSmallAction(actwordWrapIn2row)\n\t        actwordWrapIn2row.triggered.connect(self.onActionWordWrapIn2rowTriggered)\n\t        g = QButtonGroup(page)\n\t        r = QRadioButton(self)\n\t        r.setText(\"use office style\")\n", "        r.setObjectName(\"user office style\")\n\t        r.setChecked(True)\n\t        g.addButton(r, RibbonBar.OfficeStyle)\n\t        groupStyle.addSmallWidget(r)\n\t        r = QRadioButton(self)\n\t        r.setText(\"use wps style\")\n\t        r.setObjectName(\"user wps style\")\n\t        r.setChecked(False)\n\t        g.addButton(r, RibbonBar.WpsLiteStyle)\n\t        groupStyle.addSmallWidget(r)\n", "        r = QRadioButton(self)\n\t        r.setText(\"use office 2row style\")\n\t        r.setObjectName(\"user office 2row style\")\n\t        r.setChecked(False)\n\t        g.addButton(r, RibbonBar.OfficeStyleTwoRow)\n\t        groupStyle.addSmallWidget(r)\n\t        r = QRadioButton(self)\n\t        r.setText(\"use wps 2row style\")\n\t        r.setObjectName(\"user wps 2row style\")\n\t        r.setChecked(False)\n", "        g.addButton(r, RibbonBar.WpsLiteStyleTwoRow)\n\t        groupStyle.addSmallWidget(r)\n\t        g.buttonClicked[int].connect(self.onStyleClicked)\n\t        groupToolButtonStyle = page.addGroup(\"ribobn toolbutton style\")\n\t        menu = RibbonMenu(self)\n\t        itemIcon = QIcon(\"res/item.svg\")\n\t        for i in range(5):\n\t            a = menu.addAction(itemIcon, \"item {}\".format(i + 1))\n\t            a.setObjectName(\"item {}\".format(i + 1))\n\t        act = self.createAction(\"test 1\", \"res/test1.svg\")\n", "        act.setMenu(menu)\n\t        act.setToolTip(\"use QToolButton:MenuButtonPopup mode\")\n\t        btn = groupToolButtonStyle.addSmallAction(act)\n\t        btn.setPopupMode(QToolButton.MenuButtonPopup)\n\t        act = self.createAction(\"test 2\", \"res/test2.svg\")\n\t        act.setMenu(menu)\n\t        act.setToolTip(\"use QToolButton:InstantPopup mode\")\n\t        btn = groupToolButtonStyle.addSmallAction(act)\n\t        btn.setPopupMode(QToolButton.InstantPopup)\n\t        groupToolButtonStyle.addSeparator()\n", "        act = self.createAction(\"Delayed Popup\", \"res/folder-cog.svg\")\n\t        act.setMenu(menu)\n\t        act.triggered.connect(self.onDelayedPopupCheckabletriggered)\n\t        btn = groupToolButtonStyle.addLargeAction(act)\n\t        btn.setPopupMode(QToolButton.DelayedPopup)\n\t        act = self.createAction(\"Menu Button Popup\", \"res/folder-star.svg\")\n\t        act.setMenu(menu)\n\t        act.triggered.connect(self.onMenuButtonPopupCheckabletriggered)\n\t        btn = groupToolButtonStyle.addLargeAction(act)\n\t        btn.setPopupMode(QToolButton.MenuButtonPopup)\n", "        act = self.createAction(\"Instant Popup\", \"res/folder-stats.svg\")\n\t        act.setMenu(menu)\n\t        act.triggered.connect(self.onInstantPopupCheckabletriggered)\n\t        btn = groupToolButtonStyle.addLargeAction(act)\n\t        btn.setPopupMode(QToolButton.InstantPopup)\n\t        act = self.createAction(\"Delayed Popup checkable\", \"res/folder-table.svg\")\n\t        act.setCheckable(True)\n\t        act.setMenu(menu)\n\t        act.triggered.connect(self.onDelayedPopupCheckableTest)\n\t        btn = groupToolButtonStyle.addLargeAction(act)\n", "        btn.setPopupMode(QToolButton.DelayedPopup)\n\t        act = self.createAction(\"Menu Button Popup checkable\", \"res/folder-checkmark.svg\")\n\t        act.setCheckable(True)\n\t        act.setMenu(menu)\n\t        act.triggered.connect(self.onMenuButtonPopupCheckableTest)\n\t        btn = groupToolButtonStyle.addLargeAction(act)\n\t        btn.setPopupMode(QToolButton.MenuButtonPopup)\n\t        act = self.createAction(\"disable action\", \"res/disable.svg\")\n\t        act.setCheckable(True)\n\t        act.setMenu(menu)\n", "        act.setEnabled(False)\n\t        groupToolButtonStyle.addLargeAction(act)\n\t        optAct = QAction(self)\n\t        optAct.triggered.connect(lambda: QMessageBox.information(self, \"Option\", \"Option Action Triggered\"))\n\t        groupToolButtonStyle.addOptionAction(optAct)\n\t        # group 2\n\t        group2 = page.addGroup(\"group 2\")\n\t        actShowContext = self.createAction(\"show Context\", \"res/showContext.svg\")\n\t        actShowContext.setCheckable(True)\n\t        actShowContext.triggered.connect(self.onShowContextPage)\n", "        group2.addLargeAction(actShowContext)\n\t        actDeleteContext = self.createAction(\"delete Context\", \"res/deleteContext.svg\")\n\t        actDeleteContext.triggered.connect(lambda: (self._destroyPageContext1(), actDeleteContext.setDisabled(True)))\n\t        group2.addLargeAction(actDeleteContext)\n\t        # group 3\n\t        groupWidgetTest = page.addGroup(\"widget test\")\n\t        groupWidgetTest.setObjectName(\"groupWidgetTest\")\n\t        com = RibbonComboBox(self)\n\t        com.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n\t        com.setWindowTitle(\"comboBox\")\n", "        for i in range(40):\n\t            com.addItem(\"RibbonComboBox test{}\".format(i + 1))\n\t        groupWidgetTest.addSmallWidget(com)\n\t        com = RibbonComboBox(self)\n\t        com.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n\t        com.setWindowTitle(\"ComboBox Editable\")\n\t        for i in range(40):\n\t            com.addItem(\"item {}\".format(i + 1))\n\t        com.setEditable(True)\n\t        groupWidgetTest.addSmallWidget(com)\n", "        lineEdit = RibbonLineEdit(self)\n\t        lineEdit.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n\t        lineEdit.setWindowTitle(\"Line Edit\")\n\t        lineEdit.setText(\"RibbonLineEdit\")\n\t        # w = lineEdit.parentWidget()\n\t        # while w:\n\t        #     print(w.metaObject().className())\n\t        #     w = w.parentWidget()\n\t        groupWidgetTest.addSmallWidget(lineEdit)\n\t        checkBox = RibbonCheckBox(self)\n", "        checkBox.setText(\"checkBox\")\n\t        groupWidgetTest.addSmallWidget(checkBox)\n\t        groupWidgetTest.addSeparator()\n\t        calendarWidget = QCalendarWidget(self)\n\t        calendarWidget.setSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n\t        calendarWidget.setObjectName(\"calendarWidget\")\n\t        groupWidgetTest.addLargeWidget(calendarWidget)\n\t        groupWidgetTest.setExpanding()\n\t        optAct = QAction(self)\n\t        optAct.triggered.connect(lambda: QMessageBox.information(self, \"Option\", \"Option Action Triggered\"))\n", "        groupWidgetTest.addOptionAction(optAct)\n\t        groupWidgetTest.setVisible(True)\n\t    def _destroyPageContext1(self):\n\t        if self.m_pageContext:\n\t            self.ribbonBar().destroyPageContext(self.m_pageContext)\n\t            self.m_pageContext = None\n\t    def createPageOther(self, page: RibbonPage):\n\t        group1 = RibbonGroup(\"group one\", page)\n\t        group1.setObjectName(\"PageOther-group1\")\n\t        buttonGroup1 = RibbonButtonGroup(group1)\n", "        buttonGroup1.addAction(self.createAction(\"Decrease Margin\", \"res/Decrease-Margin.svg\"))\n\t        buttonGroup1.addAction(self.createAction(\"Decrease Indent\", \"res/Decrease-Indent.svg\"))\n\t        buttonGroup1.addAction(self.createAction(\"Wrap Image Left\", \"res/Wrap-Image Left.svg\"))\n\t        buttonGroup1.addAction(self.createAction(\"Wrap Image Right\", \"res/Wrap-Image Right.svg\"))\n\t        group1.addWidget(buttonGroup1, RibbonGroup.Medium)\n\t        buttonGroup2 = RibbonButtonGroup(group1)\n\t        titleAlignment = self.createAction(\"Align Right\", \"res/Align-Right.svg\")\n\t        titleAlignment.setProperty(\"align\", int(Qt.AlignRight | Qt.AlignVCenter))\n\t        buttonGroup2.addAction(titleAlignment)\n\t        titleAlignment = self.createAction(\"Align Left\", \"res/Align-Left.svg\")\n", "        titleAlignment.setProperty(\"align\", int(Qt.AlignLeft | Qt.AlignVCenter))\n\t        buttonGroup2.addAction(titleAlignment)\n\t        titleAlignment = self.createAction(\"Align Center\", \"res/Align-Center.svg\")\n\t        titleAlignment.setProperty(\"align\", int(Qt.AlignCenter))\n\t        buttonGroup2.addAction(titleAlignment)\n\t        buttonGroup2.actionTriggered.connect(self.onButtonGroupActionTriggered)\n\t        group1.addWidget(buttonGroup2, RibbonGroup.Medium)\n\t        page.addGroup(group1)\n\t        # Gallery\n\t        gallery = group1.addGallery()\n", "        galleryActions = []\n\t        galleryActions.append(self._createGalleryAction(\"Document File\", \"res/gallery/Document-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Download File\", \"res/gallery/Download-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Drive File Four Word\", \"res/gallery/Drive-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Dropbox File\", \"res/gallery/Dropbox-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Email File\", \"res/gallery/Email-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Encode File\", \"res/gallery/Encode-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Favorit File\", \"res/gallery/Favorit-File.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"File Error\", \"res/gallery/File-Error.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"File Read Only\", \"res/gallery/File-Readonly.svg\"))\n", "        galleryActions.append(self._createGalleryAction(\"File Settings\", \"res/gallery/File-Settings.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Presentation File\", \"res/gallery/Presentation-File.svg\"))\n\t        galleryGroup1 = gallery.addCategoryActions(\"Files\", galleryActions)\n\t        galleryGroup1.setGalleryGroupStyle(RibbonGalleryGroup.IconWithWordWrapText)\n\t        galleryGroup1.setGridMinimumWidth(80)\n\t        galleryActions.clear()\n\t        galleryActions.append(self._createGalleryAction(\"Photoshop\", \"res/gallery/Photoshop.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Internet-Explorer\", \"res/gallery/Internet-Explorer.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Illustrator\", \"res/gallery/Illustrator.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Google-Maps\", \"res/gallery/Google-Maps.svg\"))\n", "        galleryActions.append(self._createGalleryAction(\"Adobe\", \"res/gallery/Adobe.svg\"))\n\t        galleryActions.append(self._createGalleryAction(\"Word\", \"res/gallery/Word.svg\"))\n\t        galleryGroup2 = gallery.addCategoryActions(\"Apps\", galleryActions)\n\t        galleryGroup2.setGridMinimumWidth(80)\n\t        gallery.setCurrentViewGroup(galleryGroup1)\n\t        optAct = QAction(self)\n\t        optAct.setObjectName(\"debug\")\n\t        group1.addOptionAction(optAct)\n\t        group2 = RibbonGroup(\"group two\")\n\t        group2.setObjectName(\"PageOhter-group2\")\n", "        page.addGroup(group2)\n\t        actionRemoveAppBtn = self.createAction(\"remove application button\", \"res/remove-app-btn.svg\")\n\t        actionRemoveAppBtn.setCheckable(True)\n\t        actionRemoveAppBtn.toggled.connect(self.onActionRemoveAppBtnTriggered)\n\t        group2.addLargeAction(actionRemoveAppBtn)\n\t        actionLongText = self.createAction(\"show very long text in a button, balabalabala etc\", \"res/long-text.svg\",\n\t                                           \"long-text\")\n\t        group2.addLargeAction(actionLongText)\n\t        groupStyle = RibbonGroup(\"style\")\n\t        groupStyle.setObjectName(\"PageOther-groupStyle\")\n", "        page.addGroup(groupStyle)\n\t        actionUseQss = self.createAction(\"use qss\", \"res/useqss.svg\")\n\t        actionUseQss.triggered.connect(self.onActionUseQssTriggered)\n\t        groupStyle.addSmallAction(actionUseQss)\n\t        actionWindowFlagNormalButton = self.createAction(\"window normal button\", \"res/windowsflag-normal.svg\")\n\t        actionWindowFlagNormalButton.setCheckable(True)\n\t        actionWindowFlagNormalButton.setChecked(True)\n\t        groupStyle.addSmallAction(actionWindowFlagNormalButton)\n\t        actionWindowFlagNormalButton.triggered.connect(self.onActionWindowFlagNormalButtonTriggered)\n\t        groupUtf8 = RibbonGroup(\"中文显示测试\")\n", "        groupUtf8.setObjectName(\"PageOther-groupUtf8\")\n\t        page.addGroup(groupUtf8)\n\t        actionChangeText = self.createAction(\"改变显示为英文\", \"res/chinese-char.svg\", \"actionChangeText\")\n\t        actionChangeText.setCheckable(True)\n\t        actionChangeText.setChecked(False)\n\t        groupUtf8.addLargeAction(actionChangeText)\n\t        actionChangeText.triggered.connect(lambda on: (\n\t            (groupUtf8.setGroupName(\"show chinese char\"), actionChangeText.setText(\"show in chinese\")) if on else\n\t            (groupUtf8.setGroupName(\"中文显示测试\"), actionChangeText.setText(\"改变显示为英文\"))\n\t        ))\n", "        groupContextPage = RibbonGroup(\"Context Page\")\n\t        page.addGroup(groupContextPage)\n\t        a1 = self.createAction(\"Context Page 1\", \"res/ContextPage.svg\")\n\t        a1.setCheckable(True)\n\t        a1.triggered.connect(lambda c: self.ribbonBar().setPageContextVisible(self.m_pageContext, c))\n\t        a2 = self.createAction(\"Context Page 2\", \"res/ContextPage.svg\")\n\t        a2.setCheckable(True)\n\t        a2.triggered.connect(lambda c: self.ribbonBar().setPageContextVisible(self.m_pageContext2, c))\n\t        groupContextPage.addLargeAction(a1)\n\t        groupContextPage.addLargeAction(a2)\n", "    def _createGalleryAction(self, text: str, iconurl: str) -> QAction:\n\t        act = self.createAction(text, iconurl)\n\t        act.triggered.connect(lambda: self.m_edit.append(\"{} triggered\".format(text)))\n\t        return act\n\t    def createPageDelete(self, page: RibbonPage):\n\t        group1 = RibbonGroup(\"group 1\")\n\t        group2 = RibbonGroup(\"group 2\")\n\t        actionRemoveGroup = self.createAction(\"remove group\", \"res/remove.svg\")\n\t        actionRemoveGroup.triggered.connect(lambda: page.removeGroup(group2))\n\t        group1.addLargeAction(actionRemoveGroup)\n", "        actionRemovePage = self.createAction(\"remove this page\", \"res/removePage.svg\")\n\t        actionRemovePage.triggered.connect(lambda: (\n\t            self.ribbonBar().removePage(page),\n\t            page.hide(),\n\t            page.deleteLater(),\n\t            actionRemovePage.setDisabled(True)\n\t        ))\n\t        group2.addLargeAction(actionRemovePage)\n\t        page.addGroup(group1)\n\t        page.addGroup(group2)\n", "    def createPageSize(self, page: RibbonPage):\n\t        group = page.addGroup(\"Font\")\n\t        buttonGroup1 = RibbonButtonGroup(group)\n\t        buttonGroup1.setObjectName(\"button group1\")\n\t        labelFontSize = QLabel(buttonGroup1)\n\t        labelFontSize.setText(\"self font\")\n\t        labelFontSize.setObjectName(\"labelFontSize\")\n\t        buttonGroup1.addWidget(labelFontSize)\n\t        fontComWidget = QFontComboBox(buttonGroup1)\n\t        fontComWidget.setObjectName(\"fontComboBox\")\n", "        fontComWidget.currentFontChanged.connect(self.onFontComWidgetCurrentFontChanged)\n\t        buttonGroup1.addWidget(fontComWidget)\n\t        act = group.addWidget(buttonGroup1, RibbonGroup.Medium)\n\t        act.setObjectName(buttonGroup1.objectName())\n\t        buttonGroup2 = RibbonButtonGroup(group)\n\t        buttonGroup2.setObjectName(\"button group2\")\n\t        buttonGroup2.addAction(self.createAction(\"Bold\", \"res/bold.svg\"))\n\t        buttonGroup2.addAction(self.createAction(\"Italic\", \"res/Italic.svg\"))\n\t        buttonGroup2.addSeparator()\n\t        buttonGroup2.addAction(self.createAction(\"Left alignment\", \"res/al-left.svg\"))\n", "        buttonGroup2.addAction(self.createAction(\"center alignment\", \"res/al-center.svg\"))\n\t        buttonGroup2.addAction(self.createAction(\"right alignment\", \"res/al-right.svg\"))\n\t        buttonGroup2.addAction(self.createAction(\"line up on both sides\", \"res/al-bothside.svg\"))\n\t        act = group.addWidget(buttonGroup2, RibbonGroup.Medium)\n\t        act.setObjectName(buttonGroup2.objectName())\n\t        group.addSeparator()\n\t        actLargerFontSize = self.createAction(\"Larger\", \"res/largerFont.svg\", \"actLargerFontSize\")\n\t        actLargerFontSize.triggered.connect(self.onActionFontLargerTriggered)\n\t        group.addLargeAction(actLargerFontSize)\n\t        actSmallFontSize = self.createAction(\"Smaller\", \"res/smallFont.svg\", \"actSmallFontSize\")\n", "        actSmallFontSize.triggered.connect(self.onActionFontSmallerTriggered)\n\t        group.addLargeAction(actSmallFontSize)\n\t    def createPageContext1(self):\n\t        ribbon = self.ribbonBar()\n\t        self.m_pageContext = ribbon.addPageContext(\"context\", QColor(), 1)\n\t        page1 = self.m_pageContext.addPage(\"Page1\")\n\t        self.createPageContext_1(page1)\n\t        page2 = self.m_pageContext.addPage(\"Page2\")\n\t        self.createPageContext_2(page2)\n\t    def createPageContext2(self):\n", "        ribbon = self.ribbonBar()\n\t        self.m_pageContext2 = ribbon.addPageContext(\"context2\", QColor(), 2)\n\t        self.m_pageContext2.addPage(\"context2 Page1\")\n\t        self.m_pageContext2.addPage(\"context2 Page2\")\n\t    def createPageContext_1(self, page: RibbonPage):\n\t        group = page.addGroup(\"show and hide test\")\n\t        actionHideGroup = self.createAction(\"hide group\", \"res/hideGroup.svg\")\n\t        actionHideGroup.setCheckable(True)\n\t        group.addLargeAction(actionHideGroup)\n\t        actionDisable = self.createAction(\"Disable\", \"res/enableTest.svg\")\n", "        actionDisable.setDisabled(True)\n\t        group.addLargeAction(actionDisable)\n\t        actionDisable.triggered.connect(lambda: actionDisable.setDisabled(True))\n\t        actionUnlock = self.createAction(\"unlock\", \"res/unlock.svg\")\n\t        actionUnlock.setShortcut(QKeySequence(\"Ctrl+E\"))\n\t        group.addLargeAction(actionUnlock)\n\t        actionUnlock.triggered.connect(lambda: (\n\t            actionDisable.setEnabled(True),\n\t            actionDisable.setText(\"Enabled\"),\n\t        ))\n", "        actionSetTextTest = self.createAction(\"set text\", \"res/setText.svg\")\n\t        actionSetTextTest.setCheckable(True)\n\t        actionSetTextTest.setShortcut(QKeySequence(\"Ctrl+D\"))\n\t        group.addLargeAction(actionSetTextTest)\n\t        actionSetTextTest.toggled.connect(lambda b: (\n\t            actionSetTextTest.setText(\"setText测试\") if b else actionSetTextTest.setText(\"set test\")\n\t        ))\n\t        actionShowTest = self.createAction(\"show beside group\", \"res/show.svg\")\n\t        actionShowTest.setCheckable(True)\n\t        group.addLargeAction(actionShowTest)\n", "        group2 = page.addGroup(\"show/hide\")\n\t        group2.addLargeAction(actionSetTextTest)\n\t        actionShowTest.toggled.connect(lambda b: (\n\t            group2.setVisible(not b),\n\t            actionShowTest.setText(\"hide beside group\") if b else actionShowTest.setText(\"show beside group\"),\n\t            self.ribbonBar().repaint()\n\t        ))\n\t        group3 = page.addGroup(\"show/hide action test\")\n\t        actionHideAction2 = self.createAction(\"hide action 2\", \"res/action.svg\")\n\t        actionHideAction4 = self.createAction(\"hide action 4\", \"res/action.svg\")\n", "        actionHideAction2.setCheckable(True)\n\t        actionHideAction2.setChecked(True)\n\t        actionHideAction4.setCheckable(True)\n\t        actionHideAction4.setChecked(True)\n\t        act2 = self.createAction(\"action2\", \"res/action2.svg\")\n\t        act3 = self.createAction(\"action3\", \"res/action3.svg\")\n\t        act4 = self.createAction(\"action4\", \"res/action4.svg\")\n\t        group3.addLargeAction(actionHideAction2)\n\t        group3.addLargeAction(actionHideAction4)\n\t        group3.addSmallAction(act2)\n", "        group3.addSmallAction(act3)\n\t        group3.addSmallAction(act4)\n\t        actionHideAction2.triggered.connect(lambda b:\n\t            (act2.setVisible(True), actionHideAction2.setText(\"hide action2\")) if b else\n\t            (act2.setVisible(False), actionHideAction2.setText(\"show action2\"))\n\t        )\n\t        actionHideAction4.triggered.connect(lambda b:\n\t            (act4.setVisible(True), actionHideAction4.setText(\"hide action4\")) if b else\n\t            (act4.setVisible(False), actionHideAction4.setText(\"show action4\"))\n\t        )\n", "        group4 = page.addGroup(\"widget\")\n\t        spinbox = QSpinBox(self)\n\t        ctrlContainer1 = RibbonCtrlContainer(group4)\n\t        ctrlContainer1.setWidget(spinbox)\n\t        ctrlContainer1.setText(\"spinbox:\")\n\t        ctrlContainer1.setIconVisible(False)\n\t        group4.addMediumWidget(ctrlContainer1)\n\t        linedit = QLineEdit(self)\n\t        ctrlContainer2 = RibbonCtrlContainer(group4)\n\t        ctrlContainer2.setWidget(linedit)\n", "        ctrlContainer2.setText(\"linedit:\")\n\t        ctrlContainer2.setIconVisible(False)\n\t        group4.addMediumWidget(ctrlContainer2)\n\t    def createPageContext_2(self, page: RibbonPage):\n\t        group1 = page.addGroup(\"删除Page测试\")\n\t        actionDeleteThisPage = self.createAction(\"delete this page\", \"res/delete.svg\")\n\t        group1.addLargeAction(actionDeleteThisPage)\n\t        actionDeleteThisPage.triggered.connect(lambda: (\n\t            self.ribbonBar().removePage(page), page.deleteLater()\n\t        ))\n", "        groupLayout = page.addGroup(\"特殊布局\")\n\t        groupLayout.addAction(self.createAction(\"Large\", \"res/layout.svg\", \"@Large1\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small1\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small2\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addSeparator()\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small3\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n", "        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small4\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small5\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small6\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addSeparator()\n\t        groupLayout.addAction(self.createAction(\"Large\", \"res/layout.svg\", \"@Large2\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium1\"),\n", "                              QToolButton.InstantPopup, RibbonGroup.Medium)\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium2\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Medium)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small7\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium3\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Medium)\n\t        groupLayout.addAction(self.createAction(\"Large\", \"res/layout.svg\", \"@Large3\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium4\"),\n", "                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium5\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addAction(self.createAction(\"Large\", \"res/layout.svg\", \"@Large4\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n\t        groupLayout.addSeparator()\n\t        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium6\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Medium)\n\t        groupLayout.addAction(self.createAction(\"Large\", \"res/layout.svg\", \"@Large5\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Large)\n", "        groupLayout.addAction(self.createAction(\"Medium\", \"res/layout.svg\", \"@Medium7\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Medium)\n\t        groupLayout.addAction(self.createAction(\"Small\", \"res/layout.svg\", \"@Small8\"),\n\t                              QToolButton.InstantPopup, RibbonGroup.Small)\n\t    def createQuickAccessBar(self, bar: RibbonQuickAccessBar):\n\t        bar.addAction(self.createAction(\"save\", \"res/save.svg\", \"save-quickbar\"))\n\t        bar.addSeparator()\n\t        bar.addAction(self.createAction(\"undo\", \"res/undo.svg\"))\n\t        bar.addAction(self.createAction(\"redo\", \"res/redo.svg\"))\n\t        bar.addSeparator()\n", "        m = QMenu(\"Presentation File\", self)\n\t        m.setIcon(QIcon(\"res/presentationFile.svg\"))\n\t        for i in range(10):\n\t            m.addAction(self.createAction(\"file{}\".format(i + 1), \"res/file.svg\"))\n\t        bar.addMenu(m)\n\t    def createRightButtonGroup(self, group: RibbonButtonGroup):\n\t        actionHelp = self.createAction(\"help\", \"res/help.svg\")\n\t        actionHelp.triggered.connect(self.onActionHelpTriggered)\n\t        group.addAction(actionHelp)\n\t    def createAction(self, *args):\n", "        \"\"\"\n\t        createAction(text: str, iconurl: str, objName: str) -> QAction\n\t        createAction(text: str, iconurl: str) -> QAction\n\t        \"\"\"\n\t        arg_len = len(args)\n\t        if arg_len >= 2:\n\t            act = QAction(self)\n\t            act.setText(args[0])\n\t            act.setIcon(QIcon(args[1]))\n\t            act.setObjectName(args[2] if arg_len >= 3 else args[0])\n", "            return act\n\t    def onMenuButtonPopupCheckableTest(self, b: bool):\n\t        self.m_edit.append(\"MenuButtonPopupCheckableTest : {}\".format(b))\n\t    def onInstantPopupCheckableTest(self, b: bool):\n\t        self.m_edit.append(\"InstantPopupCheckableTest : {}\".format(b))\n\t    def onDelayedPopupCheckableTest(self, b: bool):\n\t        self.m_edit.append(\"DelayedPopupCheckableTest : {}\".format(b))\n\t    def onMenuButtonPopupCheckabletriggered(self, b: bool):\n\t        self.m_edit.append(\"MenuButtonPopupCheckabletriggered : {}\".format(b))\n\t    def onInstantPopupCheckabletriggered(self, b: bool):\n", "        self.m_edit.append(\"InstantPopupCheckabletriggered : {}\".format(b))\n\t    def onDelayedPopupCheckabletriggered(self, b: bool):\n\t        self.m_edit.append(\"DelayedPopupCheckabletriggered : {}\".format(b))\n\t    def onShowContextPage(self, on: bool):\n\t        if not self.m_pageContext:\n\t            self.createPageContext1()\n\t        if on:\n\t            self.ribbonBar().showPageContext(self.m_pageContext)\n\t        else:\n\t            self.ribbonBar().hidePageContext(self.m_pageContext)\n", "    def onStyleClicked(self, style: int):\n\t        self.ribbonBar().setRibbonStyle(style)\n\t    def onActionHelpTriggered(self):\n\t        QMessageBox.information(self, \"about\",\n\t                                \"Microsoft Ribbon for PyQt\"\n\t                                \"\\nVersion: {}\"\n\t                                \"\\nUrl: https://gitee.com/icanpool/QxRibbon\"\n\t                                .format(Ribbon.version()))\n\t    def onActionRemoveAppBtnTriggered(self, b: bool):\n\t        if b:\n", "            self.ribbonBar().setApplicationButton(None)\n\t        else:\n\t            actionRemoveAppBtn = RibbonApplicationButton()\n\t            actionRemoveAppBtn.setText(\"File\")\n\t            self.ribbonBar().setApplicationButton(actionRemoveAppBtn)\n\t    def onActionUseQssTriggered(self):\n\t        f = QFile(\"ribbon.qss\")\n\t        if not f.exists():\n\t            f_path = QFileDialog.getOpenFileName(self, \"select qss file\", \"\", \"Qss Files(*.qss *.css)\")[0]\n\t            if not f_path:\n", "                return\n\t            f.setFileName(f_path)\n\t        if not f.open(QIODevice.ReadWrite):\n\t            return\n\t        qss = str(f.readAll(), encoding='utf-8')\n\t        self.m_edit.setText(qss)\n\t        self.ribbonBar().setStyleSheet(qss)\n\t    def onActionWindowFlagNormalButtonTriggered(self, b: bool):\n\t        f = self.windowFlags()\n\t        if b:\n", "            f = f | Qt.WindowMinMaxButtonsHint | Qt.WindowCloseButtonHint\n\t        else:\n\t            f = f & ~Qt.WindowMinMaxButtonsHint & ~Qt.WindowCloseButtonHint\n\t        self.updateWindowFlag(f)\n\t    def onFontComWidgetCurrentFontChanged(self, f: QFont):\n\t        self.ribbonBar().setFont(f)\n\t    def onActionFontLargerTriggered(self):\n\t        f = self.font()\n\t        f.setPointSize(f.pointSize() + 1)\n\t        self.ribbonBar().setFont(f)\n", "        self.update()\n\t    def onActionFontSmallerTriggered(self):\n\t        f = self.font()\n\t        f.setPointSize(f.pointSize() - 1)\n\t        self.ribbonBar().setFont(f)\n\t        self.update()\n\t    def onActionWordWrapIn2rowTriggered(self, b: bool):\n\t        RibbonButton.setLiteStyleEnableWordWrap(b)\n\t        self.ribbonBar().recalc()\n\t        self.ribbonBar().updateRibbonGeometry()\n", "    def onButtonGroupActionTriggered(self, action: QAction):\n\t        v = int(action.property(\"align\"))\n\t        self.ribbonBar().setWindowTitleAlignment(v)\n\t        self.ribbonBar().repaint()\n\tif __name__ == '__main__':\n\t    app = QApplication(sys.argv)\n\t    font = app.font()\n\t    font.setFamily('微软雅黑')\n\t    app.setFont(font)\n\t    mainWindow = MainWindow()\n", "    mainWindow.show()\n\t    sys.exit(app.exec())\n"]}
