{"filename": "doc/source/conf.py", "chunked_list": ["\"\"\"Sphinx documentation configuration file.\"\"\"\n\tfrom datetime import datetime\n\timport os\n\timport pathlib\n\timport sys\n\tfrom ansys_sphinx_theme import ansys_favicon\n\tfrom ansys_sphinx_theme import get_version_match\n\tfrom ansys_sphinx_theme import pyansys_logo_black\n\tsys.path.append(pathlib.Path(__file__).parent.parent.parent)\n\tpath = os.path.join(pathlib.Path(__file__).parent.parent.parent, \"src\")\n", "print(path)\n\tsys.path.append(path)\n\tfrom ansys.aedt.toolkits.template import __version__\n\tprint(__version__)\n\t# Project information\n\tproject = \"ansys-aedt-toolkits-template\"\n\tcopyright = f\"(c) {datetime.now().year} ANSYS, Inc. All rights reserved\"\n\tauthor = \"ANSYS, Inc.\"\n\trelease = version = __version__\n\tcname = os.getenv(\"DOCUMENTATION_CNAME\", \"nocname.com\")\n", "switcher_version = get_version_match(__version__)\n\tprint(copyright)\n\t# Select desired logo, theme, and declare the html title\n\thtml_logo = pyansys_logo_black\n\thtml_theme = \"ansys_sphinx_theme\"\n\thtml_short_title = html_title = \"ansys-aedt-toolkits-template\"\n\t# specify the location of your GitHub repo\n\thtml_context = {\n\t    \"github_user\": \"pyansys\",\n\t    \"github_repo\": \"pyaedt-toolkit-template\",\n", "    \"github_version\": \"main\",\n\t    \"doc_path\": \"doc/source\",\n\t}\n\thtml_theme_options = {\n\t    \"switcher\": {\n\t        \"json_url\": f\"https://{cname}/versions.json\",\n\t        \"version_match\": switcher_version,\n\t    },\n\t    \"check_switcher\": False,\n\t    \"github_url\": \"https://github.com/pyansys/pyaedt-toolkit-template.git\",\n", "    \"show_prev_next\": False,\n\t    \"show_breadcrumbs\": True,\n\t    \"collapse_navigation\": True,\n\t    \"use_edit_page_button\": True,\n\t    \"additional_breadcrumbs\": [\n\t        (\"PyAnsys\", \"https://docs.pyansys.com/\"),\n\t    ],\n\t    \"icon_links\": [\n\t        {\n\t            \"name\": \"Support\",\n", "            \"url\": \"https://github.com/pyansys/pyaedt-toolkit-template/discussions\",\n\t            \"icon\": \"fa fa-comment fa-fw\",\n\t        },\n\t    ],\n\t    \"collapse_navigation\": True,\n\t}\n\t# Sphinx extensions\n\textensions = [\n\t    \"sphinx.ext.intersphinx\",\n\t    \"sphinx.ext.autodoc\",\n", "    \"sphinx.ext.todo\",\n\t    \"sphinx.ext.viewcode\",\n\t    \"sphinx.ext.autosummary\",\n\t    \"sphinx.ext.intersphinx\",\n\t    \"sphinx.ext.coverage\",\n\t    \"sphinx_copybutton\",\n\t    \"recommonmark\",\n\t    \"numpydoc\",\n\t    \"nbsphinx\",\n\t]\n", "# Intersphinx mapping\n\tintersphinx_mapping = {\n\t    \"python\": (\"https://docs.python.org/3\", None),\n\t}\n\t# numpydoc configuration\n\tnumpydoc_show_class_members = False\n\tnumpydoc_xref_param_type = True\n\t# Consider enabling numpydoc validation. See:\n\t# https://numpydoc.readthedocs.io/en/latest/validation.html#\n\tnumpydoc_validate = True\n", "numpydoc_validation_checks = {\n\t    \"GL06\",  # Found unknown section\n\t    \"GL07\",  # Sections are in the wrong order.\n\t    \"GL08\",  # The object does not have a docstring\n\t    \"GL09\",  # Deprecation warning should precede extended summary\n\t    \"GL10\",  # reST directives {directives} must be followed by two colons\n\t    \"SS01\",  # No summary found\n\t    \"SS02\",  # Summary does not start with a capital letter\n\t    # \"SS03\", # Summary does not end with a period\n\t    \"SS04\",  # Summary contains heading whitespaces\n", "    # \"SS05\", # Summary must start with infinitive verb, not third person\n\t    \"RT02\",  # The first line of the Returns section should contain only the\n\t    # type, unless multiple values are being returned\"\n\t}\n\t# static path\n\thtml_static_path = [\"_static\"]\n\thtml_css_files = [\n\t    \"custom.css\",\n\t]\n\thtml_favicon = ansys_favicon\n", "# Add any paths that contain templates here, relative to this directory.\n\ttemplates_path = [\"_templates\"]\n\t# The suffix(es) of source filenames.\n\tsource_suffix = \".rst\"\n\t# The master toctree document.\n\tmaster_doc = \"index\"\n"]}
{"filename": "tests/test_00_service_generic.py", "chunked_list": ["import os\n\timport time\n\timport requests\n\tfrom conftest import BasisTest\n\tclass TestClass(BasisTest, object):\n\t    def setup_class(self):\n\t        BasisTest.my_setup(self)\n\t    def teardown_class(self):\n\t        BasisTest.my_teardown(self)\n\t    def test_01_get_status(self):\n", "        response = requests.get(self.url + \"/get_status\")\n\t        assert response.ok\n\t        assert response.json() == \"Backend free\"\n\t    def test_02_get_properties(self):\n\t        response = requests.get(self.url + \"/get_properties\")\n\t        assert response.ok\n\t        assert len(response.json()) == 16\n\t    def test_03_set_properties(self):\n\t        new_properties = {\n\t            \"aedt_version\": self.test_config[\"aedt_version\"],\n", "            \"non_graphical\": self.test_config[\"non_graphical\"],\n\t            \"use_grpc\": True,\n\t        }\n\t        response = requests.put(self.url + \"/set_properties\", json=new_properties)\n\t        assert response.ok\n\t        new_properties = {\"use_grpc\": 1}\n\t        response = requests.put(self.url + \"/set_properties\", json=new_properties)\n\t        assert not response.ok\n\t        response = requests.put(self.url + \"/set_properties\")\n\t        assert not response.ok\n", "    def test_04_installed_versions(self):\n\t        response = requests.get(self.url + \"/installed_versions\")\n\t        assert response.ok\n\t    def test_05_aedt_sessions(self):\n\t        response = requests.get(self.url + \"/aedt_sessions\")\n\t        assert response.ok\n\t        assert isinstance(response.json(), list)\n\t    def test_06_connect_design(self):\n\t        response = requests.post(self.url + \"/connect_design\", json={\"aedtapp\": \"Icepak\"})\n\t        assert response.ok\n", "    def test_07_save_project(self):\n\t        file_name = os.path.join(self.local_path.path, \"Test.aedt\")\n\t        response = requests.post(self.url + \"/save_project\", json=file_name)\n\t        assert response.ok\n\t        response = requests.get(self.url + \"/get_status\")\n\t        while response.json() != \"Backend free\":\n\t            time.sleep(1)\n\t            response = requests.get(self.url + \"/get_status\")\n\t    def test_08_get_design_names(self):\n\t        response = requests.get(self.url + \"/get_design_names\")\n", "        assert response.ok\n\t        assert len(response.json()) == 1\n"]}
{"filename": "tests/test_01_service_toolkit.py", "chunked_list": ["import time\n\timport requests\n\tfrom conftest import BasisTest\n\ttest_project_name = \"Test\"\n\tclass TestClass(BasisTest, object):\n\t    def setup_class(self):\n\t        BasisTest.my_setup(self)\n\t    def teardown_class(self):\n\t        BasisTest.my_teardown(self)\n\t    def test_01_create_geometry(self):\n", "        new_properties = {\"geometry\": \"Box\"}\n\t        response = requests.put(self.url + \"/set_properties\", json=new_properties)\n\t        assert response.ok\n\t        response = requests.post(self.url + \"/create_geometry\")\n\t        assert response.ok\n\t        response = requests.get(self.url + \"/get_status\")\n\t        while response.json() != \"Backend free\":\n\t            time.sleep(1)\n\t            response = requests.get(self.url + \"/get_status\")\n\t        new_properties = {\"geometry\": \"Sphere\"}\n", "        response = requests.put(self.url + \"/set_properties\", json=new_properties)\n\t        assert response.ok\n\t        response = requests.post(self.url + \"/create_geometry\")\n\t        assert response.ok\n\t        response = requests.get(self.url + \"/get_status\")\n\t        while response.json() != \"Backend free\":\n\t            time.sleep(1)\n\t            response = requests.get(self.url + \"/get_status\")\n"]}
{"filename": "tests/conftest.py", "chunked_list": ["import datetime\n\timport gc\n\timport json\n\timport os\n\timport shutil\n\timport signal\n\timport subprocess\n\timport sys\n\timport tempfile\n\timport threading\n", "import time\n\timport psutil\n\tfrom pyaedt import aedt_logger\n\tfrom pyaedt import settings\n\tfrom pyaedt.generic.filesystem import Scratch\n\timport pytest\n\timport requests\n\tsettings.enable_error_handler = False\n\tsettings.enable_desktop_logs = False\n\tlocal_path = os.path.dirname(os.path.realpath(__file__))\n", "sys.path.append(local_path)\n\tfrom ansys.aedt.toolkits.template import backend\n\tis_linux = os.name == \"posix\"\n\t# Initialize default configuration\n\tconfig = {\n\t    \"aedt_version\": \"2023.1\",\n\t    \"non_graphical\": True,\n\t    \"use_grpc\": True,\n\t    \"url\": \"127.0.0.1\",\n\t    \"port\": \"5001\",\n", "}\n\t# Check for the local config file, override defaults if found\n\tlocal_config_file = os.path.join(local_path, \"local_config.json\")\n\tif os.path.exists(local_config_file):\n\t    with open(local_config_file) as f:\n\t        local_config = json.load(f)\n\t    config.update(local_config)\n\tsettings.use_grpc_api = config[\"use_grpc\"]\n\tsettings.non_graphical = config[\"non_graphical\"]\n\turl = config[\"url\"]\n", "port = config[\"port\"]\n\turl_call = \"http://\" + url + \":\" + str(port)\n\t# Path to Python interpreter with Flask and Pyside6 installed\n\tpython_path = sys.executable\n\ttest_folder = \"unit_test\" + datetime.datetime.now().strftime(\"%Y%m%d-%H%M%S\")\n\tscratch_path = os.path.join(tempfile.gettempdir(), test_folder)\n\tif not os.path.exists(scratch_path):\n\t    try:\n\t        os.makedirs(scratch_path)\n\t    except:\n", "        pass\n\tlogger = aedt_logger.pyaedt_logger\n\tclass BasisTest(object):\n\t    def my_setup(self):\n\t        self.test_config = config\n\t        self.local_path = local_scratch\n\t        self._main = sys.modules[\"__main__\"]\n\t        self.url = \"http://\" + url + \":\" + str(port)\n\t    def my_teardown(self):\n\t        try:\n", "            oDesktop = self._main.oDesktop\n\t            proj_list = oDesktop.GetProjectList()\n\t        except Exception as e:\n\t            oDesktop = None\n\t            proj_list = []\n\t        for proj in proj_list:\n\t            oDesktop.CloseProject(proj)\n\t    def teardown_method(self):\n\t        \"\"\"\n\t        Could be redefined\n", "        \"\"\"\n\t        pass\n\t    def setup_method(self):\n\t        \"\"\"\n\t        Could be redefined\n\t        \"\"\"\n\t        pass\n\t# Define desktopVersion explicitly since this is imported by other modules\n\tdesktop_version = config[\"aedt_version\"]\n\tnon_graphical = config[\"non_graphical\"]\n", "local_scratch = Scratch(scratch_path)\n\t# Define a function to run the subprocess command\n\tdef run_command(*command):\n\t    if is_linux:\n\t        process = subprocess.Popen(\n\t            command,\n\t            stdout=subprocess.PIPE,\n\t            stderr=subprocess.PIPE,\n\t        )\n\t    else:\n", "        CREATE_NO_WINDOW = 0x08000000\n\t        process = subprocess.Popen(\n\t            \" \".join(command),\n\t            stdout=subprocess.PIPE,\n\t            stderr=subprocess.PIPE,\n\t            creationflags=CREATE_NO_WINDOW,\n\t        )\n\t    stdout, stderr = process.communicate()\n\t    print(stdout.decode())\n\t    print(stderr.decode())\n", "@pytest.fixture(scope=\"session\", autouse=True)\n\tdef desktop_init():\n\t    if is_linux:\n\t        initial_pids = psutil.pids()\n\t    else:\n\t        initial_pids = psutil.Process().children(recursive=True)\n\t    # Define the command to start the Flask application\n\t    backend_file = os.path.join(backend.__path__[0], \"rest_api.py\")\n\t    backend_command = [python_path, backend_file]\n\t    # Create a thread to run the Flask application\n", "    flask_thread = threading.Thread(target=run_command, args=backend_command)\n\t    flask_thread.daemon = True\n\t    flask_thread.start()\n\t    time.sleep(1)\n\t    if is_linux:\n\t        current_process = len(psutil.pids())\n\t        count = 0\n\t        while current_process < len(initial_pids) and count < 10:\n\t            time.sleep(1)\n\t            current_process = len(psutil.pids())\n", "            count += 1\n\t    else:\n\t        current_process = len(psutil.Process().children(recursive=True))\n\t        count = 0\n\t        while current_process < len(initial_pids) and count < 10:\n\t            time.sleep(1)\n\t            current_process = len(psutil.Process().children(recursive=True))\n\t            count += 1\n\t    if current_process <= len(initial_pids):\n\t        raise \"Backend not running\"\n", "    if is_linux:\n\t        flask_pids = [element for element in psutil.pids() if element not in initial_pids]\n\t    else:\n\t        flask_pids = [element for element in psutil.Process().children(recursive=True) if element not in initial_pids]\n\t    # Wait for the Flask application to start\n\t    response = requests.get(url_call + \"/get_status\")\n\t    while response.json() != \"Backend free\":\n\t        time.sleep(1)\n\t        response = requests.get(url_call + \"/get_status\")\n\t    properties = {\n", "        \"aedt_version\": desktop_version,\n\t        \"non_graphical\": non_graphical,\n\t        \"use_grpc\": True,\n\t    }\n\t    requests.put(url_call + \"/set_properties\", json=properties)\n\t    requests.post(url_call + \"/launch_aedt\", json=properties)\n\t    response = requests.get(url_call + \"/get_status\")\n\t    while response.json() != \"Backend free\":\n\t        time.sleep(1)\n\t        response = requests.get(url_call + \"/get_status\")\n", "    yield\n\t    properties = {\"close_projects\": True, \"close_on_exit\": True}\n\t    requests.post(url_call + \"/close_aedt\", json=properties)\n\t    logger.remove_all_project_file_logger()\n\t    shutil.rmtree(scratch_path, ignore_errors=True)\n\t    # Register the cleanup function to be called on script exit\n\t    gc.collect()\n\t    if is_linux:\n\t        for process in flask_pids:\n\t            os.kill(process, signal.SIGKILL)\n", "    else:\n\t        for process in flask_pids:\n\t            if process.name() == \"python.exe\" or process.name() == \"python\":\n\t                process.terminate()\n"]}
{"filename": "src/ansys/aedt/toolkits/template/run_toolkit.py", "chunked_list": ["import atexit\n\timport json\n\timport os\n\timport signal\n\timport sys\n\timport threading\n\timport time\n\timport psutil\n\timport requests\n\tfrom ansys.aedt.toolkits.template import backend\n", "from ansys.aedt.toolkits.template import ui\n\twith open(os.path.join(os.path.dirname(__file__), \"ui\", \"common\", \"general_properties.json\")) as fh:\n\t    general_settings = json.load(fh)\n\turl = general_settings[\"backend_url\"]\n\tport = general_settings[\"backend_port\"]\n\turl_call = \"http://\" + url + \":\" + str(port)\n\tis_linux = os.name == \"posix\"\n\timport subprocess\n\t# Path to Python interpreter with Flask and Pyside6 installed\n\tpython_path = sys.executable\n", "# Define the command to start the Flask application\n\tbackend_file = os.path.join(backend.__path__[0], \"rest_api.py\")\n\tbackend_command = [python_path, backend_file]\n\t# Define the command to start the PySide6 UI\n\tfrontend_file = os.path.join(ui.__path__[0], \"frontend_actions.py\")\n\tfrontend_command = [python_path, frontend_file]\n\t# Clean up python processes\n\tdef clean_python_processes():\n\t    # Terminate backend processes\n\t    if is_linux:\n", "        for process in flask_pids:\n\t            os.kill(process, signal.SIGKILL)\n\t    else:\n\t        for process in flask_pids:\n\t            if process.name() == \"python.exe\" or process.name() == \"python\":\n\t                process.terminate()\n\t# Define a function to run the subprocess command\n\tdef run_command(*command):\n\t    if is_linux:\n\t        process = subprocess.Popen(\n", "            command,\n\t            stdout=subprocess.PIPE,\n\t            stderr=subprocess.PIPE,\n\t        )\n\t    else:\n\t        CREATE_NO_WINDOW = 0x08000000\n\t        process = subprocess.Popen(\n\t            \" \".join(command),\n\t            stdout=subprocess.PIPE,\n\t            stderr=subprocess.PIPE,\n", "            creationflags=CREATE_NO_WINDOW,\n\t        )\n\t    stdout, stderr = process.communicate()\n\t    print(stdout.decode())\n\t    print(stderr.decode())\n\t# Take initial running processes\n\tif is_linux:\n\t    initial_pids = psutil.pids()\n\telse:\n\t    initial_pids = psutil.Process().children(recursive=True)\n", "# Create a thread to run the Flask application\n\tflask_process = None\n\tflask_thread = threading.Thread(target=run_command, args=backend_command, name=\"backend\")\n\tflask_thread.daemon = True\n\tflask_thread.start()\n\ttime.sleep(1)\n\t# Wait until flask processes are running\n\tif is_linux:\n\t    current_process = len(psutil.pids())\n\t    count = 0\n", "    while current_process < len(initial_pids) and count < 10:\n\t        time.sleep(1)\n\t        current_process = len(psutil.pids())\n\t        count += 1\n\telse:\n\t    current_process = len(psutil.Process().children(recursive=True))\n\t    count = 0\n\t    while current_process < len(initial_pids) and count < 10:\n\t        time.sleep(1)\n\t        current_process = len(psutil.Process().children(recursive=True))\n", "        count += 1\n\tif current_process <= len(initial_pids):\n\t    raise \"Backend not running\"\n\t# Take backend running processes\n\tif is_linux:\n\t    flask_pids = [element for element in psutil.pids() if element not in initial_pids]\n\telse:\n\t    flask_pids = [element for element in psutil.Process().children(recursive=True) if element not in initial_pids]\n\t# Check if the backend is running\n\tresponse = requests.get(url_call + \"/get_status\")\n", "count = 0\n\twhile response.json() != \"Backend free\" and count < 10:\n\t    time.sleep(1)\n\t    response = requests.get(url_call + \"/get_status\")\n\t    count += 1\n\tif count > 10:\n\t    raise \"Backend not running\"\n\t# User can pass the desktop ID and version to connect to a specific AEDT session\n\tif len(sys.argv) == 3:\n\t    desktop_pid = sys.argv[1]\n", "    desktop_version = sys.argv[2]\n\t    properties = {\n\t        \"selected_process\": int(desktop_pid),\n\t        \"aedt_version\": desktop_version,\n\t        \"use_grpc\": False,\n\t    }\n\t    requests.put(url_call + \"/set_properties\", json=properties)\n\t    requests.post(url_call + \"/launch_aedt\")\n\t    response = requests.get(url_call + \"/get_status\")\n\t    count = 0\n", "    while response.json() != \"Backend free\" and count < 10:\n\t        time.sleep(1)\n\t        response = requests.get(url_call + \"/get_status\")\n\t        count += 1\n\t    if count > 10:\n\t        raise \"AEDT not connected\"\n\t# Create a thread to run the PySide6 UI\n\tui_thread = threading.Thread(target=run_command, args=frontend_command, name=\"frontend\")\n\tui_thread.start()\n\t# Wait for the UI thread to complete\n", "ui_thread.join()\n\t# When the script closes, it terminates all flask processes\n\tatexit.register(clean_python_processes)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/__init__.py", "chunked_list": ["\"\"\"\n\tpyaedt-toolkits.\n\tansys.aedt.toolkits.template\n\t\"\"\"\n\t__version__ = \"0.2.dev\"\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/api.py", "chunked_list": ["import numpy as np\n\tfrom ansys.aedt.toolkits.template.backend.common.api_generic import ToolkitGeneric\n\tfrom ansys.aedt.toolkits.template.backend.common.api_generic import thread\n\tfrom ansys.aedt.toolkits.template.backend.common.logger_handler import logger\n\tfrom ansys.aedt.toolkits.template.backend.common.properties import properties\n\tclass Toolkit(ToolkitGeneric):\n\t    \"\"\"Template API to control the toolkit workflow.\n\t    This class provides methods to connect to a selected design and create geometries.\n\t    Examples\n\t    --------\n", "    >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t    >>> import time\n\t    >>> service = Toolkit()\n\t    >>> msg1 = service.launch_aedt()\n\t    >>> response = service.get_thread_status()\n\t    >>> while response[0] == 0:\n\t    >>>     time.sleep(1)\n\t    >>>     response = service.get_thread_status()\n\t    >>> msg3 = service.create_geometry()\n\t    >>> response = service.get_thread_status()\n", "    >>> while response[0] == 0:\n\t    >>>     time.sleep(1)\n\t    >>>     response = service.get_thread_status()\n\t    \"\"\"\n\t    def __init__(self):\n\t        ToolkitGeneric.__init__(self)\n\t        self.multiplier = 1.0\n\t        self.comps = []\n\t    @thread.launch_thread\n\t    def create_geometry(self):\n", "        \"\"\"Create a box or a sphere in design. If the toolkit is using Grpc, it is launched in a thread.\n\t        Returns\n\t        -------\n\t        bool\n\t            Returns ``True`` if the connection is successful, ``False`` otherwise.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> import time\n\t        >>> service = Toolkit()\n", "        >>> msg1 = service.launch_aedt()\n\t        >>> response = service.get_thread_status()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = service.get_thread_status()\n\t        >>> msg3 = service.create_geometry()\n\t        >>> response = service.get_thread_status()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = service.get_thread_status()\n", "        \"\"\"\n\t        # Connect to AEDT design\n\t        self.connect_design()\n\t        if self.aedtapp:\n\t            multiplier = properties.multiplier\n\t            geometry = properties.geometry\n\t            self.multiplier = multiplier\n\t            if geometry == \"Box\":\n\t                self.draw_box()\n\t            elif geometry == \"Sphere\":\n", "                self.draw_sphere()\n\t            self.aedtapp.release_desktop(False, False)\n\t            self.aedtapp = None\n\t            return True\n\t        return False\n\t    def draw_box(self):\n\t        \"\"\"Draw a box.\n\t        Returns\n\t        -------\n\t        :class:`pyaedt.modeler.object3d.Object3d`\n", "            3D object.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> import time\n\t        >>> service = Toolkit()\n\t        >>> msg1 = service.launch_aedt()\n\t        >>> response = service.get_thread_status()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n", "        >>>     response = service.get_thread_status()\n\t        >>> service.connect_design()\n\t        >>> service.draw_box()\n\t        >>> service.release_aedt()\n\t        \"\"\"\n\t        props = self._comp_props()\n\t        pos_x = props[0][0]\n\t        pos_y = props[0][1]\n\t        pos_z = props[0][2]\n\t        box = self.aedtapp.modeler.create_box(\n", "            position=[pos_x, pos_y, pos_z],\n\t            dimensions_list=[1 * self.multiplier, 1 * self.multiplier, 1 * self.multiplier],\n\t        )\n\t        box.color = (props[1][0], props[1][1], props[1][2])\n\t        logger.debug(\"Box {} created\".format(box.name))\n\t        return box\n\t    def draw_sphere(self):\n\t        \"\"\"Draw a sphere.\n\t        Returns\n\t        -------\n", "        :class:`pyaedt.modeler.object3d.Object3d`\n\t            3D object.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> import time\n\t        >>> service = Toolkit()\n\t        >>> msg1 = service.launch_aedt()\n\t        >>> response = service.get_thread_status()\n\t        >>> while response[0] == 0:\n", "        >>>     time.sleep(1)\n\t        >>>     response = service.get_thread_status()\n\t        >>> service.connect_design()\n\t        >>> service.draw_sphere()\n\t        \"\"\"\n\t        props = self._comp_props()\n\t        pos_x = props[0][0]\n\t        pos_y = props[0][1]\n\t        pos_z = props[0][2]\n\t        sp = self.aedtapp.modeler.create_sphere(\n", "            position=[pos_x, pos_y, pos_z],\n\t            radius=1 * self.multiplier,\n\t        )\n\t        sp.color = (props[1][0], props[1][1], props[1][2])\n\t        logger.debug(\"Sphere {} created\".format(sp.name))\n\t        return sp\n\t    @staticmethod\n\t    def _comp_props():\n\t        \"\"\"Return a random position and color.\n\t        Returns\n", "        -------\n\t        tuple[list, list]\n\t        \"\"\"\n\t        pos = [np.random.random() * 20, np.random.random() * 20, np.random.random() * 20]\n\t        r = str(np.random.randint(0, 255))\n\t        g = str(np.random.randint(0, 255))\n\t        b = str(np.random.randint(0, 255))\n\t        return pos, [r, g, b]\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/__init__.py", "chunked_list": []}
{"filename": "src/ansys/aedt/toolkits/template/backend/rest_api.py", "chunked_list": ["from ansys.aedt.toolkits.template.backend.common.multithreading_server import MultithreadingServer\n\tfrom ansys.aedt.toolkits.template.backend.common.rest_api_generic import app\n\tfrom ansys.aedt.toolkits.template.backend.common.rest_api_generic import jsonify\n\tfrom ansys.aedt.toolkits.template.backend.common.rest_api_generic import logger\n\tfrom ansys.aedt.toolkits.template.backend.common.rest_api_generic import service\n\tfrom ansys.aedt.toolkits.template.backend.common.rest_api_generic import settings\n\t# Toolkit entrypoints\n\t@app.route(\"/create_geometry\", methods=[\"POST\"])\n\tdef create_geometry_call():\n\t    logger.info(\"[POST] /create_geometry (create a box or sphere in HFSS)\")\n", "    response = service.create_geometry()\n\t    if response:\n\t        return jsonify(\"Geometry created\"), 200\n\t    else:\n\t        return jsonify(\"Geometry not created\"), 500\n\tif __name__ == \"__main__\":\n\t    app.debug = True\n\t    server = MultithreadingServer()\n\t    server.run(host=settings[\"url\"], port=settings[\"port\"], app=app)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/multithreading_server.py", "chunked_list": ["# -*- coding: utf-8 -*-\n\timport queue\n\timport socket\n\timport socketserver\n\timport threading\n\timport wsgiref.simple_server\n\t# techniques described here taken from\n\t# https://gist.github.com/coffeesnake/3093598\n\t# https://bottlepy.org/docs/dev/recipes.html\n\t# https://adamj.eu/tech/2019/05/27/the-simplest-wsgi-middleware/\n", "# https://stackoverflow.com/questions/25155267/how-to-send-a-signal-to-the-main-thread-in-python-without-using-join\n\t# https://en.wikipedia.org/wiki/Callable_object#In_Python\n\t# The content of this file is copyright of the respective owners\n\tclass ThreadingWSGIServer(socketserver.ThreadingMixIn, wsgiref.simple_server.WSGIServer):\n\t    pass\n\tclass Invoker:\n\t    def __init__(self, func):\n\t        self._func = func\n\t        self._event = threading.Event()\n\t    def invoke(self):\n", "        self._result = self._func()\n\t        self._event.set()\n\t    def get_result(self):\n\t        self._event.wait()\n\t        return self._result\n\tclass SingleThreadResponseExecutor(object):\n\t    def __init__(self, app):\n\t        self._app = app\n\t        self._queue = queue.Queue()\n\t    def __call__(self, environ, start_response):\n", "        invoker = Invoker(lambda: self._app(environ, start_response))\n\t        self._queue.put(invoker)\n\t        return invoker.get_result()\n\t    def execute_responses_on_this_thread(self):\n\t        print(\"press control-c to terminate\")\n\t        while True:\n\t            try:\n\t                self._queue.get().invoke()\n\t            except KeyboardInterrupt:\n\t                print(\"got keyboard interrupt\")\n", "                break\n\tclass MultithreadingServer:\n\t    def run(self, host, port, app):\n\t        executor = SingleThreadResponseExecutor(app)\n\t        server_cls = ThreadingWSGIServer\n\t        if \":\" in host:  # Fix wsgiref for IPv6 addresses.\n\t            if getattr(server_cls, \"address_family\") == socket.AF_INET:\n\t                class server_cls(server_cls):\n\t                    address_family = socket.AF_INET6\n\t        httpd = wsgiref.simple_server.make_server(host, port, app=executor, server_class=server_cls)\n", "        print(\"listening on {}:{}\".format(host, port))\n\t        server_thread = threading.Thread(target=httpd.serve_forever)\n\t        # ensure thread dies on termination\n\t        # normally this would be dodgy but this tread doesn't hold anything other than sockets\n\t        # the expectation is that the sockets will get released on process termination\n\t        # - strange if they didn't\n\t        server_thread.daemon = True\n\t        server_thread.start()\n\t        executor.execute_responses_on_this_thread()\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/rest_api_generic.py", "chunked_list": ["from flask import Flask\n\tfrom flask import jsonify\n\tfrom flask import request\n\tfrom ansys.aedt.toolkits.template.backend.api import Toolkit\n\tfrom ansys.aedt.toolkits.template.backend.common.logger_handler import logger\n\tservice = Toolkit()\n\tsettings = service.get_properties()\n\tapp = Flask(__name__)\n\t# Generic services\n\t@app.route(\"/health\", methods=[\"GET\"])\n", "def get_health():\n\t    logger.info(\"[GET] /health (check if the server is healthy)\")\n\t    desktop_connected, msg = service.aedt_connected()\n\t    if desktop_connected:\n\t        return jsonify(msg), 200\n\t    else:\n\t        return jsonify(msg), 200\n\t@app.route(\"/get_status\", methods=[\"GET\"])\n\tdef get_status_call():\n\t    logger.info(\"[GET] /get_status (check if the thread is running)\")\n", "    exit_code, msg = service.get_thread_status()\n\t    if exit_code <= 0:\n\t        return jsonify(msg), 200\n\t    else:\n\t        return jsonify(msg), 500\n\t@app.route(\"/get_properties\", methods=[\"GET\"])\n\tdef get_properties_call():\n\t    app.logger.info(\"[GET] /get_properties (get toolkit properties)\")\n\t    return jsonify(service.get_properties()), 200\n\t@app.route(\"/set_properties\", methods=[\"PUT\"])\n", "def set_properties_call():\n\t    app.logger.info(\"[PUT] /set_properties (set toolkit properties)\")\n\t    body = request.json\n\t    success, msg = service.set_properties(body)\n\t    if success:\n\t        return jsonify(msg), 200\n\t    else:\n\t        return jsonify(msg), 500\n\t@app.route(\"/installed_versions\", methods=[\"GET\"])\n\tdef installed_aedt_version_call():\n", "    logger.info(\"[GET] /version (get the version)\")\n\t    return jsonify(service.installed_aedt_version()), 200\n\t@app.route(\"/aedt_sessions\", methods=[\"GET\"])\n\tdef aedt_sessions_call():\n\t    logger.info(\"[GET] /aedt_sessions (aedt sessions for specific version)\")\n\t    response = service.aedt_sessions()\n\t    if isinstance(response, list):\n\t        return jsonify(response), 200\n\t    else:\n\t        return jsonify(response), 500\n", "@app.route(\"/launch_aedt\", methods=[\"POST\"])\n\tdef launch_aedt_call():\n\t    logger.info(\"[POST] /launch_aedt (launch or connect AEDT)\")\n\t    response = service.launch_aedt()\n\t    if response:\n\t        return jsonify(\"AEDT properties loaded\"), 200\n\t    else:\n\t        return jsonify(\"Fail to launch to AEDT\"), 500\n\t@app.route(\"/close_aedt\", methods=[\"POST\"])\n\tdef close_aedt_call():\n", "    logger.info(\"[POST] /close_aedt (close AEDT)\")\n\t    body = request.json\n\t    aedt_keys = [\"close_projects\", \"close_on_exit\"]\n\t    if not body:\n\t        msg = \"body is empty!\"\n\t        logger.error(msg)\n\t        return jsonify(msg), 500\n\t    elif not isinstance(body, dict) or not all(item in body for item in set(aedt_keys)):\n\t        msg = \"body not correct\"\n\t        logger.error(msg)\n", "        return jsonify(msg), 500\n\t    close_projects = body[\"close_projects\"]\n\t    close_on_exit = body[\"close_on_exit\"]\n\t    response = service.release_aedt(close_projects, close_on_exit)\n\t    if response:\n\t        return jsonify(\"AEDT correctly released\"), 200\n\t    else:\n\t        return jsonify(\"AEDT is not connected\"), 500\n\t@app.route(\"/connect_design\", methods=[\"POST\"])\n\tdef connect_design_call():\n", "    logger.info(\"[POST] /connect_design (connect or create a design)\")\n\t    body = request.json\n\t    if not body:\n\t        msg = \"body is empty!\"\n\t        logger.error(msg)\n\t        return jsonify(\"body is empty!\"), 500\n\t    response = service.connect_design(body[\"aedtapp\"])\n\t    if response:\n\t        return jsonify(\"Design connected\"), 200\n\t    else:\n", "        return jsonify(\"Fail to connect to the design\"), 500\n\t@app.route(\"/save_project\", methods=[\"POST\"])\n\tdef save_project_call():\n\t    logger.info(\"[POST] /save_project (Save AEDT project)\")\n\t    body = request.json\n\t    if not body:\n\t        msg = \"body is empty!\"\n\t        logger.error(msg)\n\t        return jsonify(\"body is empty!\"), 500\n\t    response = service.save_project(body)\n", "    if response:\n\t        return jsonify(\"Project saved: {}\".format(body)), 200\n\t    else:\n\t        return jsonify(response), 500\n\t@app.route(\"/get_design_names\", methods=[\"GET\"])\n\tdef get_design_names_call():\n\t    logger.info(\"[GET] /get_design_names (aedt designs for specific project)\")\n\t    response = service.get_design_names()\n\t    if isinstance(response, list):\n\t        return jsonify(response), 200\n", "    else:\n\t        return jsonify(response), 500\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/api_generic.py", "chunked_list": ["import os\n\timport psutil\n\timport pyaedt\n\tfrom ansys.aedt.toolkits.template.backend.common.logger_handler import logger\n\tfrom ansys.aedt.toolkits.template.backend.common.properties import properties\n\tfrom ansys.aedt.toolkits.template.backend.common.thread_manager import ThreadManager\n\tthread = ThreadManager()\n\tclass ToolkitGeneric(object):\n\t    \"\"\"Generic API to control the toolkits.\n\t    It provides basic functions to control AEDT and properties to share between backend and frontend.\n", "    Examples\n\t    --------\n\t    >>> import time\n\t    >>> from ansys.aedt.toolkits.antennas.backend.api import Toolkit\n\t    >>> toolkit = Toolkit()\n\t    >>> properties = toolkit.get_properties()\n\t    >>> new_properties = {\"aedt_version\": \"2022.2\"}\n\t    >>> toolkit.set_properties(new_properties)\n\t    >>> new_properties = toolkit.get_properties()\n\t    >>> msg = toolkit.launch_aedt()\n", "    >>> response = toolkit.get_thread_status()\n\t    >>> while response[0] == 0:\n\t    >>>     time.sleep(1)\n\t    >>>     response = toolkit.get_thread_status()\n\t    \"\"\"\n\t    def __init__(self):\n\t        self.desktop = None\n\t        self.aedtapp = None\n\t        self.aedt_apps = {\n\t            \"Circuit Design\": \"Circuit\",\n", "            \"HFSS\": \"Hfss\",\n\t            \"EMIT\": \"Emit\",\n\t            \"HFSS 3D Layout Design\": \"Hfss3dLayout\",\n\t            \"Icepak\": \"Icepak\",\n\t            \"Maxwell 2D\": \"Maxwell2d\",\n\t            \"Maxwell 3D\": \"Maxwell3d\",\n\t            \"Maxwell Circuit\": \"MaxwellCircuit\",\n\t            \"2D Extractor\": \"Q2d\",\n\t            \"Q3D Extractor\": \"Q3d\",\n\t            \"RMxprt\": \"Rmxprt\",\n", "            \"Twin Builder\": \"Simplorer\",\n\t            \"Mechanical\": \"Mechanical\",\n\t        }\n\t    @staticmethod\n\t    def set_properties(data):\n\t        \"\"\"Assign the passed data to the internal data model.\n\t        Parameters\n\t        ----------\n\t        data : dict\n\t            The dictionary containing the properties to be updated.\n", "        Returns\n\t        -------\n\t        tuple[bool, str]\n\t            A tuple indicating the success status and a message.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.set_properties({\"property1\": value1, \"property2\": value2})\n\t        \"\"\"\n", "        logger.debug(\"Updating the internal properties.\")\n\t        if data:\n\t            try:\n\t                for key in data:\n\t                    setattr(properties, key, data[key])\n\t                msg = \"properties updated successfully\"\n\t                logger.debug(msg)\n\t                return True, msg\n\t            except:\n\t                return False, \"Frozen property access\"\n", "        else:\n\t            msg = \"body is empty!\"\n\t            logger.debug(msg)\n\t            return False, msg\n\t    @staticmethod\n\t    def get_properties():\n\t        \"\"\"Get toolkit properties.\n\t        Returns\n\t        -------\n\t        dict\n", "            The dictionary containing the toolkit properties.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.get_properties()\n\t        {\"property1\": value1, \"property2\": value2}\n\t        \"\"\"\n\t        return properties.export_to_dict()\n\t    @staticmethod\n", "    def get_thread_status():\n\t        \"\"\"Get toolkit thread status.\n\t        Returns\n\t        -------\n\t        bool\n\t            ``True`` when active, ``False`` when not active.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n", "        >>> toolkit.get_thread_status()\n\t        \"\"\"\n\t        thread_running = thread.is_thread_running()\n\t        is_toolkit_busy = properties.is_toolkit_busy\n\t        if thread_running and is_toolkit_busy:  # pragma: no cover\n\t            msg = \"Backend running\"\n\t            logger.debug(msg)\n\t            return 0, msg\n\t        elif (not thread_running and is_toolkit_busy) or (thread_running and not is_toolkit_busy):  # pragma: no cover\n\t            msg = \"Backend crashed\"\n", "            logger.error(msg)\n\t            return 1, msg\n\t        else:\n\t            msg = \"Backend free\"\n\t            logger.debug(msg)\n\t            return -1, msg\n\t    def aedt_connected(self):\n\t        \"\"\"Check if AEDT is connected.\n\t        Returns\n\t        -------\n", "        tuple[bool, str]\n\t            A tuple indicating the connection status and a message.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> msg = toolkit.launch_aedt()\n\t        >>> response = toolkit.get_thread_status()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n", "        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.connect_aedt()\n\t        >>> toolkit.aedt_connected()\n\t        (True, \"Toolkit connected to process <process_id> on Grpc <grpc_port>\")\n\t        >>> toolkit.release_aedt()\n\t        \"\"\"\n\t        if self.desktop:\n\t            if self.desktop.port != 0:\n\t                msg = \"Toolkit connected to process {} on Grpc {}\".format(\n\t                    str(self.desktop.aedt_process_id),\n", "                    str(self.desktop.port),\n\t                )\n\t                logger.debug(msg)\n\t            else:\n\t                msg = \"Toolkit connected to process {}\".format(str(self.desktop.aedt_process_id))\n\t                logger.debug(msg)\n\t            connected = True\n\t        else:\n\t            msg = \"Toolkit not connected to AEDT\"\n\t            logger.debug(msg)\n", "            connected = False\n\t        return connected, msg\n\t    @staticmethod\n\t    def installed_aedt_version():\n\t        \"\"\"\n\t        Return the installed AEDT versions.\n\t        Returns\n\t        -------\n\t        list\n\t            List of installed AEDT versions.\n", "        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.installed_aedt_version()\n\t        [\"2021.1\", \"2021.2\", \"2022.1\"]\n\t        \"\"\"\n\t        # Detect existing AEDT installation\n\t        installed_versions = []\n\t        for ver in pyaedt.misc.list_installed_ansysem():\n", "            installed_versions.append(\n\t                \"20{}.{}\".format(ver.replace(\"ANSYSEM_ROOT\", \"\")[:2], ver.replace(\"ANSYSEM_ROOT\", \"\")[-1])\n\t            )\n\t        logger.debug(str(installed_versions))\n\t        return installed_versions\n\t    @staticmethod\n\t    def aedt_sessions():\n\t        \"\"\"Get information for the active AEDT sessions.\n\t        Returns\n\t        -------\n", "        list\n\t            List of AEDT PIDs.\n\t        Examples\n\t        --------\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.aedt_sessions()\n\t        [[pid1, grpc_port1], [pid2, grpc_port2]]\n\t        \"\"\"\n\t        if not properties.is_toolkit_busy:\n", "            version = properties.aedt_version\n\t            keys = [\"ansysedt.exe\"]\n\t            if version and \".\" in version:\n\t                version = version[-4:].replace(\".\", \"\")\n\t            if version < \"222\":  # pragma: no cover\n\t                version = version[:2] + \".\" + version[2]\n\t            sessions = []\n\t            for p in psutil.process_iter():\n\t                try:\n\t                    if p.name() in keys:\n", "                        cmd = p.cmdline()\n\t                        if not version or (version and version in cmd[0]):\n\t                            if \"-grpcsrv\" in cmd:\n\t                                if not version or (version and version in cmd[0]):\n\t                                    try:\n\t                                        sessions.append(\n\t                                            [\n\t                                                p.pid,\n\t                                                int(cmd[cmd.index(\"-grpcsrv\") + 1]),\n\t                                            ]\n", "                                        )\n\t                                    except IndexError:\n\t                                        sessions.append(\n\t                                            [\n\t                                                p.pid,\n\t                                                -1,\n\t                                            ]\n\t                                        )\n\t                            else:\n\t                                sessions.append(\n", "                                    [\n\t                                        p.pid,\n\t                                        -1,\n\t                                    ]\n\t                                )\n\t                except:\n\t                    pass\n\t            logger.debug(str(sessions))\n\t            return sessions\n\t        else:\n", "            logger.debug(\"No active sessions\")\n\t            return []\n\t    @staticmethod\n\t    def get_design_names():\n\t        \"\"\"Get design names for a specific project, the first one is the active.\n\t        Returns\n\t        -------\n\t        bool\n\t            ``True`` when successful, ``False`` when failed.\n\t        Examples\n", "        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.get_design_names()\n\t        \"\"\"\n", "        if properties.selected_process == 0:\n\t            logger.error(\"Process ID not defined\")\n\t            return False\n\t        design_list = []\n\t        active_project = os.path.splitext(os.path.basename(properties.active_project))[0]\n\t        if active_project and active_project != \"No project\":\n\t            for design in properties.design_list[active_project]:\n\t                design_list.append(design)\n\t            if properties.active_design and properties.active_design in design_list:\n\t                index = design_list.index(properties.active_design)\n", "                design_list.insert(0, design_list.pop(index))\n\t        return design_list\n\t    @thread.launch_thread\n\t    def launch_aedt(self):\n\t        \"\"\"Launch AEDT.\n\t        This method is launched in a thread if grpc is enabled. AEDT is released once it is opened.\n\t        Returns\n\t        -------\n\t        bool\n\t            ``True`` when successful, ``False`` when failed.\n", "        Examples\n\t        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit_free = toolkit.get_thread_status()\n", "        \"\"\"\n\t        # Check if the backend is already connected to an AEDT session\n\t        connected, msg = self.aedt_connected()\n\t        if not connected:\n\t            version = properties.aedt_version\n\t            non_graphical = properties.non_graphical\n\t            selected_process = properties.selected_process\n\t            use_grpc = properties.use_grpc\n\t            pyaedt.settings.use_grpc_api = use_grpc\n\t            if selected_process == 0:  # pragma: no cover\n", "                # Launch AEDT with COM\n\t                self.desktop = pyaedt.Desktop(\n\t                    specified_version=version,\n\t                    non_graphical=non_graphical,\n\t                    new_desktop_session=True,\n\t                )\n\t            elif use_grpc:\n\t                # Launch AEDT with GRPC\n\t                self.desktop = pyaedt.Desktop(\n\t                    specified_version=version,\n", "                    non_graphical=non_graphical,\n\t                    port=selected_process,\n\t                    new_desktop_session=False,\n\t                )\n\t            else:  # pragma: no cover\n\t                self.desktop = pyaedt.Desktop(\n\t                    specified_version=version,\n\t                    non_graphical=non_graphical,\n\t                    aedt_process_id=selected_process,\n\t                    new_desktop_session=False,\n", "                )\n\t            if not self.desktop:\n\t                msg = \"AEDT not launched\"\n\t                logger.error(msg)\n\t                return False\n\t            msg = \"AEDT launched\"\n\t            logger.debug(msg)\n\t            # Open project\n\t            if properties.active_project:\n\t                if not os.path.exists(properties.active_project + \".lock\"):  # pragma: no cover\n", "                    self.open_project(os.path.abspath(properties.active_project))\n\t            # Save AEDT session properties\n\t            if use_grpc:\n\t                new_properties = {\"selected_process\": self.desktop.port}\n\t                logger.debug(\"Grpc port {}\".format(str(self.desktop.port)))\n\t            else:\n\t                new_properties = {\"selected_process\": self.desktop.aedt_process_id}\n\t                logger.debug(\"Process ID {}\".format(str(self.desktop.aedt_process_id)))\n\t            self.set_properties(new_properties)\n\t            self._save_project_info()\n", "            if self.desktop.project_list():\n\t                self.desktop.save_project()\n\t            self.desktop.release_desktop(False, False)\n\t            self.desktop = None\n\t            logger.debug(\"Desktop released and project properties loaded\")\n\t        return True\n\t    def connect_aedt(self):\n\t        \"\"\"Connect to an existing AEDT session.\n\t        Returns\n\t        -------\n", "        bool\n\t            ``True`` when successful, ``False`` when failed.\n\t        Examples\n\t        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n", "        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.connect_aedt()\n\t        >>> toolkit.release_aedt()\n\t        \"\"\"\n\t        if properties.selected_process == 0:\n\t            logger.error(\"Process ID not defined\")\n\t            return False\n\t        version = properties.aedt_version\n\t        non_graphical = properties.non_graphical\n\t        selected_process = properties.selected_process\n", "        use_grpc = properties.use_grpc\n\t        # Connect to AEDT\n\t        pyaedt.settings.use_grpc_api = use_grpc\n\t        logger.debug(\"Connecting AEDT\")\n\t        if use_grpc:\n\t            # Launch AEDT with GRPC\n\t            self.desktop = pyaedt.Desktop(\n\t                specified_version=version,\n\t                non_graphical=non_graphical,\n\t                port=selected_process,\n", "                new_desktop_session=False,\n\t            )\n\t        else:  # pragma: no cover\n\t            self.desktop = pyaedt.Desktop(\n\t                specified_version=version,\n\t                non_graphical=non_graphical,\n\t                aedt_process_id=selected_process,\n\t                new_desktop_session=False,\n\t            )\n\t        if not self.desktop:  # pragma: no cover\n", "            logger.debug(\"AEDT not connected\")\n\t            return False\n\t        logger.debug(\"AEDT connected\")\n\t        return True\n\t    def connect_design(self, app_name=None):\n\t        \"\"\"Connect to an application design.\n\t        If a design exists, it takes the active project and design, if not,\n\t        it creates a new design of the specified type. If no application specified, the default is ``\"Hfss\"``.\n\t        Parameters\n\t        ----------\n", "        app_name : str\n\t            Aedt application name. The default is connecting to active design. Application available are:\n\t            * Circuit Design\n\t            * HFSS\n\t            * Edb\n\t            * EMIT\n\t            * HFSS 3D Layout Design\n\t            * Icepak\n\t            * Maxwell 2D\n\t            * Maxwell 3D\n", "            * 2D Extractor\n\t            * Q3D Extractor\n\t            * Rmxprt\n\t            * Twin Builder\n\t            * Mechanical\n\t        Returns\n\t        -------\n\t        bool\n\t            Returns ``True`` if the connection is successful, ``False`` otherwise.\n\t        Examples\n", "        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.connect_design()\n\t        \"\"\"\n", "        project_name = properties.active_project\n\t        design_name = \"No design\"\n\t        if properties.active_design:\n\t            design_name = list(properties.active_design.values())[0]\n\t            app_name = list(properties.active_design.keys())[0]\n\t        pyaedt.settings.use_grpc_api = properties.use_grpc\n\t        if design_name != \"No design\":\n\t            aedt_app_attr = getattr(pyaedt, self.aedt_apps[app_name])\n\t            if properties.use_grpc:\n\t                self.aedtapp = aedt_app_attr(\n", "                    specified_version=properties.aedt_version,\n\t                    port=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n\t            else:\n\t                self.aedtapp = aedt_app_attr(\n\t                    specified_version=properties.aedt_version,\n", "                    aedt_process_id=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n\t            active_design = {app_name: design_name}\n\t        elif app_name in list(self.aedt_apps.keys()):\n\t            design_name = pyaedt.generate_unique_name(app_name)\n\t            aedt_app_attr = getattr(pyaedt, self.aedt_apps[app_name])\n", "            if properties.use_grpc:\n\t                self.aedtapp = aedt_app_attr(\n\t                    specified_version=properties.aedt_version,\n\t                    port=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n\t            else:\n", "                self.aedtapp = aedt_app_attr(\n\t                    specified_version=properties.aedt_version,\n\t                    aedt_process_id=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n\t            active_design = {app_name: design_name}\n\t        else:\n", "            design_name = pyaedt.generate_unique_name(\"Hfss\")\n\t            if properties.use_grpc:\n\t                self.aedtapp = pyaedt.Hfss(\n\t                    specified_version=properties.aedt_version,\n\t                    port=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n", "            else:\n\t                self.aedtapp = pyaedt.Hfss(\n\t                    specified_version=properties.aedt_version,\n\t                    aedt_process_id=properties.selected_process,\n\t                    non_graphical=properties.non_graphical,\n\t                    new_desktop_session=False,\n\t                    projectname=project_name,\n\t                    designname=design_name,\n\t                )\n\t            self.aedtapp.save_project()\n", "            active_design = {\"HFSS\": design_name}\n\t        if self.aedtapp:\n\t            project_name = self.aedtapp.project_file\n\t            if self.aedtapp.project_file not in properties.project_list:\n\t                properties.project_list.append(project_name)\n\t                properties.design_list[self.aedtapp.project_name] = [active_design]\n\t            if self.aedtapp.design_list and active_design not in properties.design_list[self.aedtapp.project_name]:\n\t                properties.design_list[self.aedtapp.project_name].append(active_design)\n\t            properties.active_project = project_name\n\t            properties.active_design = active_design\n", "            return True\n\t    def release_aedt(self, close_projects=False, close_on_exit=False):\n\t        \"\"\"Release AEDT.\n\t        Parameters\n\t        ----------\n\t        close_projects : bool, optional\n\t            Whether to close the AEDT projects that are open in the session.\n\t            The default is ``True``.\n\t        close_on_exit : bool, optional\n\t            Whether to close the active AEDT session on exiting AEDT.\n", "            The default is ``True``.\n\t        Returns\n\t        -------\n\t        bool\n\t            ``True`` when successful, ``False`` when failed.\n\t        Examples\n\t        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n", "        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.release_aedt(True, True)\n\t        \"\"\"\n\t        released = False\n\t        if self.desktop:\n\t            try:\n\t                released = self.desktop.release_desktop(close_projects, close_on_exit)\n", "                self.desktop = None\n\t            except:\n\t                logger.error(\"Desktop not released\")\n\t                return False\n\t        if self.aedtapp:\n\t            try:\n\t                released = self.aedtapp.release_desktop(close_projects, close_on_exit)\n\t                self.aedtapp = None\n\t            except:\n\t                logger.error(\"Desktop not released\")\n", "                return False\n\t        if not released and close_projects and close_on_exit:\n\t            if self.connect_aedt():\n\t                self.desktop.release_desktop(close_projects, close_on_exit)\n\t        return True\n\t    def open_project(self, project_name=None):\n\t        \"\"\"Open AEDT project.\n\t        Parameters\n\t        ----------\n\t        project_name : str, optional\n", "            Project path to open.\n\t        Returns\n\t        -------\n\t        bool\n\t            ``True`` when successful, ``False`` when failed.\n\t        Examples\n\t        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n", "        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.open_project(\"path/to/file\")\n\t        >>> toolkit.release_aedt()\n\t        \"\"\"\n\t        if self.desktop and project_name:\n\t            self.desktop.odesktop.OpenProject(project_name)\n\t            logger.debug(\"Project {} opened\".format(project_name))\n", "            return True\n\t        else:\n\t            return False\n\t    @thread.launch_thread\n\t    def save_project(self, project_path=None):\n\t        \"\"\"Save project. It uses the properties to get the project path. This method is launched in a thread.\n\t        Returns\n\t        -------\n\t        bool\n\t            Returns ``True`` if the connection is successful, ``False`` otherwise.\n", "        Examples\n\t        --------\n\t        >>> import time\n\t        >>> from ansys.aedt.toolkits.template.backend.api import Toolkit\n\t        >>> toolkit = Toolkit()\n\t        >>> toolkit.launch_aedt()\n\t        >>> while response[0] == 0:\n\t        >>>     time.sleep(1)\n\t        >>>     response = toolkit.get_thread_status()\n\t        >>> toolkit.connect_aedt()\n", "        >>> toolkit.save_project()\n\t        \"\"\"\n\t        if self.connect_design():\n\t            if properties.active_project != project_path:\n\t                old_project_name = os.path.splitext(os.path.basename(properties.active_project))[0]\n\t                self.aedtapp.save_project(project_file=os.path.abspath(project_path))\n\t                index = properties.project_list.index(properties.active_project)\n\t                properties.project_list.pop(index)\n\t                properties.active_project = project_path\n\t                properties.project_list.append(project_path)\n", "                new_project_name = os.path.splitext(os.path.basename(properties.active_project))[0]\n\t                properties.design_list[new_project_name] = properties.design_list[old_project_name]\n\t                del properties.design_list[old_project_name]\n\t            self.aedtapp.release_desktop(False, False)\n\t            logger.debug(\"Project saved: {}\".format(project_path))\n\t            return True\n\t        else:  # pragma: no cover\n\t            logger.error(\"Project not saved\")\n\t            return False\n\t    def _save_project_info(self):\n", "        # Save project and design info\n\t        new_properties = {}\n\t        project_list = self.desktop.odesktop.GetProjectList()\n\t        if project_list:\n\t            new_properties[\"project_list\"] = []\n\t            active_project = self.desktop.odesktop.GetActiveProject()\n\t            if not active_project:\n\t                active_project = self.desktop.odesktop.SetActiveProject(project_list[0])\n\t            active_project_name = active_project.GetName()\n\t            active_design = active_project.GetActiveDesign()\n", "            # Save active design info\n\t            if active_design:\n\t                active_design_name = active_design.GetName()\n\t                active_design_name = (\n\t                    active_design_name if \";\" not in active_design_name else active_design_name.split(\";\")[1]\n\t                )\n\t                app_name = active_design.GetDesignType()\n\t                if app_name in list(self.aedt_apps.keys()):\n\t                    new_properties[\"active_design\"] = {app_name: active_design_name}\n\t                else:\n", "                    logger.error(\"Application {} not available\".format(app_name))\n\t                    self.desktop.release_desktop(True, True)\n\t                    return False\n\t            elif active_project.GetChildNames():\n\t                active_design_name = active_project.GetChildNames()[0]\n\t                active_design = active_project.SetActiveDesign(active_design_name)\n\t                app_name = active_design.GetDesignType()\n\t                new_properties[\"active_design\"] = {app_name: active_design_name}\n\t            # Save active project\n\t            active_project_path = active_project.GetPath()\n", "            new_properties[\"active_project\"] = os.path.join(active_project_path, active_project_name + \".aedt\")\n\t            # Save projects info\n\t            new_properties[\"design_list\"] = {}\n\t            for project in project_list:\n\t                oproject = self.desktop.odesktop.SetActiveProject(project)\n\t                project_name = oproject.GetName()\n\t                project_path = oproject.GetPath()\n\t                logger.debug(\"Project name: {}\".format(project_name))\n\t                new_properties[\"project_list\"].append(os.path.join(project_path, project_name + \".aedt\"))\n\t                new_properties[\"design_list\"][project_name] = []\n", "                design_list = oproject.GetChildNames()\n\t                if design_list:\n\t                    for design_name in design_list:\n\t                        odesign = oproject.SetActiveDesign(design_name)\n\t                        app_name = odesign.GetDesignType()\n\t                        if app_name in list(self.aedt_apps.keys()):\n\t                            new_properties[\"design_list\"][project_name].append({app_name: design_name})\n\t                        else:\n\t                            logger.error(\"Application {} not available\".format(app_name))\n\t                            self.desktop.release_desktop(True, True)\n", "                            return False\n\t        if new_properties:\n\t            self.set_properties(new_properties)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/properties.py", "chunked_list": ["try:\n\t    from properties_data import PropertiesData\n\texcept ModuleNotFoundError:\n\t    from .properties_data import PropertiesData\n\timport json\n\timport os\n\twith open(os.path.join(os.path.dirname(__file__), \"general_properties.json\")) as fh:\n\t    _general_properties = json.load(fh)\n\twith open(os.path.join(os.path.dirname(__file__), \"..\", \"properties.json\")) as fh:\n\t    _properties = json.load(fh)\n", "_default_properties = {**_general_properties, **_properties}\n\tproperties = PropertiesData(_default_properties)\n\tdef check_property_file_against_defaults(prop_filename):\n\t    \"\"\"\n\t    Check if property exists in defaults.\n\t    Parameters\n\t    ----------\n\t    prop_filename : str\n\t        Qualified path of the property file to be checked\n\t    Returns\n", "    -------\n\t    bool\n\t        `True` if the files check passes, `False` otherwise\n\t    \"\"\"\n\t    tmp_properties = PropertiesData(_default_properties)\n\t    try:\n\t        tmp_properties.read_from_file(prop_filename)\n\t        return True\n\t    except Exception as e:\n\t        print(e)\n", "        return False\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/__init__.py", "chunked_list": []}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/properties_data.py", "chunked_list": ["import copy\n\timport json\n\tclass FrozenClass(object):\n\t    \"\"\"Frozen properties.\"\"\"\n\t    __isfrozen = False\n\t    def __setattr__(self, key, value):\n\t        if self.__isfrozen:\n\t            if key not in dir(self):\n\t                raise AttributeError(\"{} is a frozen class. Not existing key: {}\".format(type(self).__name__, key))\n\t            if type(value) == int and type(self.__dict__[key]) == float:\n", "                value = float(value)\n\t            if not isinstance(value, type(self.__dict__[key])):\n\t                raise TypeError(\"{} is a frozen class. Wrong type for key: {}\".format(type(self).__name__, key))\n\t        object.__setattr__(self, key, value)\n\t    def _freeze(self):\n\t        self.__isfrozen = True\n\t    def _unfreeze(self):\n\t        self.__isfrozen = False\n\tclass PropertiesData(FrozenClass):\n\t    \"\"\"Properties data model.\"\"\"\n", "    def __init__(self, default_properties):\n\t        self.__default_properties = copy.deepcopy(default_properties)\n\t        for key, value in self.__default_properties.items():\n\t            setattr(self, key, copy.deepcopy(value))\n\t        self._freeze()  # no new attributes after this point.\n\t    def write_to_file(self, file_name):\n\t        with open(file_name, \"w\") as write_file:\n\t            temp_dict = {}\n\t            for key in self.__default_properties:\n\t                temp_dict[key] = self.__dict__[key]\n", "            json.dump(temp_dict, write_file, indent=4)\n\t    def read_from_file(self, file_name):\n\t        with open(file_name, \"r\") as read_file:\n\t            temp_dict = json.load(read_file)\n\t            for key, value in temp_dict.items():\n\t                setattr(self, key, value)\n\t    def reload_defaults(self):\n\t        for key, value in self.__default_properties.items():\n\t            setattr(self, key, copy.deepcopy(value))\n\t    def export_to_dict(self):\n", "        temp_dict = {}\n\t        for key in self.__default_properties:\n\t            temp_dict[key] = self.__dict__[key]\n\t        return temp_dict\n\t    def __eq__(self, other):\n\t        if not isinstance(other, PropertiesData):\n\t            # don't attempt to compare against unrelated types\n\t            return False\n\t        for attr in self.__default_properties.keys():\n\t            if hasattr(other, attr) and self.attr == other.attr:\n", "                continue\n\t            else:\n\t                return False\n\t        return True\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/logger_handler.py", "chunked_list": ["import logging\n\timport os.path\n\timport tempfile\n\tfrom ansys.aedt.toolkits.template.backend.common.properties import properties\n\t# Create a logger\n\tlogger = logging.getLogger(__name__)\n\tif properties.debug:\n\t    # Set log level (e.g., DEBUG, INFO, WARNING, ERROR)\n\t    logger.setLevel(logging.DEBUG)\n\t    # Create a file handler for the logger\n", "    if properties.log_file:\n\t        temp_dir = os.path.join(tempfile.gettempdir(), properties.log_file)\n\t        if not os.path.exists(temp_dir):\n\t            file = open(temp_dir, \"w\")\n\t            file.close()\n\t        log_file = properties.log_file = temp_dir\n\t        file_handler = logging.FileHandler(log_file)\n\t        # Set the log format\n\t        formatter = logging.Formatter(\"%(asctime)s - %(levelname)s - %(message)s\")\n\t        file_handler.setFormatter(formatter)\n", "        # Add the file handler to the logger\n\t        logger.addHandler(file_handler)\n\t    # Create a stream handler for logging to the console\n\t    console_handler = logging.StreamHandler()\n\t    # Add the console handler to the logger\n\t    logger.addHandler(console_handler)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/backend/common/thread_manager.py", "chunked_list": ["from functools import wraps\n\timport threading\n\timport time\n\tfrom ansys.aedt.toolkits.template.backend.common.logger_handler import logger\n\tfrom ansys.aedt.toolkits.template.backend.common.properties import properties\n\tclass ThreadManager(object):\n\t    \"\"\"Class to control toolkit threads.\"\"\"\n\t    def __init__(self):\n\t        pass\n\t    @classmethod\n", "    def process_exe(cls, process, *args):\n\t        \"\"\"Execute process.\"\"\"\n\t        # process_name = process.__name__\n\t        # set the variable at process start\n\t        properties.is_toolkit_busy = True\n\t        # start\n\t        process(*args)\n\t        # waits for the thread closure\n\t        time.sleep(0.5)\n\t        # set the variable at process end\n", "        properties.is_toolkit_busy = False\n\t    @classmethod\n\t    def launch_thread(cls, process):\n\t        \"\"\"Launch process.\"\"\"\n\t        @wraps(process)\n\t        def inner_function(*args):\n\t            thread_name = \"Toolkit_Thread\"\n\t            if not properties.is_toolkit_busy:\n\t                # Multithreading fails with COM\n\t                if properties.use_grpc:\n", "                    logger.debug(\"Starting thread: {}\".format(thread_name))\n\t                    properties.is_toolkit_busy = True\n\t                    running_thread = threading.Thread(\n\t                        target=cls.process_exe,\n\t                        name=thread_name,\n\t                        args=(\n\t                            process,\n\t                            *args,\n\t                        ),\n\t                        daemon=True,\n", "                    )\n\t                    running_thread.start()\n\t                    return True\n\t                else:\n\t                    logger.debug(\"Starting direct process: {}\".format(thread_name))\n\t                    cls.process_exe(process, *args)\n\t                    return True\n\t            else:\n\t                return False\n\t        return inner_function\n", "    @property\n\t    def running_threads(self):\n\t        threads_list = [t for t in threading.enumerate() if type(t) == threading.Thread]\n\t        return threads_list\n\t    def is_thread_running(self):\n\t        \"\"\"\n\t        Check if the thread is running\n\t        \"\"\"\n\t        thread_name = \"Toolkit_Thread\"\n\t        running_threads_names = [t.name for t in self.running_threads]\n", "        if thread_name in running_threads_names:\n\t            return True\n\t        else:\n\t            return False\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/__init__.py", "chunked_list": []}
{"filename": "src/ansys/aedt/toolkits/template/ui/frontend_actions.py", "chunked_list": ["import json\n\timport os\n\timport sys\n\tfrom PySide6 import QtWidgets\n\tfrom ansys.aedt.toolkits.template.ui.common.frontend_ui import Ui_MainWindow\n\tfrom ansys.aedt.toolkits.template.ui.common.logger_handler import logger\n\tfrom ansys.aedt.toolkits.template.ui.frontend_api import ToolkitFrontend\n\tos.environ[\"QT_API\"] = \"pyside6\"\n\t# User inputs\n\ttoolkit_title = \"PyAEDT Toolkit Template Wizard\"\n", "# Backend URL and port\n\twith open(os.path.join(os.path.dirname(__file__), \"common\", \"general_properties.json\")) as fh:\n\t    general_settings = json.load(fh)\n\turl = general_settings[\"backend_url\"]\n\tport = str(general_settings[\"backend_port\"])\n\tclass ApplicationWindow(QtWidgets.QMainWindow, Ui_MainWindow, ToolkitFrontend):\n\t    def __init__(self):\n\t        logger.info(\"Frontend initialization...\")\n\t        super(ApplicationWindow, self).__init__()\n\t        ToolkitFrontend.__init__(self)\n", "        self.url = \"http://\" + url + \":\" + port\n\t        # Set title\n\t        self.set_title(toolkit_title)\n\t        # Check backend connection\n\t        self.backend = self.check_connection()\n\t        if not self.backend:\n\t            raise \"Backend not running\"\n\t        # General Settings\n\t        # Get default properties\n\t        default_properties = self.get_properties()\n", "        # Get AEDT installed versions\n\t        installed_versions = self.installed_versions()\n\t        # Add versions to the UI\n\t        if installed_versions:\n\t            for ver in installed_versions:\n\t                self.aedt_version_combo.addItem(ver)\n\t        elif self.backend:\n\t            self.aedt_version_combo.addItem(\"AEDT not installed\")\n\t        if \"aedt_version\" in default_properties.keys() and default_properties[\"aedt_version\"] in installed_versions:\n\t            self.aedt_version_combo.setCurrentText(default_properties[\"aedt_version\"])\n", "            self.find_process_ids()\n\t        # Add default properties\n\t        self.non_graphical_combo.setCurrentText(str(default_properties[\"non_graphical\"]))\n\t        self.numcores.setText(str(default_properties[\"core_number\"]))\n\t        # Thread signal\n\t        self.status_changed.connect(self.change_thread_status)\n\t        # Select AEDT project\n\t        self.browse_project.clicked.connect(self.browse_for_project)\n\t        # Close toolkit button\n\t        self.release_button.clicked.connect(self.release_only)\n", "        # Close toolkit and AEDT button\n\t        self.release_and_exit_button.clicked.connect(self.release_and_close)\n\t        # Find active AEDT sessions\n\t        self.aedt_version_combo.currentTextChanged.connect(self.find_process_ids)\n\t        # Change designs\n\t        self.project_aedt_combo.currentTextChanged.connect(self.find_design_names)\n\t        # Launch AEDT\n\t        if default_properties[\"selected_process\"]:\n\t            self.launch_aedt()\n\t        self.connect_aedtapp.clicked.connect(self.launch_aedt)\n", "        # Toolkit Settings\n\t        # Create geometry\n\t        self.create_geometry_buttom.clicked.connect(self.create_geometry_toolkit)\n\t        # Save project\n\t        self.action_save_project.triggered.connect(lambda checked: self.save_project())\n\t    def closeEvent(self, event):\n\t        close = QtWidgets.QMessageBox.question(\n\t            self, \"QUIT\", \"Confirm quit?\", QtWidgets.QMessageBox.Yes | QtWidgets.QMessageBox.No\n\t        )\n\t        if close == QtWidgets.QMessageBox.Yes:\n", "            logger.info(\"Closing toolkit\")\n\t            event.accept()\n\t        else:\n\t            event.ignore()\n\tif __name__ == \"__main__\":\n\t    app = QtWidgets.QApplication(sys.argv)\n\t    window = ApplicationWindow()\n\t    window.show()\n\t    sys.exit(app.exec())\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/frontend_api.py", "chunked_list": ["import os\n\timport requests\n\tfrom ansys.aedt.toolkits.template.ui.common.frontend_api_generic import FrontendGeneric\n\tfrom ansys.aedt.toolkits.template.ui.common.logger_handler import logger\n\tfrom ansys.aedt.toolkits.template.ui.common.thread_manager import FrontendThread\n\tclass ToolkitFrontend(FrontendThread, FrontendGeneric):\n\t    def __init__(self):\n\t        FrontendThread.__init__(self)\n\t        FrontendGeneric.__init__(self)\n\t    def create_geometry_toolkit(self):\n", "        if self.backend_busy():\n\t            msg = \"Toolkit running\"\n\t            logger.debug(msg)\n\t            self.write_log_line(msg)\n\t            return\n\t        properties = self.get_properties()\n\t        properties[\"multiplier\"] = float(self.multiplier.text())\n\t        properties[\"geometry\"] = self.geometry_combo.currentText()\n\t        project_selected = self.project_aedt_combo.currentText()\n\t        for project in properties[\"project_list\"]:\n", "            if os.path.splitext(os.path.basename(project))[0] == project_selected and project_selected != \"No project\":\n\t                properties[\"active_project\"] = project\n\t                design_selected = self.design_aedt_combo.currentText()\n\t                if project_selected in list(properties[\"design_list\"].keys()):\n\t                    designs = properties[\"design_list\"][project_selected]\n\t                    for design in designs:\n\t                        if design_selected in list(design.values())[0]:\n\t                            properties[\"active_design\"] = design\n\t                            break\n\t                break\n", "        self.set_properties(properties)\n\t        self.update_progress(0)\n\t        response = requests.post(self.url + \"/create_geometry\")\n\t        if response.ok:\n\t            self.update_progress(50)\n\t            # Start the thread\n\t            self.running = True\n\t            self.start()\n\t            msg = \"Create geometry call launched\"\n\t            logger.debug(msg)\n", "            self.write_log_line(msg)\n\t        else:\n\t            msg = f\"Failed backend call: {self.url}\"\n\t            logger.debug(msg)\n\t            self.write_log_line(msg)\n\t            self.update_progress(100)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/common/frontend_api_generic.py", "chunked_list": ["import os\n\timport sys\n\timport time\n\tfrom PySide6 import QtCore\n\tfrom PySide6 import QtGui\n\tfrom PySide6 import QtWidgets\n\timport qdarkstyle\n\timport requests\n\tfrom ansys.aedt.toolkits.template.ui.common.logger_handler import logger\n\tclass FrontendGeneric(object):\n", "    def __init__(self):\n\t        self.setupUi(self)\n\t        # Load toolkit icon\n\t        self.images_path = os.path.join(os.path.dirname(__file__), \"images\")\n\t        icon = self._load_icon(self.images_path)\n\t        self.setWindowIcon(icon)\n\t        # Set font style\n\t        self.set_font(self)\n\t        # UI Logger\n\t        XStream.stdout().messageWritten.connect(lambda value: self.write_log_line(value))\n", "        XStream.stderr().messageWritten.connect(lambda value: self.write_log_line(value))\n\t    def set_title(self, toolkit_title):\n\t        # Toolkit name\n\t        self.setWindowTitle(toolkit_title)\n\t        return True\n\t    def write_log_line(self, value):\n\t        self.log_text.insertPlainText(value + \"\\n\")\n\t        tc = self.log_text.textCursor()\n\t        tc.setPosition(self.log_text.document().characterCount())\n\t        self.log_text.setTextCursor(tc)\n", "    def update_progress(self, value):\n\t        self.progress_bar.setValue(value)\n\t        if 0 < value < 100:\n\t            self.progress_bar.setStyleSheet(\n\t                \"\"\"\n\t                QProgressBar {\n\t                    background-color: transparent;  /* Set the background color */\n\t                    color: #FFFFFF;  /* Set the text color */\n\t                }\n\t                QProgressBar::chunk {\n", "                    background-color: #FF0000;  /* Set the progress color */\n\t                }\n\t            \"\"\"\n\t            )\n\t        elif value == 100:\n\t            self.progress_bar.setStyleSheet(\n\t                \"\"\"\n\t                QProgressBar {\n\t                    background-color: transparent;  /* Set the background color */\n\t                    color: #FFFFFF;  /* Set the text color */\n", "                 }\n\t                QProgressBar::chunk {\n\t                    background-color: #008000;  /* Set the progress color */\n\t                }\n\t                \"\"\"\n\t            )\n\t        if self.progress_bar.isHidden():\n\t            self.progress_bar.setVisible(True)\n\t    def check_connection(self):\n\t        try:\n", "            logger.debug(\"Check backend connection\")\n\t            count = 0\n\t            response = False\n\t            while not response and count < 10:\n\t                time.sleep(1)\n\t                response = requests.get(self.url + \"/health\")\n\t                count += 1\n\t            if response.ok:\n\t                logger.debug(response.json())\n\t                return True\n", "            logger.error(response.json())\n\t            return False\n\t        except requests.exceptions.RequestException as e:\n\t            logger.error(\"Backend not running\")\n\t            return False\n\t    def backend_busy(self):\n\t        response = requests.get(self.url + \"/get_status\")\n\t        if response.ok and response.json() == \"Backend running\":\n\t            return True\n\t        else:\n", "            return False\n\t    def installed_versions(self):\n\t        try:\n\t            response = requests.get(self.url + \"/installed_versions\")\n\t            if response.ok:\n\t                versions = response.json()\n\t                return versions\n\t        except requests.exceptions.RequestException:\n\t            self.write_log_line(\"Get AEDT installed versions failed\")\n\t            return False\n", "    def get_properties(self):\n\t        try:\n\t            response = requests.get(self.url + \"/get_properties\")\n\t            if response.ok:\n\t                properties = response.json()\n\t                return properties\n\t        except requests.exceptions.RequestException:\n\t            self.write_log_line(\"Get properties failed\")\n\t    def set_properties(self, data):\n\t        try:\n", "            response = requests.put(self.url + \"/set_properties\", json=data)\n\t            if response.ok:\n\t                response.json()\n\t        except requests.exceptions.RequestException:\n\t            self.write_log_line(f\"Set properties failed\")\n\t    def change_thread_status(self):\n\t        self.find_process_ids()\n\t        logger.info(\"Frontend thread finished\")\n\t        self.update_progress(100)\n\t    def browse_for_project(self):\n", "        dialog = QtWidgets.QFileDialog()\n\t        dialog.setOption(QtWidgets.QFileDialog.DontUseNativeDialog, True)\n\t        dialog.setFileMode(QtWidgets.QFileDialog.FileMode.AnyFile)\n\t        dialog.setOption(QtWidgets.QFileDialog.Option.DontConfirmOverwrite, True)\n\t        dialog.setAcceptMode(QtWidgets.QFileDialog.AcceptSave)\n\t        fileName, _ = dialog.getOpenFileName(\n\t            self,\n\t            \"Open or create new aedt file\",\n\t            \"\",\n\t            \"Aedt Files (*.aedt)\",\n", "        )\n\t        if fileName:\n\t            self.project_name.setText(fileName)\n\t            properties = self.get_properties()\n\t            properties[\"active_project\"] = fileName\n\t            self.set_properties(properties)\n\t    def find_process_ids(self):\n\t        self.process_id_combo.clear()\n\t        self.process_id_combo.addItem(\"Create New Session\")\n\t        try:\n", "            # Modify selected version\n\t            properties = self.get_properties()\n\t            properties[\"aedt_version\"] = self.aedt_version_combo.currentText()\n\t            self.set_properties(properties)\n\t            response = requests.get(self.url + \"/aedt_sessions\")\n\t            if response.ok:\n\t                sessions = response.json()\n\t                for session in sessions:\n\t                    if session[1] == -1:\n\t                        self.process_id_combo.addItem(\"Process {}\".format(session[0], session[1]))\n", "                    else:\n\t                        self.process_id_combo.addItem(\"Process {} on Grpc {}\".format(session[0], session[1]))\n\t            return True\n\t        except requests.exceptions.RequestException:\n\t            self.write_log_line(f\"Find AEDT sessions failed\")\n\t            return False\n\t    def find_design_names(self):\n\t        response = requests.get(self.url + \"/get_status\")\n\t        if response.ok and response.json() == \"Backend running\":\n\t            self.write_log_line(\"Please wait, toolkit running\")\n", "        elif response.ok and response.json() == \"Backend free\":\n\t            self.design_aedt_combo.clear()\n\t            try:\n\t                # Modify selected version\n\t                properties = self.get_properties()\n\t                properties[\"active_project\"] = self.project_aedt_combo.currentText()\n\t                self.set_properties(properties)\n\t                response = requests.get(self.url + \"/get_design_names\")\n\t                if response.ok:\n\t                    designs = response.json()\n", "                    for design in designs:\n\t                        self.design_aedt_combo.addItem(list(design.values())[0])\n\t                    if not designs:\n\t                        self.design_aedt_combo.addItem(\"No design\")\n\t                return True\n\t            except requests.exceptions.RequestException:\n\t                self.write_log_line(f\"Find AEDT designs failed\")\n\t                return False\n\t    def launch_aedt(self):\n\t        response = requests.get(self.url + \"/get_status\")\n", "        if response.ok and response.json() == \"Backend running\":\n\t            self.write_log_line(\"Please wait, toolkit running\")\n\t        elif response.ok and response.json() == \"Backend free\":\n\t            self.update_progress(0)\n\t            response = requests.get(self.url + \"/health\")\n\t            if response.ok and response.json() == \"Toolkit not connected to AEDT\":\n\t                properties = self.get_properties()\n\t                if properties[\"selected_process\"] == 0:\n\t                    properties[\"aedt_version\"] = self.aedt_version_combo.currentText()\n\t                    properties[\"non_graphical\"] = True\n", "                    if self.non_graphical_combo.currentText() == \"False\":\n\t                        properties[\"non_graphical\"] = False\n\t                    if self.process_id_combo.currentText() == \"Create New Session\":\n\t                        if not properties[\"active_project\"]:\n\t                            properties[\"selected_process\"] = 0\n\t                    else:\n\t                        text_splitted = self.process_id_combo.currentText().split(\" \")\n\t                        if len(text_splitted) == 5:\n\t                            properties[\"use_grpc\"] = True\n\t                            properties[\"selected_process\"] = int(text_splitted[4])\n", "                        else:\n\t                            properties[\"use_grpc\"] = False\n\t                            properties[\"selected_process\"] = int(text_splitted[1])\n\t                    self.set_properties(properties)\n\t                response = requests.post(self.url + \"/launch_aedt\")\n\t                if response.status_code == 200:\n\t                    self.update_progress(50)\n\t                    # Start the thread\n\t                    self.running = True\n\t                    logger.debug(\"Launching AEDT\")\n", "                    self.start()\n\t                    self.toolkit_tab.removeTab(0)\n\t                else:\n\t                    self.write_log_line(f\"Failed backend call: {self.url}\")\n\t                    self.update_progress(100)\n\t            else:\n\t                self.write_log_line(response.json())\n\t                self.update_progress(100)\n\t        else:\n\t            self.write_log_line(response.json())\n", "            self.update_progress(100)\n\t    def save_project(self):\n\t        dialog = QtWidgets.QFileDialog()\n\t        dialog.setOption(QtWidgets.QFileDialog.DontUseNativeDialog, True)\n\t        dialog.setFileMode(QtWidgets.QFileDialog.FileMode.AnyFile)\n\t        dialog.setOption(QtWidgets.QFileDialog.Option.DontConfirmOverwrite, True)\n\t        file_name, _ = dialog.getSaveFileName(\n\t            self,\n\t            \"Save new aedt file\",\n\t            \"\",\n", "            \"Aedt Files (*.aedt)\",\n\t        )\n\t        if file_name:\n\t            response = requests.get(self.url + \"/get_status\")\n\t            if response.ok and response.json() == \"Backend running\":\n\t                self.write_log_line(\"Please wait, toolkit running\")\n\t            elif response.ok and response.json() == \"Backend free\":\n\t                self.project_name.setText(file_name)\n\t                properties = self.get_properties()\n\t                # properties[\"active_project\"] = file_name\n", "                # self.set_properties(properties)\n\t                self.update_progress(0)\n\t                response = requests.post(self.url + \"/save_project\", json=file_name)\n\t                if response.ok:\n\t                    self.update_progress(50)\n\t                    # Start the thread\n\t                    self.running = True\n\t                    logger.debug(\"Saving project: {}\".format(file_name))\n\t                    self.start()\n\t                    self.write_log_line(\"Saving project process launched\")\n", "                else:\n\t                    msg = f\"Failed backend call: {self.url}\"\n\t                    logger.debug(msg)\n\t                    self.write_log_line(msg)\n\t                    self.update_progress(100)\n\t    def release_only(self):\n\t        \"\"\"Release desktop.\"\"\"\n\t        response = requests.get(self.url + \"/get_status\")\n\t        if response.ok and response.json() == \"Backend running\":\n\t            self.write_log_line(\"Please wait, toolkit running\")\n", "        else:\n\t            properties = {\"close_projects\": False, \"close_on_exit\": False}\n\t            if self.close():\n\t                requests.post(self.url + \"/close_aedt\", json=properties)\n\t    def release_and_close(self):\n\t        \"\"\"Release and close desktop.\"\"\"\n\t        response = requests.get(self.url + \"/get_status\")\n\t        if response.ok and response.json() == \"Backend running\":\n\t            self.write_log_line(\"Please wait, toolkit running\")\n\t        elif response.ok and response.json() == \"Backend free\":\n", "            properties = {\"close_projects\": True, \"close_on_exit\": True}\n\t            if self.close():\n\t                requests.post(self.url + \"/close_aedt\", json=properties)\n\t    def on_cancel_clicked(self):\n\t        self.close()\n\t    @staticmethod\n\t    def set_font(ui_obj):\n\t        ui_obj._font = QtGui.QFont()\n\t        ui_obj._font.setPointSize(12)\n\t        ui_obj.setFont(ui_obj._font)\n", "        ui_obj.setStyleSheet(qdarkstyle.load_stylesheet(qt_api=\"pyside6\"))\n\t        ui_obj.top_menu_bar.setFont(ui_obj._font)\n\t    @staticmethod\n\t    def _load_icon(images_path):\n\t        icon = QtGui.QIcon()\n\t        icon.addFile(\n\t            os.path.join(images_path, \"logo_cropped.png\"),\n\t            QtCore.QSize(),\n\t            QtGui.QIcon.Normal,\n\t            QtGui.QIcon.Off,\n", "        )\n\t        icon.addFile(\n\t            os.path.join(images_path, \"logo_cropped.png\"),\n\t            QtCore.QSize(),\n\t            QtGui.QIcon.Normal,\n\t            QtGui.QIcon.On,\n\t        )\n\t        return icon\n\tclass XStream(QtCore.QObject):\n\t    \"\"\"User interface message streamer.\"\"\"\n", "    _stdout = None\n\t    _stderr = None\n\t    messageWritten = QtCore.Signal(str)\n\t    def flush(self):\n\t        \"\"\"Pass.\"\"\"\n\t        pass\n\t    def fileno(self):\n\t        \"\"\"File.\"\"\"\n\t        return -1\n\t    def write(self, msg):\n", "        \"\"\"Write a message.\"\"\"\n\t        if not self.signalsBlocked():\n\t            self.messageWritten.emit(msg)\n\t    @staticmethod\n\t    def stdout():\n\t        \"\"\"Info logger.\"\"\"\n\t        if not XStream._stdout:\n\t            XStream._stdout = XStream()\n\t            sys.stdout = XStream._stdout\n\t        return XStream._stdout\n", "    @staticmethod\n\t    def stderr():\n\t        \"\"\"Error logger.\"\"\"\n\t        if not XStream._stderr:\n\t            XStream._stderr = XStream()\n\t            sys.stderr = XStream._stderr\n\t        return XStream._stderr\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/common/frontend_ui.py", "chunked_list": ["# -*- coding: utf-8 -*-\n\t################################################################################\n\t## Form generated from reading UI file 'toolkit.ui'\n\t##\n\t## Created by: Qt User Interface Compiler version 6.5.1\n\t##\n\t## WARNING! All changes made in this file will be lost when recompiling UI file!\n\t################################################################################\n\tfrom PySide6.QtCore import (QCoreApplication, QDate, QDateTime, QLocale,\n\t    QMetaObject, QObject, QPoint, QRect,\n", "    QSize, QTime, QUrl, Qt)\n\tfrom PySide6.QtGui import (QAction, QBrush, QColor, QConicalGradient,\n\t    QCursor, QFont, QFontDatabase, QGradient,\n\t    QIcon, QImage, QKeySequence, QLinearGradient,\n\t    QPainter, QPalette, QPixmap, QRadialGradient,\n\t    QTransform)\n\tfrom PySide6.QtWidgets import (QApplication, QComboBox, QFrame, QGridLayout,\n\t    QHBoxLayout, QLabel, QLayout, QLineEdit,\n\t    QMainWindow, QMenu, QMenuBar, QPlainTextEdit,\n\t    QProgressBar, QPushButton, QSizePolicy, QSpacerItem,\n", "    QStatusBar, QTabWidget, QVBoxLayout, QWidget)\n\tclass Ui_MainWindow(object):\n\t    def setupUi(self, MainWindow):\n\t        if not MainWindow.objectName():\n\t            MainWindow.setObjectName(u\"MainWindow\")\n\t        MainWindow.resize(1107, 1178)\n\t        self.action_save_project = QAction(MainWindow)\n\t        self.action_save_project.setObjectName(u\"action_save_project\")\n\t        self.centralwidget = QWidget(MainWindow)\n\t        self.centralwidget.setObjectName(u\"centralwidget\")\n", "        sizePolicy = QSizePolicy(QSizePolicy.Expanding, QSizePolicy.Expanding)\n\t        sizePolicy.setHorizontalStretch(0)\n\t        sizePolicy.setVerticalStretch(0)\n\t        sizePolicy.setHeightForWidth(self.centralwidget.sizePolicy().hasHeightForWidth())\n\t        self.centralwidget.setSizePolicy(sizePolicy)\n\t        self.verticalLayout = QVBoxLayout(self.centralwidget)\n\t        self.verticalLayout.setObjectName(u\"verticalLayout\")\n\t        self.main_menu = QWidget(self.centralwidget)\n\t        self.main_menu.setObjectName(u\"main_menu\")\n\t        sizePolicy1 = QSizePolicy(QSizePolicy.Preferred, QSizePolicy.Preferred)\n", "        sizePolicy1.setHorizontalStretch(0)\n\t        sizePolicy1.setVerticalStretch(0)\n\t        sizePolicy1.setHeightForWidth(self.main_menu.sizePolicy().hasHeightForWidth())\n\t        self.main_menu.setSizePolicy(sizePolicy1)\n\t        self.gridLayout = QGridLayout(self.main_menu)\n\t        self.gridLayout.setObjectName(u\"gridLayout\")\n\t        self.release_button = QPushButton(self.main_menu)\n\t        self.release_button.setObjectName(u\"release_button\")\n\t        self.release_button.setMinimumSize(QSize(0, 40))\n\t        self.gridLayout.addWidget(self.release_button, 3, 2, 1, 1)\n", "        self.release_and_exit_button = QPushButton(self.main_menu)\n\t        self.release_and_exit_button.setObjectName(u\"release_and_exit_button\")\n\t        self.release_and_exit_button.setMinimumSize(QSize(0, 40))\n\t        self.gridLayout.addWidget(self.release_and_exit_button, 3, 3, 1, 1)\n\t        self.horizontalSpacer = QSpacerItem(40, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t        self.gridLayout.addItem(self.horizontalSpacer, 3, 1, 1, 1)\n\t        self.toolkit_tab = QTabWidget(self.main_menu)\n\t        self.toolkit_tab.setObjectName(u\"toolkit_tab\")\n\t        sizePolicy1.setHeightForWidth(self.toolkit_tab.sizePolicy().hasHeightForWidth())\n\t        self.toolkit_tab.setSizePolicy(sizePolicy1)\n", "        self.toolkit_tab.setTabShape(QTabWidget.Triangular)\n\t        self.settings = QWidget()\n\t        self.settings.setObjectName(u\"settings\")\n\t        self.horizontalLayout_25 = QHBoxLayout(self.settings)\n\t        self.horizontalLayout_25.setObjectName(u\"horizontalLayout_25\")\n\t        self.settings_layout = QVBoxLayout()\n\t        self.settings_layout.setObjectName(u\"settings_layout\")\n\t        self.cores_layout = QHBoxLayout()\n\t        self.cores_layout.setObjectName(u\"cores_layout\")\n\t        self.cores_label = QLabel(self.settings)\n", "        self.cores_label.setObjectName(u\"cores_label\")\n\t        self.cores_layout.addWidget(self.cores_label)\n\t        self.horizontalSpacer_30 = QSpacerItem(40, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t        self.cores_layout.addItem(self.horizontalSpacer_30)\n\t        self.numcores = QLineEdit(self.settings)\n\t        self.numcores.setObjectName(u\"numcores\")\n\t        self.cores_layout.addWidget(self.numcores)\n\t        self.settings_layout.addLayout(self.cores_layout)\n\t        self.graphical_layout = QHBoxLayout()\n\t        self.graphical_layout.setObjectName(u\"graphical_layout\")\n", "        self.graphical_label = QLabel(self.settings)\n\t        self.graphical_label.setObjectName(u\"graphical_label\")\n\t        self.graphical_layout.addWidget(self.graphical_label)\n\t        self.non_graphical_combo = QComboBox(self.settings)\n\t        self.non_graphical_combo.addItem(\"\")\n\t        self.non_graphical_combo.addItem(\"\")\n\t        self.non_graphical_combo.setObjectName(u\"non_graphical_combo\")\n\t        self.graphical_layout.addWidget(self.non_graphical_combo)\n\t        self.settings_layout.addLayout(self.graphical_layout)\n\t        self.aedt_version_layout = QHBoxLayout()\n", "        self.aedt_version_layout.setObjectName(u\"aedt_version_layout\")\n\t        self.version_label = QLabel(self.settings)\n\t        self.version_label.setObjectName(u\"version_label\")\n\t        self.aedt_version_layout.addWidget(self.version_label)\n\t        self.aedt_version_combo = QComboBox(self.settings)\n\t        self.aedt_version_combo.setObjectName(u\"aedt_version_combo\")\n\t        self.aedt_version_layout.addWidget(self.aedt_version_combo)\n\t        self.settings_layout.addLayout(self.aedt_version_layout)\n\t        self.aedt_sessions_layout = QHBoxLayout()\n\t        self.aedt_sessions_layout.setObjectName(u\"aedt_sessions_layout\")\n", "        self.aedt_sessions_label = QLabel(self.settings)\n\t        self.aedt_sessions_label.setObjectName(u\"aedt_sessions_label\")\n\t        self.aedt_sessions_layout.addWidget(self.aedt_sessions_label)\n\t        self.process_id_combo = QComboBox(self.settings)\n\t        self.process_id_combo.addItem(\"\")\n\t        self.process_id_combo.setObjectName(u\"process_id_combo\")\n\t        self.aedt_sessions_layout.addWidget(self.process_id_combo)\n\t        self.settings_layout.addLayout(self.aedt_sessions_layout)\n\t        self.project_path_layout = QHBoxLayout()\n\t        self.project_path_layout.setObjectName(u\"project_path_layout\")\n", "        self.project_path_label = QLabel(self.settings)\n\t        self.project_path_label.setObjectName(u\"project_path_label\")\n\t        self.project_path_layout.addWidget(self.project_path_label)\n\t        self.horizontalSpacer_2 = QSpacerItem(40, 20, QSizePolicy.Minimum, QSizePolicy.Minimum)\n\t        self.project_path_layout.addItem(self.horizontalSpacer_2)\n\t        self.project_name = QLineEdit(self.settings)\n\t        self.project_name.setObjectName(u\"project_name\")\n\t        self.project_path_layout.addWidget(self.project_name)\n\t        self.settings_layout.addLayout(self.project_path_layout)\n\t        self.horizontalLayout_5 = QHBoxLayout()\n", "        self.horizontalLayout_5.setObjectName(u\"horizontalLayout_5\")\n\t        self.horizontalSpacer_3 = QSpacerItem(40, 20, QSizePolicy.Expanding, QSizePolicy.Minimum)\n\t        self.horizontalLayout_5.addItem(self.horizontalSpacer_3)\n\t        self.browse_project = QPushButton(self.settings)\n\t        self.browse_project.setObjectName(u\"browse_project\")\n\t        self.horizontalLayout_5.addWidget(self.browse_project)\n\t        self.settings_layout.addLayout(self.horizontalLayout_5)\n\t        self.verticalSpacer_8 = QSpacerItem(20, 40, QSizePolicy.Minimum, QSizePolicy.Expanding)\n\t        self.settings_layout.addItem(self.verticalSpacer_8)\n\t        self.connect_aedtapp = QPushButton(self.settings)\n", "        self.connect_aedtapp.setObjectName(u\"connect_aedtapp\")\n\t        self.connect_aedtapp.setMinimumSize(QSize(0, 40))\n\t        self.settings_layout.addWidget(self.connect_aedtapp)\n\t        self.horizontalLayout_25.addLayout(self.settings_layout)\n\t        self.horizontalSpacer_29 = QSpacerItem(40, 20, QSizePolicy.Preferred, QSizePolicy.Minimum)\n\t        self.horizontalLayout_25.addItem(self.horizontalSpacer_29)\n\t        self.toolkit_tab.addTab(self.settings, \"\")\n\t        self.design = QWidget()\n\t        self.design.setObjectName(u\"design\")\n\t        self.verticalLayout_2 = QVBoxLayout(self.design)\n", "        self.verticalLayout_2.setObjectName(u\"verticalLayout_2\")\n\t        self.design_layout = QHBoxLayout()\n\t        self.design_layout.setObjectName(u\"design_layout\")\n\t        self.design_settings = QFrame(self.design)\n\t        self.design_settings.setObjectName(u\"design_settings\")\n\t        sizePolicy2 = QSizePolicy(QSizePolicy.Expanding, QSizePolicy.Preferred)\n\t        sizePolicy2.setHorizontalStretch(0)\n\t        sizePolicy2.setVerticalStretch(0)\n\t        sizePolicy2.setHeightForWidth(self.design_settings.sizePolicy().hasHeightForWidth())\n\t        self.design_settings.setSizePolicy(sizePolicy2)\n", "        self.design_settings.setFrameShape(QFrame.StyledPanel)\n\t        self.design_settings.setFrameShadow(QFrame.Raised)\n\t        self.design_settings.setLineWidth(12)\n\t        self.layout_settings = QGridLayout(self.design_settings)\n\t        self.layout_settings.setObjectName(u\"layout_settings\")\n\t        self.geometry_creation = QHBoxLayout()\n\t        self.geometry_creation.setObjectName(u\"geometry_creation\")\n\t        self.geometry_creation.setSizeConstraint(QLayout.SetDefaultConstraint)\n\t        self.geometry_creation_layout = QVBoxLayout()\n\t        self.geometry_creation_layout.setObjectName(u\"geometry_creation_layout\")\n", "        self.aedt_design_layout = QHBoxLayout()\n\t        self.aedt_design_layout.setObjectName(u\"aedt_design_layout\")\n\t        self.aedt_design_layout.setContentsMargins(0, 0, 0, -1)\n\t        self.project_aedt_layout = QVBoxLayout()\n\t        self.project_aedt_layout.setObjectName(u\"project_aedt_layout\")\n\t        self.project_aedt_layout.setContentsMargins(-1, 0, -1, -1)\n\t        self.project_adt_label = QLabel(self.design_settings)\n\t        self.project_adt_label.setObjectName(u\"project_adt_label\")\n\t        font = QFont()\n\t        font.setPointSize(12)\n", "        self.project_adt_label.setFont(font)\n\t        self.project_adt_label.setAlignment(Qt.AlignCenter)\n\t        self.project_aedt_layout.addWidget(self.project_adt_label)\n\t        self.project_aedt_combo = QComboBox(self.design_settings)\n\t        self.project_aedt_combo.addItem(\"\")\n\t        self.project_aedt_combo.setObjectName(u\"project_aedt_combo\")\n\t        self.project_aedt_layout.addWidget(self.project_aedt_combo)\n\t        self.aedt_design_layout.addLayout(self.project_aedt_layout)\n\t        self.design_aedt_layout = QVBoxLayout()\n\t        self.design_aedt_layout.setObjectName(u\"design_aedt_layout\")\n", "        self.design_aedt_label = QLabel(self.design_settings)\n\t        self.design_aedt_label.setObjectName(u\"design_aedt_label\")\n\t        self.design_aedt_label.setFont(font)\n\t        self.design_aedt_label.setAlignment(Qt.AlignCenter)\n\t        self.design_aedt_layout.addWidget(self.design_aedt_label)\n\t        self.design_aedt_combo = QComboBox(self.design_settings)\n\t        self.design_aedt_combo.addItem(\"\")\n\t        self.design_aedt_combo.setObjectName(u\"design_aedt_combo\")\n\t        self.design_aedt_layout.addWidget(self.design_aedt_combo)\n\t        self.aedt_design_layout.addLayout(self.design_aedt_layout)\n", "        self.geometry_creation_layout.addLayout(self.aedt_design_layout)\n\t        self.verticalSpacer = QSpacerItem(20, 40, QSizePolicy.Minimum, QSizePolicy.Fixed)\n\t        self.geometry_creation_layout.addItem(self.verticalSpacer)\n\t        self.dimension_multiplier_title = QLabel(self.design_settings)\n\t        self.dimension_multiplier_title.setObjectName(u\"dimension_multiplier_title\")\n\t        sizePolicy3 = QSizePolicy(QSizePolicy.Preferred, QSizePolicy.Fixed)\n\t        sizePolicy3.setHorizontalStretch(0)\n\t        sizePolicy3.setVerticalStretch(0)\n\t        sizePolicy3.setHeightForWidth(self.dimension_multiplier_title.sizePolicy().hasHeightForWidth())\n\t        self.dimension_multiplier_title.setSizePolicy(sizePolicy3)\n", "        font1 = QFont()\n\t        font1.setPointSize(14)\n\t        self.dimension_multiplier_title.setFont(font1)\n\t        self.dimension_multiplier_title.setAlignment(Qt.AlignCenter)\n\t        self.geometry_creation_layout.addWidget(self.dimension_multiplier_title)\n\t        self.multiplier_layout = QHBoxLayout()\n\t        self.multiplier_layout.setObjectName(u\"multiplier_layout\")\n\t        self.value_title = QLabel(self.design_settings)\n\t        self.value_title.setObjectName(u\"value_title\")\n\t        self.value_title.setFont(font)\n", "        self.multiplier_layout.addWidget(self.value_title)\n\t        self.multiplier = QLineEdit(self.design_settings)\n\t        self.multiplier.setObjectName(u\"multiplier\")\n\t        sizePolicy4 = QSizePolicy(QSizePolicy.Minimum, QSizePolicy.Fixed)\n\t        sizePolicy4.setHorizontalStretch(0)\n\t        sizePolicy4.setVerticalStretch(0)\n\t        sizePolicy4.setHeightForWidth(self.multiplier.sizePolicy().hasHeightForWidth())\n\t        self.multiplier.setSizePolicy(sizePolicy4)\n\t        self.multiplier_layout.addWidget(self.multiplier)\n\t        self.geometry_creation_layout.addLayout(self.multiplier_layout)\n", "        self.select_geometry_title = QLabel(self.design_settings)\n\t        self.select_geometry_title.setObjectName(u\"select_geometry_title\")\n\t        sizePolicy3.setHeightForWidth(self.select_geometry_title.sizePolicy().hasHeightForWidth())\n\t        self.select_geometry_title.setSizePolicy(sizePolicy3)\n\t        self.select_geometry_title.setFont(font1)\n\t        self.select_geometry_title.setAlignment(Qt.AlignHCenter|Qt.AlignTop)\n\t        self.geometry_creation_layout.addWidget(self.select_geometry_title)\n\t        self.geometry_select_layout = QHBoxLayout()\n\t        self.geometry_select_layout.setObjectName(u\"geometry_select_layout\")\n\t        self.geometry_select_layout.setContentsMargins(-1, -1, -1, 0)\n", "        self.geometry_title = QLabel(self.design_settings)\n\t        self.geometry_title.setObjectName(u\"geometry_title\")\n\t        self.geometry_title.setFont(font)\n\t        self.geometry_select_layout.addWidget(self.geometry_title)\n\t        self.geometry_combo = QComboBox(self.design_settings)\n\t        self.geometry_combo.addItem(\"\")\n\t        self.geometry_combo.addItem(\"\")\n\t        self.geometry_combo.setObjectName(u\"geometry_combo\")\n\t        self.geometry_combo.setFont(font)\n\t        self.geometry_select_layout.addWidget(self.geometry_combo)\n", "        self.geometry_creation_layout.addLayout(self.geometry_select_layout)\n\t        self.verticalSpacer_6 = QSpacerItem(20, 40, QSizePolicy.Minimum, QSizePolicy.Expanding)\n\t        self.geometry_creation_layout.addItem(self.verticalSpacer_6)\n\t        self.create_geometry_buttom = QPushButton(self.design_settings)\n\t        self.create_geometry_buttom.setObjectName(u\"create_geometry_buttom\")\n\t        self.create_geometry_buttom.setMinimumSize(QSize(0, 50))\n\t        self.create_geometry_buttom.setFont(font)\n\t        self.geometry_creation_layout.addWidget(self.create_geometry_buttom)\n\t        self.geometry_creation.addLayout(self.geometry_creation_layout)\n\t        self.layout_settings.addLayout(self.geometry_creation, 7, 1, 1, 1)\n", "        self.horizontalSpacer_4 = QSpacerItem(40, 20, QSizePolicy.Fixed, QSizePolicy.Minimum)\n\t        self.layout_settings.addItem(self.horizontalSpacer_4, 7, 2, 1, 1)\n\t        self.new_layout = QVBoxLayout()\n\t        self.new_layout.setObjectName(u\"new_layout\")\n\t        self.frame = QFrame(self.design_settings)\n\t        self.frame.setObjectName(u\"frame\")\n\t        self.frame.setFrameShape(QFrame.StyledPanel)\n\t        self.frame.setFrameShadow(QFrame.Raised)\n\t        self.new_layout.addWidget(self.frame)\n\t        self.layout_settings.addLayout(self.new_layout, 7, 3, 1, 1)\n", "        self.design_layout.addWidget(self.design_settings)\n\t        self.horizontalSpacer_5 = QSpacerItem(40, 20, QSizePolicy.Preferred, QSizePolicy.Minimum)\n\t        self.design_layout.addItem(self.horizontalSpacer_5)\n\t        self.verticalLayout_2.addLayout(self.design_layout)\n\t        self.toolkit_tab.addTab(self.design, \"\")\n\t        self.gridLayout.addWidget(self.toolkit_tab, 0, 0, 1, 5)\n\t        self.verticalLayout.addWidget(self.main_menu)\n\t        self.log_text = QPlainTextEdit(self.centralwidget)\n\t        self.log_text.setObjectName(u\"log_text\")\n\t        sizePolicy5 = QSizePolicy(QSizePolicy.Expanding, QSizePolicy.Fixed)\n", "        sizePolicy5.setHorizontalStretch(0)\n\t        sizePolicy5.setVerticalStretch(0)\n\t        sizePolicy5.setHeightForWidth(self.log_text.sizePolicy().hasHeightForWidth())\n\t        self.log_text.setSizePolicy(sizePolicy5)\n\t        self.verticalLayout.addWidget(self.log_text)\n\t        self.progress_bar = QProgressBar(self.centralwidget)\n\t        self.progress_bar.setObjectName(u\"progress_bar\")\n\t        self.progress_bar.setFocusPolicy(Qt.NoFocus)\n\t        self.progress_bar.setMaximum(100)\n\t        self.progress_bar.setValue(0)\n", "        self.progress_bar.setTextVisible(True)\n\t        self.progress_bar.setOrientation(Qt.Horizontal)\n\t        self.progress_bar.setTextDirection(QProgressBar.TopToBottom)\n\t        self.verticalLayout.addWidget(self.progress_bar)\n\t        MainWindow.setCentralWidget(self.centralwidget)\n\t        self.top_menu_bar = QMenuBar(MainWindow)\n\t        self.top_menu_bar.setObjectName(u\"top_menu_bar\")\n\t        self.top_menu_bar.setGeometry(QRect(0, 0, 1107, 28))\n\t        self.top_menu_bar.setFont(font)\n\t        self.top_menu = QMenu(self.top_menu_bar)\n", "        self.top_menu.setObjectName(u\"top_menu\")\n\t        self.top_menu.setFont(font)\n\t        MainWindow.setMenuBar(self.top_menu_bar)\n\t        self.status_bar = QStatusBar(MainWindow)\n\t        self.status_bar.setObjectName(u\"status_bar\")\n\t        MainWindow.setStatusBar(self.status_bar)\n\t        self.top_menu_bar.addAction(self.top_menu.menuAction())\n\t        self.top_menu.addAction(self.action_save_project)\n\t        self.retranslateUi(MainWindow)\n\t        self.toolkit_tab.setCurrentIndex(0)\n", "        QMetaObject.connectSlotsByName(MainWindow)\n\t    # setupUi\n\t    def retranslateUi(self, MainWindow):\n\t        MainWindow.setWindowTitle(QCoreApplication.translate(\"MainWindow\", u\"MainWindow\", None))\n\t        self.action_save_project.setText(QCoreApplication.translate(\"MainWindow\", u\"Save project\", None))\n\t        self.release_button.setText(QCoreApplication.translate(\"MainWindow\", u\" Close Toolkit \", None))\n\t        self.release_and_exit_button.setText(QCoreApplication.translate(\"MainWindow\", u\" Close Desktop and Toolkit \", None))\n\t        self.cores_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Number of Cores\", None))\n\t        self.numcores.setText(QCoreApplication.translate(\"MainWindow\", u\"4\", None))\n\t        self.graphical_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Non Graphical\", None))\n", "        self.non_graphical_combo.setItemText(0, QCoreApplication.translate(\"MainWindow\", u\"False\", None))\n\t        self.non_graphical_combo.setItemText(1, QCoreApplication.translate(\"MainWindow\", u\"True\", None))\n\t        self.version_label.setText(QCoreApplication.translate(\"MainWindow\", u\"AEDT Version\", None))\n\t        self.aedt_sessions_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Available AEDT Sessions\", None))\n\t        self.process_id_combo.setItemText(0, QCoreApplication.translate(\"MainWindow\", u\"Create New Session\", None))\n\t        self.project_path_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Project Name\", None))\n\t        self.browse_project.setText(QCoreApplication.translate(\"MainWindow\", u\"Select aedt project\", None))\n\t        self.connect_aedtapp.setText(QCoreApplication.translate(\"MainWindow\", u\"  Launch AEDT  \", None))\n\t        self.toolkit_tab.setTabText(self.toolkit_tab.indexOf(self.settings), QCoreApplication.translate(\"MainWindow\", u\" Settings \", None))\n\t        self.project_adt_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Project  selected\", None))\n", "        self.project_aedt_combo.setItemText(0, QCoreApplication.translate(\"MainWindow\", u\"No project\", None))\n\t        self.design_aedt_label.setText(QCoreApplication.translate(\"MainWindow\", u\"Design selected\", None))\n\t        self.design_aedt_combo.setItemText(0, QCoreApplication.translate(\"MainWindow\", u\"No design\", None))\n\t        self.dimension_multiplier_title.setText(QCoreApplication.translate(\"MainWindow\", u\"Dimension multiplier\", None))\n\t        self.value_title.setText(QCoreApplication.translate(\"MainWindow\", u\"Value\", None))\n\t        self.multiplier.setText(QCoreApplication.translate(\"MainWindow\", u\"1\", None))\n\t        self.select_geometry_title.setText(QCoreApplication.translate(\"MainWindow\", u\"Select geometry\", None))\n\t        self.geometry_title.setText(QCoreApplication.translate(\"MainWindow\", u\"Geometry\", None))\n\t        self.geometry_combo.setItemText(0, QCoreApplication.translate(\"MainWindow\", u\"Box\", None))\n\t        self.geometry_combo.setItemText(1, QCoreApplication.translate(\"MainWindow\", u\"Sphere\", None))\n", "        self.create_geometry_buttom.setText(QCoreApplication.translate(\"MainWindow\", u\"Create geometry\", None))\n\t        self.toolkit_tab.setTabText(self.toolkit_tab.indexOf(self.design), QCoreApplication.translate(\"MainWindow\", u\" Design \", None))\n\t        self.top_menu.setTitle(QCoreApplication.translate(\"MainWindow\", u\"File\", None))\n\t    # retranslateUi\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/common/__init__.py", "chunked_list": []}
{"filename": "src/ansys/aedt/toolkits/template/ui/common/logger_handler.py", "chunked_list": ["import json\n\timport logging\n\timport os\n\timport tempfile\n\twith open(os.path.join(os.path.dirname(__file__), \"general_properties.json\")) as fh:\n\t    general_settings = json.load(fh)\n\tdebug = general_settings[\"debug\"]\n\tlog_file = str(general_settings[\"log_file\"])\n\t# Create a logger\n\tlogger = logging.getLogger(__name__)\n", "if debug:\n\t    # Set log level (e.g., DEBUG, INFO, WARNING, ERROR)\n\t    logger.setLevel(logging.DEBUG)\n\t    # Create a file handler for the logger\n\t    if log_file:\n\t        temp_dir = os.path.join(tempfile.gettempdir(), log_file)\n\t        if not os.path.exists(temp_dir):\n\t            file = open(temp_dir, \"w\")\n\t            file.close()\n\t        log_file = temp_dir\n", "        file_handler = logging.FileHandler(log_file)\n\t        file_handler = logging.FileHandler(log_file)\n\t        # Set the log format\n\t        formatter = logging.Formatter(\"%(asctime)s - %(levelname)s - %(message)s\")\n\t        file_handler.setFormatter(formatter)\n\t        # Add the file handler to the logger\n\t        logger.addHandler(file_handler)\n\t    # Create a stream handler for logging to the console\n\t    console_handler = logging.StreamHandler()\n\t    # Add the console handler to the logger\n", "    logger.addHandler(console_handler)\n"]}
{"filename": "src/ansys/aedt/toolkits/template/ui/common/thread_manager.py", "chunked_list": ["import logging\n\timport os\n\tfrom PySide6 import QtCore\n\timport requests\n\tlogger = logging.getLogger(\"Global\")\n\tclass FrontendThread(QtCore.QThread):\n\t    status_changed = QtCore.Signal(bool)\n\t    running = True\n\t    def __int__(self):\n\t        pass\n", "    def run(self):\n\t        while self.running:\n\t            response = requests.get(self.url + \"/get_status\")\n\t            if response.ok and response.json() != \"Backend running\":\n\t                self.running = False\n\t                properties = self.get_properties()\n\t                if properties[\"active_project\"] and \"project_aedt_combo\" in self.__dir__():\n\t                    self.project_aedt_combo.clear()\n\t                    if not properties[\"project_list\"]:\n\t                        self.project_aedt_combo.addItem(\"No project\")\n", "                    else:\n\t                        cont = 0\n\t                        for project in properties[\"project_list\"]:\n\t                            active_project_name = os.path.splitext(os.path.basename(project))[0]\n\t                            self.project_aedt_combo.addItem(active_project_name)\n\t                            if active_project_name == os.path.splitext(os.path.basename(project))[0]:\n\t                                self.project_aedt_combo.setCurrentIndex(cont)\n\t                            cont += 1\n\t                if properties[\"active_design\"] and \"design_aedt_combo\" in self.__dir__():\n\t                    self.design_aedt_combo.clear()\n", "                    if not properties[\"design_list\"]:\n\t                        self.design_aedt_combo.addItem(\"No design\")\n\t                    else:\n\t                        cont = 0\n\t                        design_name = properties[\"active_design\"]\n\t                        active_design_list = properties[\"design_list\"][active_project_name]\n\t                        for design in active_design_list:\n\t                            self.design_aedt_combo.addItem(list(design.values())[0])\n\t                            if list(design_name.values())[0] == design:\n\t                                self.design_aedt_combo.setCurrentIndex(cont)\n", "                            cont += 1\n\t                # Emit the status_changed signal if the status changes\n\t                self.status_changed.emit(self.running)\n\t            # Sleep for a certain amount of time before checking again\n\t            self.msleep(200)\n"]}
