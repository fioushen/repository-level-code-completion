{"filename": "shell_craft/__main__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from shell_craft.cli import main\n\tif __name__ == \"__main__\":\n\t    main()\n"]}
{"filename": "shell_craft/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n"]}
{"filename": "shell_craft/configuration.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "import json\n\tfrom typing import Any, Protocol\n\timport pathlib\n\tclass Configuration(Protocol):\n\t    def get(self, key: Any, default=None) -> Any:\n\t        ...\n\tclass JSONConfiguration(dict):\n\t    def __init__(self, text: str) -> None:\n\t        \"\"\"\n\t        Initialize the JSON configuration with the given text.\n", "        Args:\n\t            text (str): The text to parse as JSON.\n\t        \"\"\"        \n\t        super().__init__(json.loads(text))\n\t    @classmethod\n\t    def from_file(cls, path: str) -> \"JSONConfiguration\":\n\t        \"\"\"\n\t        Initialize the JSON configuration from the given file.\n\t        Args:\n\t            path (str): The path to the JSON file.\n", "        Returns:\n\t            JSONConfiguration: The JSON configuration.\n\t        \"\"\"        \n\t        with open(path, \"r\") as file:\n\t            return cls(file.read())\n\tclass AggregateConfiguration(dict):\n\t    def __init__(self, configurations: list) -> None:\n\t        \"\"\"\n\t        Aggregate the given configurations into a single configuration.\n\t        Args:\n", "            configurations (list): The configurations to aggregate.\n\t        \"\"\"        \n\t        super().__init__({\n\t            key: config.get(key)\n\t            for config in configurations[::-1]\n\t            for key in config.keys()\n\t        })\n\t    @classmethod\n\t    def from_files(cls, paths: list[str]) -> \"AggregateConfiguration\":\n\t        \"\"\"\n", "        Initialize the aggregate configuration from the given files.\n\t        If a file does not exist, it will be ignored.\n\t        Args:\n\t            paths (list[str]): The paths to the JSON files.\n\t        Returns:\n\t            AggregateConfiguration: The aggregate configuration.\n\t        \"\"\"\n\t        return cls([\n\t            JSONConfiguration.from_file(path)\n\t            for path in paths\n", "            if path and pathlib.Path(path).exists()\n\t        ])\n"]}
{"filename": "shell_craft/cli/parser.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from argparse import ArgumentParser, Namespace\n\tfrom dataclasses import asdict\n\tfrom sys import argv, stdin\n\tfrom typing import Callable\n\tfrom shell_craft.configuration import Configuration\n\tfrom shell_craft.factories import PromptFactory\n\tfrom .commands import Command, CommandGroup, CommandRestriction\n\tclass ShellCraftParser:\n\t    def __init__(self, parser: ArgumentParser, config: Configuration) -> None:\n\t        \"\"\"\n", "        Initialize the application parser with the given argparse parser. This\n\t        is known as a proxy pattern or facade pattern.\n\t        Args:\n\t            parser (ArgumentParser): The argparse parser to use for the application.\n\t        \"\"\"        \n\t        self._parser = parser\n\t        self._config = config\n\t        self._commands: list[Command | CommandGroup] = []\n\t    @property\n\t    def flags(self) -> list[str]:\n", "        \"\"\"\n\t        Get the flags for the parser.\n\t        Returns:\n\t            list[str]: The flags for the parser.\n\t        \"\"\"\n\t        return [\n\t            flag\n\t            for command in self._commands\n\t            for flag in command.flags\n\t        ]\n", "    def add_command(self, command: Command, override: Callable = None) -> \"ShellCraftParser\":\n\t        \"\"\"\n\t        Add a command to the parser.\n\t        Args:\n\t            command (Command): The command to add to the parser.\n\t            override (Callable, optional): A function to call to override\n\t                the add_argument function. Defaults to None.\n\t        Returns:\n\t            ShellCraftParser: The parser with the command added.\n\t        \"\"\"\n", "        adder = override or self._parser.add_argument\n\t        flags = ' '.join(command.flags)\n\t        kwargs = {\n\t            key: value\n\t            for key, value in asdict(command).items()\n\t            if value is not None\n\t            and key not in ['flags', 'restrictions', 'config']\n\t        }\n\t        kwargs['default'] = self._config.get(command.config) or command.default\n\t        adder(flags, **kwargs)\n", "        self._commands.append(command)\n\t        return self\n\t    def add_group(self, group: CommandGroup) -> \"ShellCraftParser\":\n\t        \"\"\"\n\t        Add a command group to the parser.\n\t        Args:\n\t            group (CommandGroup): The command group to add to the parser.\n\t        Returns:\n\t            ShellCraftParser: The parser with the command group added.\n\t        \"\"\"\n", "        adder = self._parser.add_argument\n\t        if group.exclusive:\n\t            adder = self._parser.add_mutually_exclusive_group().add_argument\n\t        for command in group.commands:\n\t            self.add_command(command, adder)\n\t        return self\n\t    def can_add(self, command: Command | CommandGroup) -> bool:\n\t        \"\"\"\n\t        Determine if the given command can be added to the parser.\n\t        Args:\n", "            command (Command): The command to check.\n\t        Returns:\n\t            bool: True if the command can be added, otherwise False.\n\t        \"\"\"\n\t        if not command.restrictions:\n\t            return True\n\t        if '--prompt' not in self.flags:\n\t            return False\n\t        known_args, l = self._parser.parse_known_args()\n\t        if not known_args.prompt:\n", "            return False\n\t        prompt = PromptFactory.get_prompt(known_args.prompt)\n\t        for restriction in command.restrictions:\n\t            if restriction == CommandRestriction.PROMPT_TYPE:\n\t                if type(prompt).__name__ in command.restrictions[restriction]:\n\t                    continue\n\t            if restriction == CommandRestriction.PROMPT_NAME:\n\t                prompt_name = known_args.prompt.upper() + \"_PROMPT\"\n\t                if prompt_name in command.restrictions[restriction]:\n\t                    continue\n", "            return False\n\t        return True\n\tdef initialize_parser(parser: ArgumentParser, commands: list[Command | CommandGroup], configuration: Configuration) -> ArgumentParser:\n\t    \"\"\"\n\t    Initialize the parser with the given commands and command groups. This will add\n\t    the commands and command groups to the parser and return the parser.\n\t    Args:\n\t        parser (ArgumentParser): The parser to initialize.\n\t        commands (list[Command  |  CommandGroup]): The commands and command groups to add to the parser.\n\t        configuration (Configuration): The configuration to use for the parser.\n", "    Returns:\n\t        ArgumentParser: The parser with the commands and command groups added.\n\t    \"\"\"\n\t    _parser = ShellCraftParser(parser, configuration)\n\t    for command in commands:\n\t        if not _parser.can_add(command):\n\t            continue\n\t        if isinstance(command, Command):\n\t            _parser.add_command(command)\n\t        elif isinstance(command, CommandGroup):\n", "            _parser.add_group(command)\n\t    return parser\n\tdef get_arguments(parser: ArgumentParser) -> Namespace:\n\t    \"\"\"\n\t    Get the arguments from the parser. If there is no input from stdin, then\n\t    the arguments will be parsed from the command line. If there is input from\n\t    stdin, then the arguments will be parsed from the command line and stdin after\n\t    calling a flush on stdin.\n\t    Args:\n\t        parser (ArgumentParser): The parser to get arguments from.\n", "    Returns:\n\t        Namespace: The arguments from the parser.\n\t    \"\"\"\n\t    arguments: list[str] = argv[1:]\n\t    if not stdin.isatty():\n\t        stdin.flush()\n\t        arguments += stdin.readlines()\n\t    return parser.parse_args(arguments)\n\t__all__ = [\n\t    \"get_arguments\",\n", "    \"initialize_parser\"\n\t    \"ShellCraftParser\"\n\t]\n"]}
{"filename": "shell_craft/cli/main.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "import os\n\tfrom argparse import ArgumentParser\n\tfrom shell_craft.cli.github import GitHubArguments\n\tfrom shell_craft.configuration import AggregateConfiguration\n\tfrom shell_craft.factories import PromptFactory\n\tfrom shell_craft.services import OpenAIService, OpenAISettings\n\tfrom .commands import _COMMANDS\n\tfrom .parser import get_arguments, initialize_parser\n\tdef _get_configuration() -> AggregateConfiguration:\n\t    \"\"\"\n", "    Returns the configuration for the shell-craft CLI.\n\t    Returns:\n\t        AggregateConfiguration: The configuration for the shell-craft CLI.\n\t    \"\"\"\n\t    paths = [\n\t        os.path.join(os.getcwd(), 'config.json'),\n\t        os.environ.get('SHELLCRAFT_CONFIG'),\n\t        '~/.config/shell-craft/config.json'\n\t    ]\n\t    if os.environ.get('XDG_CONFIG_HOME'):\n", "        paths.append(os.path.join(os.environ.get('XDG_CONFIG_HOME'), 'shell-craft', 'config.json'))\n\t    return AggregateConfiguration.from_files(paths) | {\n\t        key.lower(): value\n\t        for key, value in os.environ.items() \n\t        if key.isupper()\n\t    }\n\tdef get_github_url_or_error(prompt: str, repository: str) -> str:\n\t    \"\"\"\n\t    Returns the GitHub URL for the prompt.\n\t    Args:\n", "        prompt (str): The prompt to generate the GitHub URL for.\n\t        repository (str): The GitHub URL to generate the URL for.\n\t    Returns:\n\t        str: The GitHub URL for the prompt.\n\t    \"\"\"\n\t    try:\n\t        return GitHubArguments.from_prompt(\n\t            prompt\n\t        ).as_url(\n\t            repository\n", "        )\n\t    except Exception:\n\t        return \"Error: Unable to generate GitHub URL.\"\n\tdef main():\n\t    \"\"\"\n\t    Main function that processes the command-line arguments and queries the\n\t    OpenAI API using shell_craft.\n\t    \"\"\"\n\t    config = _get_configuration()\n\t    args = get_arguments(\n", "        initialize_parser(\n\t            ArgumentParser(\n\t                prog=\"shell-craft\",\n\t                description=\"Generating shell commands and code using natural language models (OpenAI ChatGPT).\",\n\t                add_help=False\n\t            ),\n\t            commands=_COMMANDS,\n\t            configuration=config\n\t        ),\n\t    )\n", "    prompt = PromptFactory.get_prompt(args.prompt)\n\t    if getattr(args, \"refactor\", False):\n\t        prompt = prompt.refactoring\n\t    elif getattr(args, \"document\", False):\n\t        prompt = prompt.documentation\n\t    elif getattr(args, \"test\", False):\n\t        prompt = prompt.testing\n\t    results = OpenAIService(\n\t        OpenAISettings(\n\t            api_key=args.api_key,\n", "            model=args.model,\n\t            count=args.count,\n\t            temperature=args.temperature,\n\t            messages=prompt.messages,\n\t        )\n\t    ).query(\n\t        message=' '.join(args.request),\n\t    )\n\t    github_url = getattr(args, \"github\", None)\n\t    for _, r in enumerate(results):\n", "        if github_url:\n\t            print(get_github_url_or_error(r, github_url))\n\t        else:\n\t            print(r)\n"]}
{"filename": "shell_craft/cli/types.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from argparse import ArgumentTypeError\n\tfrom typing import Callable\n\tdef limited_float(min: float, max: float) -> Callable:\n\t    \"\"\"\n\t    Create a function that will validate a float is between the given min and\n\t    max values for use with argparse.\n\t    Args:\n\t        min (float): The minimum value for the float.\n\t        max (float): The maximum value for the float.\n\t    Returns:\n", "        Callable: A function that will validate a float is between the given min\n\t    \"\"\"    \n\t    def _ret_func(arg: str) -> float:\n\t        if arg is None or not str(arg).isdecimal:\n\t            raise ArgumentTypeError(f\"{arg} is not a decimal\")\n\t        f = float(arg)\n\t        if f in [float(\"inf\"), float(\"-inf\")]:\n\t            raise ArgumentTypeError(f\"{arg} is not a decimal\")\n\t        if f != f:\n\t            raise ArgumentTypeError(f\"{arg} is not a decimal\")\n", "        if f < min or f > max:\n\t            raise ArgumentTypeError(f\"{arg} is not between {min} and {max}\")\n\t        return f\n\t    return _ret_func\n"]}
{"filename": "shell_craft/cli/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .main import main\n\t__all__ = [\"main\"]\n"]}
{"filename": "shell_craft/cli/prompt.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from os import getppid\n\tfrom psutil import NoSuchProcess, Process\n\tdef get_calling_shell() -> str:\n\t    \"\"\"\n\t    Get the name of the shell that called this script. This is used to determine\n\t    the default prompt type. If the calling shell is PowerShell or pwsh, it is converted\n\t    to \"powershell\" to match the prompt type. If the calling shell is not recognized,\n\t    the default prompt type is \"bash\".\n\t    If the calling shell cannot be determined, the default prompt type is \"bash\".\n\t    Returns:\n", "        str: The name of the shell.\n\t    \"\"\"\n\t    try:\n\t        return (\n\t            \"powershell\" \n\t            if Process(getppid()).name() in \n\t            [\"pwsh\", \"powershell\"] else \"bash\"\n\t        )\n\t    except NoSuchProcess:\n\t        return \"bash\"\n"]}
{"filename": "shell_craft/cli/github.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from dataclasses import dataclass\n\tfrom urllib.parse import urlencode, urljoin\n\t@dataclass\n\tclass GitHubArguments:\n\t    title: str\n\t    labels: list[str]\n\t    body: str\n\t    def as_url(self, repository: str) -> str:\n\t        \"\"\"\n\t        Generates a URL to open an issue or feature request for the\n", "        GitHub repository.\n\t        Args:\n\t            repository (str): The URL to the GitHub repository.\n\t        Returns:\n\t            str: The URL to open an issue or feature request for the\n\t                GitHub repository.\n\t        \"\"\"        \n\t        return (\n\t            urljoin(\n\t                repository.rstrip('/') + '/',\n", "                'issues/new'\n\t            )\n\t            + '?'\n\t            + urlencode({\n\t                'title': self.title,\n\t                'labels': ','.join(self.labels),\n\t                'body': self.body\n\t            })\n\t        )\n\t    @staticmethod\n", "    def from_prompt(prompt: str) -> 'GitHubArguments':\n\t        \"\"\"\n\t        Parses data from\n\t        ```\n\t        ---\n\t        name: <Name Of Bug>\n\t        about: <Short Description>\n\t        labels: < Documentation, Enhancement, Question, Bug, etc. >\n\t        ---\n\t        <body>\n", "        ```\n\t        \"\"\"\n\t        tokens = prompt.split('---')\n\t        if len(tokens) != 3:\n\t            raise ValueError('Invalid prompt.')\n\t        _, metadata, body = tokens\n\t        tokens = metadata.split('\\n')\n\t        metadata = {\n\t            token.split(':')[0].strip(): ':'.join(token.split(':')[1:]).strip()\n\t            for token in tokens\n", "        }\n\t        return GitHubArguments(\n\t            title=metadata['name'],\n\t            labels=metadata['labels'].split(','),\n\t            body=metadata['about'] + '\\n\\n' + body.strip()\n\t        )\n"]}
{"filename": "shell_craft/cli/commands.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from dataclasses import dataclass\n\tfrom enum import Enum\n\tfrom typing import Optional, Type\n\timport shell_craft.prompts as prompts\n\tfrom .prompt import get_calling_shell\n\tfrom .types import limited_float\n\tclass CommandRestriction(Enum):\n\t    \"\"\"\n\t    An enumeration of the different types of restrictions that can be placed on\n\t    a command. Restrictions are whitelists of values that can be used for a\n", "    given command.\n\t    \"\"\"\n\t    PROMPT_TYPE: str = 'prompt_type'\n\t    PROMPT_NAME: str = 'prompt_name'\n\t@dataclass\n\tclass Command:\n\t    flags: list\n\t    dest: Optional[str] = None\n\t    type: Optional[Type] = None\n\t    default: Optional[str] = None\n", "    config: Optional[str] = None\n\t    action: Optional[str] = None\n\t    help: Optional[str] = None\n\t    nargs: Optional[str] = None\n\t    choices: Optional[list] = None\n\t    restrictions: Optional[dict[CommandRestriction, list]] = None\n\t@dataclass\n\tclass CommandGroup:\n\t    name: str\n\t    commands: list[Command]\n", "    restrictions: Optional[dict[CommandRestriction, list]] = None\n\t    exclusive: Optional[bool] = False\n\t_COMMANDS = [\n\t    Command(\n\t        flags=['request'],\n\t        type=str,\n\t        action='store',\n\t        help='The request to make.',\n\t        nargs='*',\n\t    ),\n", "    Command(\n\t        flags=['--api-key'],\n\t        dest='api_key',\n\t        type=str,\n\t        config='openai_api_key',\n\t        action='store',\n\t        help='The OpenAI API key to use.',\n\t    ),\n\t    Command(\n\t        flags=['--model'],\n", "        type=str,\n\t        config='openai_model',\n\t        default=\"gpt-3.5-turbo\",\n\t        action='store',\n\t        help='The OpenAI model to use.',\n\t        choices=[\n\t            \"gpt-4\",\n\t            \"gpt-4-0613\",\n\t            \"gpt-4-32k\",\n\t            \"gpt-4-32k-0613\",\n", "            \"gpt-3.5-turbo\",\n\t            \"gpt-3.5-turbo-0613\",\n\t            'gpt-3.5-turbo-16k',\n\t            'gpt-3.5-turbo-16k-0613',\n\t        ]\n\t    ),\n\t    Command(\n\t        flags=['-t', '--temperature'],\n\t        dest='temperature',\n\t        type=limited_float(0.0, 2.0),\n", "        config='openai_temperature',\n\t        default=1.0,\n\t        action='store',\n\t        help='The temperature to use when generating text. Must be between 0 and 2.',\n\t    ),\n\t    Command(\n\t        flags=['-c', '--count'],\n\t        dest='count',\n\t        type=int,\n\t        config='openai_count',\n", "        default=1,\n\t        action='store',\n\t        help='The number of responses to generate.',\n\t    ),\n\t    Command(\n\t        flags=['--prompt'],\n\t        dest='prompt',\n\t        config='shell_craft_prompt',\n\t        type=str,\n\t        choices=[\n", "            prompt.removesuffix('_PROMPT').lower()\n\t            for prompt in dir(prompts)\n\t            if prompt.endswith(\"PROMPT\")\n\t        ],\n\t        default=get_calling_shell(),\n\t        action='store',\n\t        help='The type of prompt to use.',\n\t        nargs='?',\n\t    ),\n\t    Command(\n", "        flags=['--github'],\n\t        type=str,\n\t        config='github_repository',\n\t        action='store',\n\t        help='The URL to the GitHub repository to open an issue or feature request for.',\n\t        restrictions={\n\t            CommandRestriction.PROMPT_NAME: ['BUG_REPORT_PROMPT', 'FEATURE_REQUEST_PROMPT']\n\t        }\n\t    ),\n\t    CommandGroup(\n", "        name='code',\n\t        commands=[\n\t            Command(\n\t                flags=['--refactor'],\n\t                action='store_true',\n\t                help='Refactor the code.',\n\t            ),\n\t            Command(\n\t                flags=['--test'],\n\t                action='store_true',\n", "                help='Test the code.',\n\t            ),\n\t            Command(\n\t                flags=['--document'],\n\t                action='store_true',\n\t                help='Document the code.',\n\t            ),\n\t        ],\n\t        restrictions={\n\t            CommandRestriction.PROMPT_TYPE: ['LanguagePrompt']\n", "        },\n\t        exclusive=True\n\t    ),\n\t    Command(\n\t        flags=['--help'],\n\t        action='help',\n\t        help='Show this help message and exit.',\n\t    )\n\t]\n\t__all__ = [\n", "    'Command',\n\t    'CommandGroup',\n\t    'CommandRestriction',\n\t]\n"]}
{"filename": "shell_craft/prompts/templates.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .prompt import Prompt\n\tFEATURE_REQUEST_PROMPT = Prompt(\n\t    content=\"\"\"\n\tFill out this form:\n\t```\n\t---\n\tname: <Name Of Feature>\n\tabout: <Short Description>\n\tlabels: < Documentation, Enhancement, Question, Bug, etc. >\n\t---\n", "**Is your feature request related to a problem? Please describe.**\n\tA clear and concise description of what the problem is. Ex. I'm always frustrated when [...]\n\t**Describe the solution you'd like**\n\tA clear and concise description of what you want to happen.\n\t**Describe alternatives you've considered**\n\tA clear and concise description of any alternative solutions or features you've considered.\n\t```\n\t\"\"\")\n\tBUG_REPORT_PROMPT = Prompt(\n\t    content=\"\"\"\n", "Fill out this form with as much detail as possible with the provided information:\n\t```\n\t---\n\tname: <Name Of Bug>\n\tabout: <Short Description>\n\tlabels: < Documentation, Enhancement, Question, Bug, etc. >\n\t---\n\t**Describe the bug**\n\tA clear and concise description of what the bug is.\n\t**To Reproduce**\n", "Steps to reproduce the behavior:\n\t1. Go to '...'\n\t2. Click on '....'\n\t3. Scroll down to '....'\n\t4. See error\n\t**Expected behavior**\n\tA clear and concise description of what you expected to happen.\n\t```\"\"\")\n"]}
{"filename": "shell_craft/prompts/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .languages import (BASH_PROMPT, C_PROMPT, C_SHARP_PROMPT, GO_PROMPT,\n\t                        JAVA_PROMPT, JAVASCRIPT_PROMPT, POWERSHELL_PROMPT,\n\t                        PYTHON_PROMPT)\n\tfrom .prompt import Prompt\n\tfrom .templates import BUG_REPORT_PROMPT, FEATURE_REQUEST_PROMPT\n\t__all__ = [\n\t    \"BASH_PROMPT\",\n\t    \"BUG_REPORT_PROMPT\",\n\t    \"C_PROMPT\",\n\t    \"C_SHARP_PROMPT\",\n", "    \"GO_PROMPT\",\n\t    \"JAVA_PROMPT\",\n\t    \"JAVASCRIPT_PROMPT\",\n\t    \"FEATURE_REQUEST_PROMPT\",\n\t    \"POWERSHELL_PROMPT\",\n\t    \"PYTHON_PROMPT\",\n\t    \"Prompt\"\n\t]\n"]}
{"filename": "shell_craft/prompts/prompt.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from dataclasses import dataclass, field\n\tMODEL_MESSAGE = list[dict[str, str]]\n\t@dataclass(frozen=True)\n\tclass Prompt:\n\t    \"\"\"\n\t    A prompt is a guide for OpenAI models to generate text. It is a\n\t    string that is used to seed the model's text generation. It is\n\t    typically a question or a statement that the model is asked to\n\t    respond to.\n\t    Examples refer to \"user\" messages that are sent to the model, and\n", "    \"assistant\" messages that are sent from the model. We use this\n\t    as additional context for the model to generate text.\n\t    \"\"\"    \n\t    content: str\n\t    examples: list[MODEL_MESSAGE] = field(default_factory=list)\n\t    @property\n\t    def messages(self) -> list[MODEL_MESSAGE]:\n\t        \"\"\"\n\t        Get the messages to send to the model. This includes the prompt\n\t        and any examples. The prompt is sent as a \"system\" message, and\n", "        the examples are sent as \"user\" and \"assistant\" messages.\n\t        The dictionary is formatted as follows:\n\t        {\n\t            \"role\": <\"system\" | \"user\" | \"assistant\">,\n\t            \"content\": <str>\n\t        }\n\t        Returns:\n\t            list[MODEL_MESSAGE]: The messages to send to the model.\n\t        \"\"\"        \n\t        return [\n", "            {\n\t                \"role\": \"user\",\n\t                \"content\": self.content\n\t            }\n\t        ] + self.examples\n"]}
{"filename": "shell_craft/prompts/languages.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from dataclasses import dataclass\n\tfrom typing import Optional\n\tfrom .prompt import Prompt\n\t@dataclass(frozen=True)\n\tclass LanguagePrompt(Prompt):\n\t    refactoring: Optional[Prompt] = None\n\t    documentation: Optional[Prompt] = None\n\t    testing: Optional[Prompt] = None\n\tdef _generate_prompt(language: str) -> LanguagePrompt:\n\t    return LanguagePrompt(\n", "        content=\" \".join(f\"\"\"\n\t            You are {language}.\n\t            You reply with valid {language}, nothing else.\n\t            No explanations.\n\t            You receive descriptions and return {language}.\n\t        \"\"\".split()),\n\t        refactoring=Prompt(\n\t            content=\" \".join(f\"\"\"\n\t                You receive {language} and return {language}.\n\t                You shorten the code.\n", "                You remove bugs.\n\t                You make the code more efficient.\n\t            \"\"\".split())\n\t        ),\n\t        documentation=Prompt(\n\t            content=\" \".join(f\"\"\"\n\t                You receive {language} and return {language} with document strings.\n\t                You add documentation to each function.\n\t                You add documentation to each class.\n\t                You explain parameters and return values.\n", "                You run the code with the documentation in place.\n\t            \"\"\".split())\n\t        ),\n\t        testing=Prompt(\n\t            content=\" \".join(f\"\"\"\n\t                You receive {language} and return {language} with tests.\n\t                You write tests for each function.\n\t                Tests are written in AAA (Arrange, Act, Assert) format.\n\t                You do not repeat yourself.\n\t                You do not return the original code.\n", "            \"\"\".split())\n\t        )\n\t    )\n\tdef get_prompts() -> list[LanguagePrompt]:\n\t    \"\"\"\n\t    Returns all of the language prompts. This is used to generate the\n\t    language prompt choices. This is also used to define the exports.\n\t    Returns:\n\t        list[LanguagePrompt]: All of the language prompts.\n\t    \"\"\"    \n", "    return [\n\t        prompt for prompt\n\t        in globals().values()\n\t        if isinstance(prompt, LanguagePrompt)\n\t    ]\n\tBASH_PROMPT = _generate_prompt(\"Bash\")\n\tC_PROMPT = _generate_prompt(\"C\")\n\tC_SHARP_PROMPT = _generate_prompt(\"C#\")\n\tGO_PROMPT = _generate_prompt(\"GoLang\")\n\tPOWERSHELL_PROMPT = _generate_prompt(\"PowerShell\")\n", "PYTHON_PROMPT = _generate_prompt(\"Python\")\n\tJAVA_PROMPT = _generate_prompt(\"Java\")\n\tJAVASCRIPT_PROMPT = _generate_prompt(\"JavaScript\")\n\t__all__ = get_prompts()\n"]}
{"filename": "shell_craft/factories/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .prompt import PromptFactory\n\t__all__ = [\"PromptFactory\"]\n"]}
{"filename": "shell_craft/factories/prompt.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from shell_craft.prompts import Prompt\n\tclass PromptFactory:\n\t    @staticmethod\n\t    def get_prompt(prompt: str) -> Prompt:\n\t        \"\"\"\n\t        Generates a new prompt object based on the prompt type. If the prompt\n\t        type is not supported, a ValueError is raised.\n\t        Args:\n\t            prompt (str): A string representing the prompt type.\n\t        Raises:\n", "            ValueError: If the prompt type is not supported.\n\t        Returns:\n\t            Prompt: A new prompt object.\n\t        \"\"\"        \n\t        import shell_craft.prompts as prompts\n\t        if not prompt:\n\t            return None\n\t        available_prompts = [\n\t            prompt.removesuffix('_PROMPT').casefold()\n\t            for prompt in dir(prompts)\n", "            if prompt.endswith(\"_PROMPT\")\n\t        ]\n\t        if prompt.casefold() in available_prompts:\n\t            return getattr(prompts, f\"{prompt.upper()}_PROMPT\")\n\t        raise ValueError(f\"Unknown prompt type: {prompt}\")\n"]}
{"filename": "shell_craft/services/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .openai import OpenAIService, OpenAISettings\n\t__all__ = [\n\t    \"OpenAIService\",\n\t    \"OpenAISettings\",\n\t]\n"]}
{"filename": "shell_craft/services/service.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from typing import Protocol\n\tclass Service(Protocol):\n\t    def query(self, message: str) -> list[str]:\n\t        \"\"\"\n\t        Querys the foreign service with the given message and returns the\n\t        results.\n\t        Args:\n\t            message (str): The message to query the foreign service with.\n\t        Returns:\n\t            list[str]: The results of the query.\n", "        \"\"\"        \n\t        ...\n"]}
{"filename": "shell_craft/services/openai/settings.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from dataclasses import dataclass\n\t@dataclass\n\tclass OpenAISettings:\n\t    api_key: str\n\t    model: str\n\t    count: int\n\t    temperature: float\n\t    messages: list[str]\n"]}
{"filename": "shell_craft/services/openai/__init__.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from .service import OpenAIService, OpenAISettings\n\t__all__ = [\n\t    'OpenAIService',\n\t    'OpenAISettings',\n\t]\n"]}
{"filename": "shell_craft/services/openai/service.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "import openai\n\tfrom .settings import OpenAISettings\n\tclass OpenAIService:\n\t    def __init__(self, settings: OpenAISettings) -> None:\n\t        \"\"\"\n\t        Initialize a new OpenAI service with the given settings. This\n\t        service is responsible for querying the OpenAI API.\n\t        Args:\n\t            config (Configuration): The configuration to use for the service.\n\t        \"\"\"\n", "        self._settings = settings\n\t    def query(self, message: str) -> list[str]:\n\t        \"\"\"\n\t        Query the model with a message.\n\t        Args:\n\t            message (str): The message to query the model with.\n\t        Returns:\n\t            list[str]: The response from the model as a string or a list of strings.\n\t        \"\"\"\n\t        choices = openai.ChatCompletion.create(\n", "            api_key=self._settings.api_key,\n\t            model=self._settings.model,\n\t            messages=self._settings.messages + [\n\t                {\n\t                    \"role\": \"user\",\n\t                    \"content\": message\n\t                }\n\t            ],\n\t            n=self._settings.count,\n\t            temperature=self._settings.temperature,\n", "        )['choices']\n\t        return [choice['message']['content'] for choice in choices]\n"]}
{"filename": "tests/test_cli_types.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "import pytest\n\tfrom shell_craft.cli.types import limited_float\n\tfrom argparse import ArgumentTypeError\n\t@pytest.mark.parametrize(\n\t    'value, min_value, max_value, expected',\n\t    [\n\t        (0.0, 0.0, 1.0, 0.0),\n\t        (0.5, 0.0, 1.0, 0.5),\n\t        (1.0, 0.0, 1.0, 1.0),\n\t        (0.0, 0.0, 1.0, 0.0),\n", "        (0.5, 0.0, 1.0, 0.5),\n\t        (1.0, 0.0, 1.0, 1.0),\n\t    ]\n\t)\n\tdef test_limited_float(value: float, min_value: float, max_value: float, expected: float):\n\t    assert limited_float(min_value, max_value)(value) == expected\n\t@pytest.mark.parametrize(\n\t    'value, min_value, max_value, expected',\n\t    [\n\t        (0.0, 0.0, 1.0, 0.0),\n", "        (0.5, 0.0, 1.0, 0.5),\n\t        (1.0, 0.0, 1.0, 1.0),\n\t    ]\n\t)\n\tdef test_limited_float_min(value: float, min_value: float, max_value: float, expected: float):\n\t    assert limited_float(min_value, max_value)(value) == expected\n\t@pytest.mark.parametrize(\n\t    'value, min_value, max_value, expected',\n\t    [\n\t        (0.0, 0.0, 1.0, 0.0),\n", "        (0.5, 0.0, 1.0, 0.5),\n\t        (1.0, 0.0, 1.0, 1.0),\n\t    ]\n\t)\n\tdef test_limited_float_max(value: float, min_value: float, max_value: float, expected: float):\n\t    assert limited_float(min_value, max_value)(value) == expected\n\t@pytest.mark.parametrize(\n\t    'value, min_value, max_value, exception',\n\t    [\n\t        (-1.0, 0.0, 1.0, ArgumentTypeError),\n", "        (2.0, 0.0, 1.0, ArgumentTypeError),\n\t        (float('inf'), 0.0, 1.0, ArgumentTypeError),\n\t        (float('nan'), 0.0, 1.0, ArgumentTypeError),\n\t        (float('-inf'), 0.0, 1.0, ArgumentTypeError),\n\t        (None, 0.0, 1.0, ArgumentTypeError),\n\t    ]\n\t)\n\tdef test_limited_float_range_exception(value: float, min_value: float, max_value: float, exception: Exception):\n\t    with pytest.raises(exception):\n\t        limited_float(min_value, max_value)(value)"]}
{"filename": "tests/test_factories.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "import pytest\n\timport shell_craft.prompts as prompts\n\tfrom shell_craft.factories import PromptFactory\n\tPROMPTS = [\n\t    prompt\n\t    for prompt in dir(prompts)\n\t    if prompt.endswith(\"_PROMPT\")\n\t    and not prompt.startswith(\"_\")\n\t]\n\t@pytest.mark.parametrize(\"prompt\", PROMPTS)\n", "def test_prompt_factory(prompt: str):\n\t    \"\"\"\n\t    Test that the prompt factory returns the correct prompt.\n\t    Args:\n\t        prompt (str): The prompt to test.\n\t    \"\"\"    \n\t    assert PromptFactory.get_prompt(prompt.removesuffix(\"_PROMPT\")) == getattr(prompts, prompt)\n"]}
{"filename": "tests/test_configuration.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from unittest.mock import mock_open, patch\n\timport pytest\n\tfrom shell_craft.configuration import (AggregateConfiguration, Configuration,\n\t                                       JSONConfiguration)\n\tdef json_configuration() -> JSONConfiguration:\n\t    return JSONConfiguration(\n\t        text=\"\"\"{\n\t            \"key\": \"json\"\n\t        }\"\"\"\n\t    )\n", "def dictionary_configuration() -> dict:\n\t    return {\n\t        \"key\": \"dictionary\"\n\t    }\n\tdef aggregate_configuration() -> AggregateConfiguration:\n\t    return AggregateConfiguration(\n\t        configurations=[\n\t            json_configuration(),\n\t            dictionary_configuration(),\n\t        ]\n", "    )\n\t@pytest.mark.parametrize(\n\t    \"configuration, key, value\", [\n\t    (json_configuration(), \"key\", \"json\"),\n\t    (dictionary_configuration(), \"key\", \"dictionary\"),\n\t    (aggregate_configuration(), \"key\", \"json\"),\n\t])\n\tdef test_get(configuration: Configuration, key: str, value: str) -> None:\n\t    assert configuration.get(key) == value\n\t@pytest.mark.parametrize(\n", "    \"configuration, keys\", [\n\t    (json_configuration(), [\"key\"]),\n\t    (dictionary_configuration(), [\"key\"]),\n\t    (aggregate_configuration(), [\"key\"]),\n\t])\n\tdef test_get_keys(configuration: Configuration, keys: list[str]) -> None:\n\t    assert list(configuration.keys()) == keys\n\tdef test_json_from_file() -> None:\n\t    with patch(\"builtins.open\", mock_open(read_data=\"\"\"{\n\t        \"key\": \"json\"\n", "    }\"\"\")):\n\t        assert JSONConfiguration.from_file(\"file.json\").get(\"key\") == \"json\"\n\tdef test_aggregate_from_files() -> None:\n\t    with patch(\"builtins.open\", mock_open(read_data=\"\"\"{\n\t        \"key\": \"json\"\n\t    }\"\"\")):\n\t        with patch(\"pathlib.Path.exists\", return_value=True):\n\t            assert AggregateConfiguration.from_files([\"file.json\"]).get(\"key\") == \"json\"\n"]}
{"filename": "build/semver_bump.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "from semver import Version\n\tfrom pydantic import BaseModel\n\tclass VersionBump(BaseModel):\n\t    version: str\n\t    def bump(self, commit_messages: list[str]) -> \"VersionBump\":\n\t        \"\"\"\n\t        Bumps the version based on the commit messages.\n\t        Args:\n\t            commit_messages (list[str]): The commit messages to use for bumping the version.\n\t        Returns:\n", "            VersionBump: A new VersionBump object with the bumped version.\n\t        \"\"\"\n\t        version = Version.parse(self.version)\n\t        if any(\"BREAKING CHANGE\" in message for message in commit_messages):\n\t            return VersionBump(version=str(version.bump_major()))\n\t        elif any(message.strip().startswith('feat') for message in commit_messages):\n\t            return VersionBump(version=str(version.bump_minor()))\n\t        elif any(message.strip().startswith(\"fix\") for message in commit_messages):\n\t            return VersionBump(version=str(version.bump_patch()))\n\t        return VersionBump(version=str(version))\n", "def get_version() -> VersionBump:\n\t    \"\"\"\n\t    Gets the version from the \"pyproject.toml\" file.\n\t    Returns:\n\t        VersionBump: A VersionBump object with the version.\n\t    \"\"\"\n\t    with open(\"pyproject.toml\", \"r\") as f:\n\t        for line in f:\n\t            if line.startswith(\"version\"):\n\t                return VersionBump(version=line.split(\"=\")[1].strip().replace('\"', ''))\n", "def write_version(version: VersionBump) -> None:\n\t    \"\"\"\n\t    Writes the version to the \"pyproject.toml\" file.\n\t    Args:\n\t        version (VersionBump): The version to write to the file.\n\t    \"\"\"\n\t    with open(\"pyproject.toml\", \"r\") as f:\n\t        lines = f.readlines()\n\t    with open(\"pyproject.toml\", \"w\") as f:\n\t        for line in lines:\n", "            if line.startswith(\"version\"):\n\t                f.write(f'version = \"{version.version}\"\\n')\n\t            else:\n\t                f.write(line)\n\tdef main() -> None:\n\t    \"\"\"\n\t    The main entry point for the script. Assumes that \"git\" is installed.\n\t    Makes an assumption that the first argument is the tag to use for the\n\t    version bump.\n\t    If the first argument is \"--version\", then the version will be printed\n", "    to the console.\n\t    Example:\n\t        python build/semver_bump.py trunk\n\t        or\n\t        python build/semver_bump.py --version\n\t    Raises:\n\t        ValueError: If the first argument is not a valid tag.\n\t    Returns:\n\t        None: None\n\t    \"\"\"\n", "    import sys\n\t    import subprocess\n\t    if sys.argv[1] == \"--version\":\n\t        print(get_version().version)\n\t        return\n\t    write_version(\n\t        get_version().bump(\n\t            subprocess.run([\n\t                \"git\", \"log\", \"--format=%B\", \"--no-merges\",\n\t                f\"{sys.argv[1]}..HEAD\"],\n", "                capture_output=True\n\t            ).stdout.decode(\n\t                \"utf-8\"\n\t            ).split(\"\\n\")\n\t        )\n\t    )\n\tif __name__ == \"__main__\":\n\t    main()\n"]}
{"filename": "build/change_log.py", "chunked_list": ["# Copyright (c) 2023 Johnathan P. Irvin and contributors\n\t#\n\t# Permission is hereby granted, free of charge, to any person obtaining\n\t# a copy of this software and associated documentation files (the\n\t# \"Software\"), to deal in the Software without restriction, including\n\t# without limitation the rights to use, copy, modify, merge, publish,\n\t# distribute, sublicense, and/or sell copies of the Software, and to\n\t# permit persons to whom the Software is furnished to do so, subject to\n\t# the following conditions:\n\t#\n", "# The above copyright notice and this permission notice shall be\n\t# included in all copies or substantial portions of the Software.\n\t#\n\t# THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n\t# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n\t# NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n\t# LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n\t# OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n\t# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n", "def main() -> None:\n\t    \"\"\"\n\t    The main entry point for the script. Assumes that \"git\" is installed.\n\t    Makes an assumption that the first argument is the tag to use for the\n\t    changelog.\n\t    Example:\n\t        python build/change_log.py trunk\n\t    Raises:\n\t        ValueError: If the first argument is not a valid tag.\n\t    Returns:\n", "        None: None\n\t    \"\"\"\n\t    import sys\n\t    import subprocess\n\t    print(\n\t        subprocess.run(\n\t            [ \n\t                \"git\",\n\t                \"log\",\n\t                '--pretty=format:\"[%H](https://github.com/JohnnyIrvin/shell-craft/commit/%H) %s ([%an](mailto:%ae))%C(auto)\"',\n", "                \"--no-merges\",\n\t                \"--source\",\n\t                f\"{sys.argv[1]}..HEAD\",\n\t            ],\n\t            capture_output=True,\n\t            text=True,\n\t        ).stdout\n\t    )\n\tif __name__ == \"__main__\":\n\t    main()\n"]}
